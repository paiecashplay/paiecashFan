<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1e3a8a">
    <title>PaieCashPlay - Super App Fan Paris FC v3.0 COMPLÃˆTE</title>
    <link rel="stylesheet" href="app.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- LOADER -->
    <div id="loader" class="loader">
        <div class="loader-logo"></div>
        <div class="loader-text">PaieCashPlay</div>
    </div>

    <!-- APP CONTAINER -->
    <div id="app" class="app-container" style="display: none;">
        
        <!-- HEADER -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="club-logo-header">
                        <img src="https://upload.wikimedia.org/wikipedia/fr/thumb/2/22/Paris_FC_logo_2020.svg/1200px-Paris_FC_logo_2020.svg.png" alt="Paris FC">
                    </div>
                    <div class="header-title">
                        <h1>Paris Football Club</h1>
                        <span>Platine ğŸ’</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn-icon" id="btnAI">
                        <span>ğŸ¤–</span>
                    </button>
                    <button class="btn-icon notification-btn">
                        <span>ğŸ””</span>
                        <span class="badge">5</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="app-main" id="mainContent">
            
            <!-- SECTION: ACCUEIL (RÃ©seau Social avec Amis) -->
            <section id="accueilSection" class="section active">
                <!-- Boutons Actions Rapides -->
                <div class="action-buttons" style="display: flex; gap: 12px; margin: 16px 0; padding: 0 16px;">
                    <button class="btn-send-money" onclick="ouvrirEnvoiArgent()" style="flex: 1; padding: 16px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 12px; font-weight: 600; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 20px;">ğŸ’¸</span>
                        <span>Envoyer de l'argent</span>
                    </button>
                    <button class="btn-call" onclick="demarrerAppel()" style="flex: 1; padding: 16px; background: linear-gradient(135deg, #00ff88, #00c851); color: white; border: none; border-radius: 12px; font-weight: 600; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 20px;">ğŸ“</span>
                        <span>Appeler</span>
                    </button>
                </div>

                <!-- Stories Bar -->
                <div class="stories-bar">
                    <div class="stories-scroll">
                        <div class="story-item add-story">
                            <div class="story-avatar">
                                <div class="story-add-icon">+</div>
                            </div>
                            <span class="story-username">Votre story</span>
                        </div>
                        <!-- Stories amis injectÃ©es ici -->
                        <div id="storiesContainer"></div>
                    </div>
                </div>

                <!-- Posts Amis -->
                <div id="postsContainer" class="posts-container">
                    <!-- Posts injectÃ©s dynamiquement -->
                </div>
            </section>

            <!-- SECTION: FIDÃ‰LITÃ‰ -->
            <section id="fideliteSection" class="section">
                <div class="section-header">
                    <h2>ğŸ’ Programme FidÃ©litÃ©</h2>
                    <p>Gagnez des points Ã  chaque action</p>
                </div>

                <!-- Carte FidÃ©litÃ© -->
                <div class="loyalty-card">
                    <div class="loyalty-gradient"></div>
                    <div class="loyalty-content">
                        <div class="loyalty-header">
                            <h3>Niveau Platine ğŸ’</h3>
                            <span class="loyalty-points">4 250 points</span>
                        </div>
                        <div class="loyalty-progress-bar">
                            <div class="loyalty-progress" style="width: 70%"></div>
                        </div>
                        <p class="loyalty-next">750 pts pour niveau Diamond</p>
                    </div>
                </div>

                <!-- PFC Coin -->
                <div class="om-coin-section">
                    <div class="om-coin-card">
                        <h3>ğŸŸï¸ PFC Coin</h3>
                        <div class="om-coin-balance">2 450,00 PFC</div>
                        <p class="om-coin-rate">1 PFC = 1 EUR</p>
                        <div class="om-coin-advantages">
                            <div class="advantage">ğŸ›ï¸ -5% boutique</div>
                            <div class="advantage">ğŸŸï¸ PrioritÃ© billets</div>
                            <div class="advantage">ğŸ’° +2% cashback</div>
                        </div>
                    </div>
                </div>

                <!-- Badges -->
                <div class="badges-section">
                    <h3>ğŸ† Vos badges</h3>
                    <div id="badgesGrid" class="badges-grid">
                        <!-- Badges injectÃ©s -->
                    </div>
                </div>

                <!-- Missions -->
                <div class="missions-section">
                    <h3>ğŸ¯ Missions actives</h3>
                    <div id="missionsGrid" class="missions-grid">
                        <!-- Missions injectÃ©es -->
                    </div>
                </div>
            </section>

            <!-- SECTION: AMBASSADEURS Paris FC -->
            <section id="ambassadeursSection" class="section">
                <div class="section-header">
                    <h2>â­ LÃ©gendes Paris FC</h2>
                    <p>Ambassadeurs PaieCashPlay</p>
                </div>

                <div id="ambassadeursGrid" class="ambassadeurs-grid">
                    <!-- Ambassadeurs injectÃ©s -->
                </div>
            </section>

            <!-- SECTION: BILLETTERIE -->
            <section id="billetterieSection" class="section">
                <div class="section-header">
                    <h2>ğŸŸï¸ Billetterie</h2>
                    <p>Prochains matchs au Stade Jean Bouin</p>
                </div>

                <div id="matchesGrid" class="matches-grid">
                    <!-- Matchs injectÃ©s -->
                </div>
            </section>

            <!-- SECTION: BOUTIQUE -->
            <section id="boutiqueSection" class="section">
                <div class="section-header">
                    <h2>ğŸ›ï¸ Boutique Officielle</h2>
                    <p>Collection 2024-2025</p>
                </div>

                <div class="shop-categories">
                    <button class="category-btn active" data-cat="all">Tous</button>
                    <button class="category-btn" data-cat="maillots">Maillots</button>
                    <button class="category-btn" data-cat="accessoires">Accessoires</button>
                </div>

                <div id="productsGrid" class="products-grid">
                    <!-- Produits injectÃ©s -->
                </div>

                <button class="floating-cart" id="floatingCart">
                    ğŸ›’ <span class="cart-count">0</span>
                </button>
            </section>

            <!-- SECTION: PAIEMENT (Lyf Pay + Wallet) -->
            <section id="paiementSection" class="section">
                <div class="section-header">
                    <h2>ğŸ’³ Paiement PaieCash</h2>
                    <p>Solution de paiement complÃ¨te</p>
                </div>

                <!-- Carte Bancaire PaieCash -->
                <div class="card-container">
                    <div class="bank-card" id="bankCard">
                        <div class="card-face card-front">
                            <div class="card-gradient"></div>
                            <div class="hologram-effect"></div>
                            
                            <div class="card-content">
                                <div class="card-logos">
                                    <div class="logo-paiecash">PaieCash</div>
                                    <div class="logo-mastercard">
                                        <div class="circle circle1"></div>
                                        <div class="circle circle2"></div>
                                    </div>
                                </div>
                                
                                <div class="card-balance-section">
                                    <div class="balance-label">Solde</div>
                                    <div class="balance-display">
                                        <span class="balance-amount" id="cardBalance">1 247,50 â‚¬</span>
                                        <button class="balance-toggle" id="toggleBalance">ğŸ‘ï¸</button>
                                    </div>
                                    <div class="balance-cashback">+ 37,20 â‚¬ cashback</div>
                                </div>
                                
                                <div class="card-chip"></div>
                                <div class="card-number">5234 8765 1234 5678</div>
                                
                                <div class="card-info">
                                    <div class="card-info-item">
                                        <span class="info-label">Titulaire</span>
                                        <span class="info-value">ALEXANDRE MARTIN</span>
                                    </div>
                                    <div class="card-info-item">
                                        <span class="info-label">Expire</span>
                                        <span class="info-value">12/28</span>
                                    </div>
                                </div>
                                
                                <div class="card-watermark">
                                    <img src="https://upload.wikimedia.org/wikipedia/fr/thumb/2/22/Paris_FC_logo_2020.svg/1200px-Paris_FC_logo_2020.svg.png" alt="Paris FC">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Solutions Lyf Pay -->
                <div class="lyf-pay-section">
                    <h3>ğŸ’° Solutions de paiement Lyf Pay</h3>
                    
                    <!-- QR Code Payment -->
                    <div class="payment-method-card">
                        <div class="payment-icon">ğŸ“±</div>
                        <div class="payment-info">
                            <h4>Paiement QR Code</h4>
                            <p>Scannez pour payer instantanÃ©ment</p>
                        </div>
                        <button class="btn-payment" onclick="showQRCode()">GÃ©nÃ©rer</button>
                    </div>

                    <!-- Link Payment -->
                    <div class="payment-method-card">
                        <div class="payment-icon">ğŸ”—</div>
                        <div class="payment-info">
                            <h4>Lien de paiement</h4>
                            <p>Partagez un lien de paiement sÃ©curisÃ©</p>
                        </div>
                        <button class="btn-payment" onclick="createPaymentLink()">CrÃ©er</button>
                    </div>

                    <!-- Proximity Payment -->
                    <div class="payment-method-card">
                        <div class="payment-icon">ğŸ“¡</div>
                        <div class="payment-info">
                            <h4>Paiement sans contact</h4>
                            <p>Payez en approchant votre tÃ©lÃ©phone</p>
                        </div>
                        <button class="btn-payment" onclick="enableNFC()">Activer</button>
                    </div>
                </div>

                <!-- Partenaires de Paiement -->
                <div class="partners-section" style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 24px; margin: 20px 0;">
                    <h3>ğŸ¤ Partenaires de Paiement</h3>
                    <p style="opacity: 0.8; margin-bottom: 20px; font-size: 14px;">Payez en 1 clic avec votre wallet dÃ©jÃ  connectÃ© + cashback automatique</p>
                    
                    <div class="partners-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                        <!-- McDonald's -->
                        <div class="partner-card" onclick="payerAvecPartenaire('mcdonalds')" style="background: white; border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: transform 0.3s;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #FFC72C; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-size: 28px; font-weight: 900; color: #DA291C;">M</div>
                            <div style="font-weight: 700; color: #333; margin-bottom: 4px;">McDonald's</div>
                            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">Fast Food</div>
                            <div style="background: linear-gradient(135deg, #00ff88, #00c851); color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">ğŸ Cashback 5%</div>
                        </div>

                        <!-- Carrefour -->
                        <div class="partner-card" onclick="payerAvecPartenaire('carrefour')" style="background: white; border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: transform 0.3s;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #0055A4; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-size: 28px; font-weight: 900; color: white;">C</div>
                            <div style="font-weight: 700; color: #333; margin-bottom: 4px;">Carrefour</div>
                            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">Grande Distribution</div>
                            <div style="background: linear-gradient(135deg, #00ff88, #00c851); color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">ğŸ Cashback 3%</div>
                        </div>

                        <!-- Uber Eats -->
                        <div class="partner-card" onclick="payerAvecPartenaire('ubereats')" style="background: white; border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: transform 0.3s;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #06C167; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-size: 20px; font-weight: 900; color: white;">UE</div>
                            <div style="font-weight: 700; color: #333; margin-bottom: 4px;">Uber Eats</div>
                            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">Livraison Repas</div>
                            <div style="background: linear-gradient(135deg, #00ff88, #00c851); color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">ğŸ Cashback 4%</div>
                        </div>

                        <!-- DÃ©cathlon -->
                        <div class="partner-card" onclick="payerAvecPartenaire('decathlon')" style="background: white; border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: transform 0.3s;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #0082C3; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-size: 28px; font-weight: 900; color: white;">D</div>
                            <div style="font-weight: 700; color: #333; margin-bottom: 4px;">DÃ©cathlon</div>
                            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">Articles de Sport</div>
                            <div style="background: linear-gradient(135deg, #00ff88, #00c851); color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">ğŸ Cashback 6%</div>
                        </div>

                        <!-- Fnac -->
                        <div class="partner-card" onclick="payerAvecPartenaire('fnac')" style="background: white; border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: transform 0.3s;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #F7B500; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-size: 28px; font-weight: 900; color: #222;">F</div>
                            <div style="font-weight: 700; color: #333; margin-bottom: 4px;">Fnac</div>
                            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">MultimÃ©dia & Culture</div>
                            <div style="background: linear-gradient(135deg, #00ff88, #00c851); color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">ğŸ Cashback 3%</div>
                        </div>

                        <!-- Sephora -->
                        <div class="partner-card" onclick="payerAvecPartenaire('sephora')" style="background: white; border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: transform 0.3s;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: black; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-size: 28px; font-weight: 900; color: white;">S</div>
                            <div style="font-weight: 700; color: #333; margin-bottom: 4px;">Sephora</div>
                            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">BeautÃ© & CosmÃ©tiques</div>
                            <div style="background: linear-gradient(135deg, #00ff88, #00c851); color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">ğŸ Cashback 4%</div>
                        </div>
                    </div>
                </div>

                <!-- Wallet Multi-devises -->
                <div class="wallet-section">
                    <h3>ğŸ‘› Wallet Multi-devises</h3>
                    
                    <div class="wallet-address">
                        <span id="walletAddress">0x742d35Cc6634C0532925a3b844Bc9e7595f8f3a</span>
                        <button class="btn-copy" onclick="copyAddress()">ğŸ“‹</button>
                        <button class="balance-toggle" id="toggleAddress">ğŸ‘ï¸</button>
                    </div>

                    <div class="balances-grid">
                        <div class="balance-card">
                            <div class="balance-icon">ğŸ’¶</div>
                            <span class="balance-label">EUR</span>
                            <span class="balance-value">2 450,00 â‚¬</span>
                        </div>
                        <div class="balance-card om-coin">
                            <div class="balance-icon">ğŸŸï¸</div>
                            <span class="balance-label">PFC Coin</span>
                            <span class="balance-value">2 450,00 PFC</span>
                        </div>
                        <div class="balance-card">
                            <div class="balance-icon">â‚¿</div>
                            <span class="balance-label">Bitcoin</span>
                            <span class="balance-value">0,0234 BTC</span>
                        </div>
                        <div class="balance-card">
                            <div class="balance-icon">Î</div>
                            <span class="balance-label">Ethereum</span>
                            <span class="balance-value">1,45 ETH</span>
                        </div>
                    </div>
                </div>

                <!-- Contacts P2P -->
                <div class="contacts-section">
                    <h3>ğŸ‘¥ Envoyer de l'argent</h3>
                    <div class="p2p-search">
                        <input type="text" placeholder="ğŸ” Nom, tÃ©lÃ©phone ou adresse" id="p2pSearch">
                    </div>
                    <div id="contactsGrid" class="contacts-grid">
                        <!-- Contacts injectÃ©s -->
                    </div>
                </div>
            </section>

            <!-- SECTION: PROFIL -->
            <section id="profilSection" class="section">
                <div class="section-header">
                    <h2>ğŸ‘¤ Mon Profil</h2>
                    <p>GÃ©rez votre compte Paris Football Club</p>
                </div>

                <div class="profile-card">
                    <div class="profile-avatar">
                        <img src="https://www.genspark.ai/api/files/s/J0EUy7QV" alt="Avatar">
                    </div>
                    <h3>Alexandre Martin</h3>
                    <p>Fan Platine ğŸ’</p>
                    <button class="btn-edit-profile">Modifier le profil</button>
                </div>

                <!-- Upload Photo d'IdentitÃ© -->
                <div class="identity-upload-section" style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px; margin: 20px 0;">
                    <h4 style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        <span>ğŸ“¸</span>
                        <span>VÃ©rification d'identitÃ©</span>
                    </h4>
                    <input type="file" id="uploadIdentity" accept="image/*" style="display: none;" onchange="handleIdentityUpload(event)">
                    <button onclick="document.getElementById('uploadIdentity').click()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-bottom: 12px;">
                        ğŸ“¤ TÃ©lÃ©charger ma piÃ¨ce d'identitÃ©
                    </button>
                    <div id="identityPreview" style="display: none; margin-bottom: 12px; text-align: center;">
                        <img id="identityImage" style="max-width: 200px; border-radius: 8px; border: 2px solid rgba(255,255,255,0.2);">
                    </div>
                    <p class="upload-status" id="identityStatus" style="font-size: 13px; opacity: 0.8; text-align: center;">
                        â³ Aucune piÃ¨ce tÃ©lÃ©chargÃ©e
                    </p>
                </div>

                <!-- Gestion Mot de Passe -->
                <div class="password-section" style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px; margin: 20px 0;">
                    <h4 style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        <span>ğŸ”</span>
                        <span>Mot de passe</span>
                    </h4>
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <input type="password" id="passwordDisplay" value="MonMotDePasse2024!" readonly style="flex: 1; padding: 12px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.05); color: white;">
                        <button onclick="togglePassword()" style="padding: 12px 16px; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 8px; cursor: pointer; font-size: 18px;">
                            <span id="toggleIcon">ğŸ‘ï¸</span>
                        </button>
                    </div>
                    <button onclick="ouvrirChangerMotDePasse()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #00ff88, #00c851); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                        âœï¸ Changer mon mot de passe
                    </button>
                </div>

                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-value">4 250</span>
                        <span class="stat-label">Points fidÃ©litÃ©</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">2 450â‚¬</span>
                        <span class="stat-label">PFC Coins</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">12</span>
                        <span class="stat-label">Badges</span>
                    </div>
                </div>

                <div class="profile-menu">
                    <button class="profile-menu-item">
                        <span>âš™ï¸</span>
                        <span>ParamÃ¨tres</span>
                    </button>
                    <button class="profile-menu-item">
                        <span>ğŸ«</span>
                        <span>Mes billets</span>
                    </button>
                    <button class="profile-menu-item">
                        <span>ğŸ›’</span>
                        <span>Mes commandes</span>
                    </button>
                    <button class="profile-menu-item">
                        <span>ğŸ’³</span>
                        <span>Moyens de paiement</span>
                    </button>
                    <button class="profile-menu-item">
                        <span>ğŸ””</span>
                        <span>Notifications</span>
                    </button>
                    <button class="profile-menu-item">
                        <span>â“</span>
                        <span>Aide & Support</span>
                    </button>
                    <button class="profile-menu-item logout">
                        <span>ğŸšª</span>
                        <span>DÃ©connexion</span>
                    </button>
                </div>
            </section>

        </main>

        <!-- BOTTOM NAVIGATION (7 fonctionnalitÃ©s) -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-section="accueilSection">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-label">Accueil</span>
            </button>
            <button class="nav-btn" data-section="fideliteSection">
                <span class="nav-icon">ğŸ’</span>
                <span class="nav-label">FidÃ©litÃ©</span>
            </button>
            <button class="nav-btn" data-section="ambassadeursSection">
                <span class="nav-icon">â­</span>
                <span class="nav-label">LÃ©gendes</span>
            </button>
            <button class="nav-btn" data-section="billetterieSection">
                <span class="nav-icon">ğŸŸï¸</span>
                <span class="nav-label">Billets</span>
            </button>
            <button class="nav-btn" data-section="boutiqueSection">
                <span class="nav-icon">ğŸ›ï¸</span>
                <span class="nav-label">Boutique</span>
            </button>
            <button class="nav-btn" data-section="paiementSection">
                <span class="nav-icon">ğŸ’³</span>
                <span class="nav-label">Paiement</span>
            </button>
            <button class="nav-btn" data-section="profilSection">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-label">Profil</span>
            </button>
        </nav>
    </div>

    <!-- MODAL: AI Assistant -->
    <div class="modal-overlay" id="aiModal">
        <div class="ai-modal-container">
            <div class="ai-modal-header">
                <h3>ğŸ¤– Assistant IA</h3>
                <button class="btn-close-modal" onclick="closeAIModal()">âœ•</button>
            </div>
            <div class="ai-modal-body" id="aiChatMessages">
                <!-- Messages IA -->
            </div>
            <div class="ai-modal-footer">
                <input type="text" id="aiInput" placeholder="Posez votre question...">
                <button class="btn-send" onclick="sendAIMessage()">ğŸ“¤</button>
            </div>
        </div>
    </div>

    <!-- MODAL: QR Code -->
    <div class="modal-overlay" id="qrModal">
        <div class="qr-modal-container">
            <div class="modal-header">
                <h3>ğŸ“± QR Code de paiement</h3>
                <button class="btn-close-modal" onclick="closeQRModal()">âœ•</button>
            </div>
            <div class="qr-modal-body">
                <div class="qr-code-display">
                    <div class="qr-code-placeholder">
                        <div class="qr-pattern"></div>
                    </div>
                    <p>Scannez ce code pour payer</p>
                    <div class="qr-amount">50,00 â‚¬</div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    
    <!-- JavaScript pour les nouvelles fonctionnalitÃ©s v3 -->
    <script>
    // ===== ENVOI D'ARGENT =====
    function ouvrirEnvoiArgent() {
        const montant = prompt("ğŸ’¸ Combien voulez-vous envoyer ? (en â‚¬)");
        if (montant && !isNaN(montant)) {
            const destinataire = prompt("ğŸ‘¤ Ã€ qui voulez-vous envoyer " + montant + "â‚¬ ?\n(Nom ou numÃ©ro de tÃ©lÃ©phone)");
            if (destinataire) {
                if (parseFloat(montant) > 30) {
                    const code = prompt("ğŸ” Code de sÃ©curitÃ© requis (montant >30â‚¬)");
                    if (code === "1234") {
                        alert("âœ… Transfert de " + montant + "â‚¬ vers " + destinataire + " rÃ©ussi !\nğŸ Cashback : " + (montant * 0.02).toFixed(2) + "â‚¬");
                    } else {
                        alert("âŒ Code incorrect. Transfert annulÃ©.");
                    }
                } else {
                    alert("âœ… Transfert de " + montant + "â‚¬ vers " + destinataire + " rÃ©ussi !\nğŸ Cashback : " + (montant * 0.02).toFixed(2) + "â‚¬");
                }
            }
        }
    }

    // ===== APPEL =====
    function demarrerAppel() {
        const choix = confirm("ğŸ“ Type d'appel :\n\nOK = Appel Audio ğŸ™ï¸\nAnnuler = Appel VidÃ©o ğŸ“¹");
        const type = choix ? "audio" : "vidÃ©o";
        const contact = prompt("ğŸ‘¤ Qui voulez-vous appeler ?");
        if (contact) {
            alert("ğŸ“ Appel " + type + " vers " + contact + " en cours...\n\nâ±ï¸ DurÃ©e : 00:00\n\n(Simulation - FonctionnalitÃ© complÃ¨te Ã  venir)");
        }
    }

    // ===== PARTENAIRES DE PAIEMENT =====
    const partenairesData = {
        mcdonalds: { nom: "McDonald's", cashback: 5, categorie: "Fast Food" },
        carrefour: { nom: "Carrefour", cashback: 3, categorie: "Grande Distribution" },
        ubereats: { nom: "Uber Eats", cashback: 4, categorie: "Livraison Repas" },
        decathlon: { nom: "DÃ©cathlon", cashback: 6, categorie: "Articles de Sport" },
        fnac: { nom: "Fnac", cashback: 3, categorie: "MultimÃ©dia & Culture" },
        sephora: { nom: "Sephora", cashback: 4, categorie: "BeautÃ© & CosmÃ©tiques" }
    };

    function payerAvecPartenaire(partenaire) {
        const data = partenairesData[partenaire];
        const montant = prompt("ğŸ’³ Montant Ã  payer chez " + data.nom + " ?");
        if (montant && !isNaN(montant)) {
            const cashback = (parseFloat(montant) * data.cashback / 100).toFixed(2);
            alert("âœ… Paiement rÃ©ussi chez " + data.nom + " !\n\nğŸ’° Montant : " + montant + "â‚¬\nğŸ Cashback " + data.cashback + "% : +" + cashback + "â‚¬\n\nğŸ’³ DÃ©bitÃ© de votre wallet PaieCash");
        }
    }

    // ===== UPLOAD PHOTO D'IDENTITÃ‰ =====
    function handleIdentityUpload(event) {
        const file = event.target.files[0];
        if (file) {
            if (file.size > 5 * 1024 * 1024) {
                alert("âŒ Fichier trop volumineux (max 5MB)");
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('identityImage').src = e.target.result;
                document.getElementById('identityPreview').style.display = 'block';
                document.getElementById('identityStatus').innerHTML = 'â³ En cours de vÃ©rification...';
                
                // Simulation vÃ©rification
                setTimeout(() => {
                    document.getElementById('identityStatus').innerHTML = 'âœ… PiÃ¨ce d\'identitÃ© vÃ©rifiÃ©e et validÃ©e !';
                }, 2000);
            };
            reader.readAsDataURL(file);
        }
    }

    // ===== GESTION MOT DE PASSE =====
    function togglePassword() {
        const input = document.getElementById('passwordDisplay');
        const icon = document.getElementById('toggleIcon');
        if (input.type === 'password') {
            input.type = 'text';
            icon.textContent = 'ğŸ™ˆ';
        } else {
            input.type = 'password';
            icon.textContent = 'ğŸ‘ï¸';
        }
    }

    function ouvrirChangerMotDePasse() {
        const ancien = prompt("ğŸ” Ancien mot de passe :");
        if (ancien === "MonMotDePasse2024!") {
            let nouveau = prompt("âœï¸ Nouveau mot de passe :\n\n(Min 8 caractÃ¨res, 1 majuscule, 1 chiffre, 1 caractÃ¨re spÃ©cial)");
            if (nouveau) {
                const regex = /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                if (regex.test(nouveau)) {
                    const confirmer = prompt("âœ… Confirmez le nouveau mot de passe :");
                    if (confirmer === nouveau) {
                        document.getElementById('passwordDisplay').value = nouveau;
                        alert("âœ… Mot de passe changÃ© avec succÃ¨s !\n\nğŸ“§ Un email de confirmation a Ã©tÃ© envoyÃ©.");
                    } else {
                        alert("âŒ Les mots de passe ne correspondent pas.");
                    }
                } else {
                    alert("âŒ Le mot de passe ne respecte pas les exigences de sÃ©curitÃ©.");
                }
            }
        } else {
            alert("âŒ Ancien mot de passe incorrect.");
        }
    }

    // Animation hover pour les partenaires
    document.addEventListener('DPFContentLoaded', function() {
        const partners = document.querySelectorAll('.partner-card');
        partners.forEach(partner => {
            partner.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px)';
                this.style.boxShadow = '0 8px 24px rgba(0,0,0,0.15)';
            });
            partner.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });
    });
    </script>
</body>
</html>
