<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaieCashFan - Paris FC</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: white;
        }

        /* HEADER */
        .header {
            background: rgba(0, 0, 0, 0.6);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .club-logo-header {
            width: 50px;
            height: 50px;
        }

        .header-info h2 {
            font-size: 18px;
        }

        .header-info p {
            font-size: 14px;
            opacity: 0.8;
        }

        .user-info {
            text-align: right;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin: 0 auto 5px;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }

        /* MENU */
        .menu {
            display: flex;
            overflow-x: auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            gap: 10px;
        }

        .menu-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .menu-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* CONTAINER */
        .container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* SECTIONS */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* CARD */
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .card-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        /* WALLET CARD */
        .wallet-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .wallet-balance {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }

        .wallet-info {
            font-size: 14px;
            opacity: 0.9;
        }

        /* BUTTONS */
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .close-btn {
            float: right;
            font-size: 24px;
            cursor: pointer;
        }

        /* CRYPTO CARDS */
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .crypto-card {
            padding: 20px;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .crypto-card:hover {
            transform: scale(1.05);
        }

        /* PRODUCT GRID */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .product-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .product-card.selected {
            border: 3px solid #4ade80;
            background: rgba(74, 222, 128, 0.2);
        }

        .product-img {
            font-size: 60px;
            margin-bottom: 10px;
        }

        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .product-price {
            color: #4ade80;
            font-size: 18px;
            font-weight: bold;
        }

        /* QR CODE */
        .qr-code {
            background: white;
            padding: 20px;
            border-radius: 15px;
            display: inline-block;
            position: relative;
        }

        .qr-pattern {
            width: 200px;
            height: 200px;
            background: 
                linear-gradient(0deg, transparent 45%, #000 45%, #000 55%, transparent 55%),
                linear-gradient(90deg, transparent 45%, #000 45%, #000 55%, transparent 55%);
            background-size: 20px 20px;
            position: relative;
        }

        .qr-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 10px;
            border-radius: 10px;
            font-weight: bold;
            color: #3b82f6;
            font-size: 16px;
        }

        @media (max-width: 768px) {
            .crypto-grid, .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <div class="header-left">
            <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Paris_FC_logo_%282020%29.svg" alt="Paris FC" class="club-logo-header">
            <div class="header-info">
                <h2>Paris FC</h2>
                <p>Platine üíé</p>
            </div>
        </div>
        <div class="user-info">
            <div style="position: relative;">
                <div class="user-avatar">üë§</div>
                <div class="notification-badge">5</div>
            </div>
            <div style="font-size: 12px; margin-top: 5px;">ETOT Constantin Nicolas</div>
            <div style="font-size: 11px; opacity: 0.7;">etot@paiecash.com</div>
            <button onclick="seDeconnecter()" style="margin-top: 10px; padding: 8px 15px; background: rgba(239, 68, 68, 0.8); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: bold;">
                üö™ D√©connexion
            </button>
        </div>
    </div>

    <!-- MENU -->
    <div class="menu">
        <button class="menu-btn active" onclick="showSection('accueil')">üè† Accueil</button>
        <button class="menu-btn" onclick="showSection('fidelite')">üíé Fid√©lit√©</button>
        <button class="menu-btn" onclick="showSection('legendes')">‚≠ê L√©gendes</button>
        <button class="menu-btn" onclick="showSection('billets')">üéüÔ∏è Billets</button>
        <button class="menu-btn" onclick="showSection('boutique')">üõçÔ∏è Boutique</button>
        <button class="menu-btn" onclick="showSection('paiement')">üí≥ Paiement</button>
        <button class="menu-btn" onclick="showSection('profil')">üë§ Profil</button>
    </div>

    <!-- CONTAINER -->
    <div class="container">
        <!-- ACCUEIL -->
        <div class="section active" id="accueil">
            <div class="card">
                <div class="card-title">üëã Bienvenue chez Paris FC !</div>
                <p>Vous √™tes connect√© en tant que <strong>ETOT Constantin Nicolas</strong></p>
                <p style="margin-top: 10px;">Niveau : Platine üíé | 4,250 points</p>
            </div>

            <!-- WALLET PAIECASH -->
            <div class="wallet-card" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); padding: 25px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="font-size: 22px; font-weight: bold; letter-spacing: 3px;">PAIECASH</div>
                    <div style="font-size: 14px; opacity: 0.9;">üîµ‚ö™üî¥ PFC</div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">SOLDE TOTAL</div>
                    <div style="font-size: 36px; font-weight: bold;" id="soldeTotal-accueil">1247.50 ‚Ç¨</div>
                    <div style="font-size: 14px; margin-top: 5px; display: flex; gap: 15px;">
                        <span>üíµ Wallet : <span id="soldeWallet-accueil">625.00</span>‚Ç¨</span>
                        <span>üí≥ Carte : <span id="soldeCarte-accueil">622.50</span>‚Ç¨</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 16px; color: #90EE90;">+ <span id="cashback-accueil">37.20</span>‚Ç¨ cashback</div>
                </div>

                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 12px; opacity: 0.8; margin-bottom: 5px;">N¬∞ Identification</div>
                    <div style="font-size: 18px; font-weight: bold; letter-spacing: 2px;">5234 8765 1234 5678</div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <div>
                            <div style="font-size: 11px; opacity: 0.7;">Titulaire</div>
                            <div style="font-size: 14px; font-weight: bold;">ETOT CONSTANTIN</div>
                        </div>
                        <div>
                            <div style="font-size: 11px; opacity: 0.7;">Expire</div>
                            <div style="font-size: 14px; font-weight: bold;">12/34</div>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="showSection('paiement')" style="width: 100%; background: white; color: #1e3c72; font-weight: bold;">üí≥ G√©rer Wallet & Paiements</button>
            </div>

            <!-- TRANSACTIONS R√âCENTES -->
            <div class="card">
                <div class="card-title">üìä Transactions R√©centes</div>
                <div id="transactionsRecentes">
                    <div class="transaction-item" onclick="voirTicket('McDonald\'s Charl√©ty', '2025-01-15', 'TRX-20250115-001', -9.50, 0.48)">
                        <div class="transaction-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">üçî</div>
                        <div class="transaction-details">
                            <div class="transaction-name">McDonald's Charl√©ty</div>
                            <div class="transaction-date">15 janvier 2025 - 14:23</div>
                        </div>
                        <div class="transaction-amount" style="color: #ff6b6b;">-9.50 EUR</div>
                    </div>
                    <div class="transaction-item" onclick="voirTicket('Recharge Wallet', '2025-01-15', 'TRX-20250115-002', 50.00, 0)">
                        <div class="transaction-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">üíµ</div>
                        <div class="transaction-details">
                            <div class="transaction-name">Recharge Wallet</div>
                            <div class="transaction-date">15 janvier 2025 - 10:15</div>
                        </div>
                        <div class="transaction-amount positive">+50.00 EUR</div>
                    </div>
                    <div class="transaction-item" onclick="voirTicket('Boutique PFC - Maillot', '2025-01-14', 'TRX-20250114-003', -89.90, 4.50)">
                        <div class="transaction-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">üëï</div>
                        <div class="transaction-details">
                            <div class="transaction-name">Boutique PFC - Maillot</div>
                            <div class="transaction-date">14 janvier 2025 - 16:45</div>
                        </div>
                        <div class="transaction-amount" style="color: #ff6b6b;">-89.90 EUR</div>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="showSection('paiement')" style="margin-top: 15px; width: 100%;">Voir toutes les transactions</button>
            </div>

            <div class="card">
                <div class="card-title">Actions Rapides</div>
                <button class="btn" onclick="showSection('paiement')">üí≥ Aller au Paiement</button>
                <button class="btn btn-secondary" onclick="showSection('boutique')">üõçÔ∏è Aller √† la Boutique</button>
            </div>
        </div>

        <!-- FID√âLIT√â -->
        <div class="section" id="fidelite">
            <div class="card">
                <div class="card-title">üíé Programme Fid√©lit√©</div>
                <p style="margin-bottom: 20px;">Niveau Platine üíé</p>
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Progression</div>
                    <div style="background: rgba(255,255,255,0.3); height: 10px; border-radius: 5px; overflow: hidden;">
                        <div style="background: white; height: 100%; width: 42.5%;"></div>
                    </div>
                    <div style="margin-top: 10px; font-size: 18px; font-weight: bold;">4,250 / 10,000 points</div>
                </div>
                <p>Contenu √† venir...</p>
            </div>
        </div>

        <!-- L√âGENDES -->
        <div class="section" id="legendes">
            <div class="card">
                <div class="card-title">‚≠ê L√©gendes & Ambassadeurs</div>
                <p>Contenu √† venir...</p>
            </div>
        </div>

        <!-- BILLETS -->
        <div class="section" id="billets">
            <div class="card">
                <div class="card-title">üéüÔ∏è Billetterie NFT</div>
                <p>Contenu √† venir...</p>
            </div>
        </div>

        <!-- PAIEMENT -->
        <div class="section" id="paiement">
            <div class="wallet-card">
                <div class="wallet-info">PAIECASH</div>
                <div class="wallet-info">SOLDE TOTAL</div>
                <div class="wallet-balance" id="soldeTotal">1247.50 ‚Ç¨</div>
                <div class="wallet-info">Wallet (<span id="soldeWallet">625.00</span>‚Ç¨) + Carte (<span id="soldeCarte">622.50</span>‚Ç¨) + <span id="cashback">37.20</span>‚Ç¨ cashback</div>
            </div>

            <button class="btn" onclick="rechargerWallet()">üí∞ Recharger Wallet</button>
            <button class="btn btn-secondary" onclick="retirerVersCarte()">üí∏ Retirer vers Carte</button>

            <!-- CRYPTO -->
            <div class="card">
                <div class="card-title">üíé Mes Crypto - Cliquez pour payer un produit</div>
                <div class="crypto-grid">
                    <div class="crypto-card" onclick="choisirProduitCrypto('USDC', 847.30, 801.25)" style="background: linear-gradient(135deg, #10b981, #059669);">
                        <div style="font-size: 12px; opacity: 0.9;">USDC</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;" id="usdc">847.30 $</div>
                        <div style="font-size: 11px; opacity: 0.8;">‚âà 801.25 ‚Ç¨</div>
                    </div>
                    <div class="crypto-card" onclick="choisirProduitCrypto('OM Coin', 2450, 24.50)" style="background: linear-gradient(135deg, #3b82f6, #1e40af);">
                        <div style="font-size: 12px; opacity: 0.9;">OM Coin</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;" id="omcoin">2,450 OMC</div>
                        <div style="font-size: 11px; opacity: 0.8;">‚âà 24.50 ‚Ç¨</div>
                    </div>
                </div>
                <button class="btn" onclick="convertirCrypto()" style="margin-top: 20px;">üîÑ Convertir / √âchanger</button>
            </div>

            <!-- QR CODE -->
            <div class="card">
                <div class="card-title">üì± Recevoir un Paiement</div>
                <button class="btn" onclick="afficherQRCode()">üì≤ Afficher QR Code PaieCash</button>
            </div>

            <!-- CARTE BANCAIRE -->
            <div class="card">
                <div class="card-title">üí≥ Ma Carte Bancaire OM</div>
                <div style="background: linear-gradient(135deg, #1e3a8a, #0ea5e9); padding: 30px; border-radius: 20px; color: white; margin-bottom: 15px;">
                    <div style="margin-bottom: 20px;">
                        <div style="font-size: 14px; opacity: 0.9;">CARTE OFFICIELLE</div>
                        <div style="font-size: 20px; font-weight: bold;">OLYMPIQUE DE MARSEILLE</div>
                    </div>
                    <div style="font-size: 20px; letter-spacing: 3px; margin: 20px 0;">5234 8765 1234 5678</div>
                    <div style="display: flex; justify-content: space-between;">
                        <div><div style="font-size: 10px;">TITULAIRE</div><div style="font-weight: bold;">ETOT CONSTANTIN</div></div>
                        <div><div style="font-size: 10px;">EXPIRE</div><div style="font-weight: bold;">12/27</div></div>
                        <div><div style="font-size: 10px;">CVV</div><div style="font-weight: bold;" id="cvv">***</div></div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <button class="btn btn-secondary" onclick="voirPIN()">üëÅÔ∏è Voir PIN</button>
                    <button class="btn btn-secondary" onclick="gererLimites()">‚öôÔ∏è Limites</button>
                </div>
            </div>
        </div>

        <!-- BOUTIQUE -->
        <div class="section" id="boutique">
            <div class="card">
                <div class="card-title">üõçÔ∏è Boutique Officielle OM</div>
                <p style="margin-bottom: 20px;">S√©lectionnez un ou plusieurs produits</p>
                <div class="product-grid" id="boutique-grid">
                    <!-- Les produits seront ajout√©s dynamiquement -->
                </div>
                <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.2); border-radius: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Produits s√©lectionn√©s:</span>
                        <strong id="nbProduits">0</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Total:</span>
                        <strong id="totalBoutique" style="color: #4ade80; font-size: 20px;">0.00 ‚Ç¨</strong>
                    </div>
                </div>
                <button class="btn" onclick="payerBoutique()" style="margin-top: 15px;">üí≥ Payer (choisir moyen)</button>
                <button class="btn" onclick="payerBoutiqueBNPL()" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üí≥ Payer en 3x/4x/6x (BNPL)</button>
            </div>
        </div>

        <!-- ABONNEMENT -->
        <div class="section" id="abonnement">
            <div class="card">
                <div class="card-title">üìÖ Abonnements & Pass</div>
                <div class="product-grid">
                    <div class="product-card" onclick="acheterAbonnement('Pass Mensuel', 29.90)">
                        <div class="product-img">üé´</div>
                        <div class="product-name">Pass Mensuel</div>
                        <div class="product-price">29.90 ‚Ç¨/mois</div>
                        <div style="font-size: 11px; margin-top: 5px; opacity: 0.8;">Acc√®s tous les matchs</div>
                    </div>
                    <div class="product-card" onclick="acheterAbonnement('Pass Annuel', 299.00)">
                        <div class="product-img">üéüÔ∏è</div>
                        <div class="product-name">Pass Annuel</div>
                        <div class="product-price">299.00 ‚Ç¨/an</div>
                        <div style="font-size: 11px; margin-top: 5px; opacity: 0.8;">-20% vs mensuel</div>
                    </div>
                    <div class="product-card" onclick="acheterAbonnement('VIP Platinum', 1999.00)">
                        <div class="product-img">üëë</div>
                        <div class="product-name">VIP Platinum</div>
                        <div class="product-price">1999.00 ‚Ç¨/an</div>
                        <div style="font-size: 11px; margin-top: 5px; opacity: 0.8;">Acc√®s loges</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PARTENAIRES -->
        <div class="section" id="partenaires">
            <div class="card">
                <div class="card-title">ü§ù Partenaires avec Cashback</div>
                <p style="margin-bottom: 20px;">Choisissez votre partenaire pour voir le menu</p>
                <div style="display: grid; gap: 15px;">
                    <div onclick="ouvrirMenuPartenaire('McDonald\\'s', 5)" style="background: rgba(255, 193, 7, 0.2); padding: 20px; border-radius: 15px; cursor: pointer;">
                        <div style="font-size: 40px; margin-bottom: 10px;">üçî</div>
                        <div style="font-weight: bold; font-size: 18px;">McDonald's</div>
                        <div style="color: #4ade80; font-weight: bold; margin-top: 5px;">Cashback 5%</div>
                    </div>
                    <div onclick="ouvrirMenuPartenaire('Carrefour', 3)" style="background: rgba(0, 82, 204, 0.2); padding: 20px; border-radius: 15px; cursor: pointer;">
                        <div style="font-size: 40px; margin-bottom: 10px;">üõí</div>
                        <div style="font-weight: bold; font-size: 18px;">Carrefour</div>
                        <div style="color: #4ade80; font-weight: bold; margin-top: 5px;">Cashback 3%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PROFIL -->
        <div class="section" id="profil">
            <div class="card">
                <div class="card-title">üë§ Mon Profil</div>
                <p style="margin-bottom: 10px;"><strong>Nom :</strong> ETOT Constantin Nicolas</p>
                <p style="margin-bottom: 10px;"><strong>Email :</strong> etot@paiecash.com</p>
                <p style="margin-bottom: 10px;"><strong>Niveau :</strong> Platine üíé</p>
                <p style="margin-bottom: 10px;"><strong>Points :</strong> 4,250</p>
            </div>
            <div class="card">
                <div class="card-title">‚öôÔ∏è Param√®tres</div>
                <button class="btn">üîî Notifications</button>
                <button class="btn btn-secondary">üîí S√©curit√©</button>
                <button class="btn btn-secondary">üåê Langue</button>
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">√ó</span>
            <div class="modal-title" id="modalTitle"></div>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // √âTAT GLOBAL
        let state = {
            wallet: 625.00,
            carte: 622.50,
            cashback: 37.20,
            usdc: 847.30,
            omcoin: 2450,
            produitsSelectionnes: []
        };

        // PRODUITS BOUTIQUE
        const produitsBoutique = [
            { id: 1, nom: "Maillot Domicile", prix: 89.99, emoji: "üëï" },
            { id: 2, nom: "√âcharpe OM", prix: 19.99, emoji: "üß£" },
            { id: 3, nom: "Casquette", prix: 24.99, emoji: "üß¢" },
            { id: 4, nom: "Surv√™tement", prix: 129.99, emoji: "üèÉ" },
            { id: 5, nom: "Ballon Officiel", prix: 29.99, emoji: "‚öΩ" },
            { id: 6, nom: "Gourde OM", prix: 14.99, emoji: "üç∂" }
        ];

        // MENU MCDONALD'S
        const menuMcDonalds = [
            { id: 1, nom: "Big Mac Menu", prix: 9.50, emoji: "üçî" },
            { id: 2, nom: "McChicken Menu", prix: 8.90, emoji: "üçó" },
            { id: 3, nom: "Royal Deluxe Menu", prix: 10.50, emoji: "üëë" },
            { id: 4, nom: "Filet-O-Fish Menu", prix: 8.50, emoji: "üêü" },
            { id: 5, nom: "McFlurry", prix: 3.50, emoji: "üç¶" },
            { id: 6, nom: "Happy Meal", prix: 4.50, emoji: "üéÅ" }
        ];

        // INIT
        window.onload = function() {
            afficherProduitsBoutique();
            updateSoldes();
        };

        function afficherProduitsBoutique() {
            const grid = document.getElementById('boutique-grid');
            grid.innerHTML = produitsBoutique.map(p => `
                <div class="product-card" onclick="toggleProduit(${p.id})" id="product-${p.id}">
                    <div class="product-img">${p.emoji}</div>
                    <div class="product-name">${p.nom}</div>
                    <div class="product-price">${p.prix.toFixed(2)} ‚Ç¨</div>
                </div>
            `).join('');
        }

        function toggleProduit(id) {
            const produit = produitsBoutique.find(p => p.id === id);
            const index = state.produitsSelectionnes.findIndex(p => p.id === id);
            
            if (index > -1) {
                state.produitsSelectionnes.splice(index, 1);
                document.getElementById(`product-${id}`).classList.remove('selected');
            } else {
                state.produitsSelectionnes.push(produit);
                document.getElementById(`product-${id}`).classList.add('selected');
            }
            
            updatePanier();
        }

        function updatePanier() {
            const total = state.produitsSelectionnes.reduce((sum, p) => sum + p.prix, 0);
            document.getElementById('nbProduits').textContent = state.produitsSelectionnes.length;
            document.getElementById('totalBoutique').textContent = total.toFixed(2) + ' ‚Ç¨';
        }

        function updateSoldes() {
            const total = state.wallet + state.carte + state.cashback;
            
            // Mise √† jour section Paiement
            document.getElementById('soldeTotal').textContent = total.toFixed(2) + ' ‚Ç¨';
            document.getElementById('soldeWallet').textContent = state.wallet.toFixed(2);
            document.getElementById('soldeCarte').textContent = state.carte.toFixed(2);
            document.getElementById('cashback').textContent = state.cashback.toFixed(2);
            
            // Mise √† jour section Accueil (synchronisation)
            const accueilTotal = document.getElementById('soldeTotal-accueil');
            const accueilWallet = document.getElementById('soldeWallet-accueil');
            const accueilCarte = document.getElementById('soldeCarte-accueil');
            const accueilCashback = document.getElementById('cashback-accueil');
            
            if (accueilTotal) accueilTotal.textContent = total.toFixed(2) + ' ‚Ç¨';
            if (accueilWallet) accueilWallet.textContent = state.wallet.toFixed(2);
            if (accueilCarte) accueilCarte.textContent = state.carte.toFixed(2);
            if (accueilCashback) accueilCashback.textContent = state.cashback.toFixed(2);
        }

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.target.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function seDeconnecter() {
            if (confirm('üö™ Voulez-vous vraiment vous d√©connecter ?')) {
                window.location.href = 'accueil-clubs.html';
            }
        }

        // VOIR TICKET DE TRANSACTION (CLIQUABLE)
        function voirTicket(merchant, date, txId, amount, cashback) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            const amountColor = amount > 0 ? '#90EE90' : '#ff6b6b';
            const amountSign = amount > 0 ? '+' : '';
            
            title.innerHTML = 'üßæ Ticket de Transaction';
            body.innerHTML = `
                <div style="background: white; color: #333; padding: 20px; border-radius: 10px; max-width: 400px; margin: 0 auto; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
                    <div style="text-align: center; border-bottom: 2px dashed #ccc; padding-bottom: 15px; margin-bottom: 15px;">
                        <div style="font-size: 20px; font-weight: bold; color: #1e3c72; margin-bottom: 5px;">PAIECASH</div>
                        <div style="font-size: 14px; color: #666;">üîµ‚ö™üî¥ Paris FC</div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: #999; margin-bottom: 3px;">MARCHAND</div>
                        <div style="font-size: 18px; font-weight: bold; color: #333;">${merchant}</div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: #999; margin-bottom: 3px;">DATE & HEURE</div>
                        <div style="font-size: 14px; color: #333;">${date}</div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: #999; margin-bottom: 3px;">ID TRANSACTION</div>
                        <div style="font-size: 14px; color: #333; font-family: monospace;">${txId}</div>
                    </div>
                    
                    <div style="border-top: 2px dashed #ccc; padding-top: 15px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 16px; font-weight: bold; color: #333;">MONTANT</div>
                            <div style="font-size: 24px; font-weight: bold; color: ${amountColor};">${amountSign}${amount.toFixed(2)} EUR</div>
                        </div>
                        ${cashback > 0 ? `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding: 10px; background: #f0f8ff; border-radius: 5px;">
                            <div style="font-size: 14px; color: #1e3c72;">‚ú® Cashback re√ßu</div>
                            <div style="font-size: 16px; font-weight: bold; color: #1e3c72;">+${cashback.toFixed(2)} EUR</div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <button class="btn btn-secondary" onclick="alert('üì• Fonctionnalit√© \'T√©l√©charger PDF\' en d√©veloppement')" style="width: 100%; background: #1e3c72; color: white;">üì• T√©l√©charger PDF</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // RECHARGER WALLET
        function rechargerWallet() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí∞ Recharger Wallet';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Solde actuel: <strong>${state.wallet.toFixed(2)} ‚Ç¨</strong></p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
                        <button class="btn" onclick="confirmerRecharge(20)">20 ‚Ç¨</button>
                        <button class="btn" onclick="confirmerRecharge(50)">50 ‚Ç¨</button>
                        <button class="btn" onclick="confirmerRecharge(100)">100 ‚Ç¨</button>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function confirmerRecharge(montant) {
            state.wallet += montant;
            updateSoldes();
            alert(`‚úÖ Rechargement de ${montant} ‚Ç¨ effectu√© !\n\nNouveau solde Wallet : ${state.wallet.toFixed(2)} ‚Ç¨`);
            closeModal();
        }

        // RETIRER VERS CARTE
        function retirerVersCarte() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí∏ Retirer vers Carte';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Solde Wallet: <strong>${state.wallet.toFixed(2)} ‚Ç¨</strong></p>
                    <input type="number" id="montantRetrait" placeholder="Montant" max="${state.wallet}" style="width: 100%; padding: 15px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; margin-bottom: 15px;">
                    <button class="btn" onclick="confirmerRetrait()">‚úÖ Retirer</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function confirmerRetrait() {
            const montant = parseFloat(document.getElementById('montantRetrait').value);
            if (montant > 0 && montant <= state.wallet) {
                state.wallet -= montant;
                state.carte += montant;
                updateSoldes();
                alert(`‚úÖ Retrait de ${montant} ‚Ç¨ effectu√© !\n\nNouveau solde Wallet : ${state.wallet.toFixed(2)} ‚Ç¨\nNouveau solde Carte : ${state.carte.toFixed(2)} ‚Ç¨`);
                closeModal();
            } else {
                alert('‚ùå Montant invalide');
            }
        }

        // CONVERTIR CRYPTO
        function convertirCrypto() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üîÑ Convertir Crypto';
            body.innerHTML = `
                <div>
                    <select id="cryptoSource" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;">
                        <option value="usdc-${state.usdc}">USDC (${state.usdc} $)</option>
                        <option value="omcoin-${state.omcoin}">OM Coin (${state.omcoin} OMC)</option>
                    </select>
                    <div style="text-align: center; margin: 10px 0; font-size: 24px;">‚¨áÔ∏è</div>
                    <select id="cryptoCible" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;">
                        <option value="eur">Euro (EUR)</option>
                        <option value="usdc">USDC</option>
                        <option value="omcoin">OM Coin</option>
                    </select>
                    <input type="number" id="montantConversion" placeholder="Montant" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;">
                    <button class="btn" onclick="executerConversion()">‚úÖ Convertir</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function executerConversion() {
            const source = document.getElementById('cryptoSource').value;
            const cible = document.getElementById('cryptoCible').value;
            const montant = parseFloat(document.getElementById('montantConversion').value);
            
            if (montant > 0) {
                // Simulation conversion
                if (cible === 'eur') {
                    state.wallet += montant * 0.95; // Taux de change simul√©
                }
                updateSoldes();
                alert(`‚úÖ Conversion effectu√©e !\n\n${montant} ${source.split('-')[0].toUpperCase()} ‚Üí EUR\n\nNouveau solde Wallet : ${state.wallet.toFixed(2)} ‚Ç¨`);
                closeModal();
            } else {
                alert('‚ùå Montant invalide');
            }
        }

        // AFFICHER QR CODE
        function afficherQRCode() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            const qrId = 'PAIECASH-OM-' + Math.random().toString(36).substr(2, 9).toUpperCase();

            title.textContent = 'üì≤ QR Code de Paiement';
            body.innerHTML = `
                <div style="text-align: center;">
                    <p style="margin-bottom: 20px;">Scannez ce QR Code pour payer</p>
                    <div class="qr-code">
                        <div class="qr-pattern">
                            <div class="qr-logo">PaieCash</div>
                        </div>
                        <div style="font-size: 11px; color: #1e293b; margin-top: 10px; text-align: center;">ID: ${qrId}</div>
                    </div>
                    <p style="margin-top: 20px; font-size: 13px; color: #64748b;">Valide 15 minutes</p>
                    <button class="btn" onclick="closeModal()" style="margin-top: 20px;">Fermer</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // VOIR PIN
        function voirPIN() {
            const pin = '1234';
            alert(`üîê Code PIN de votre carte :\n\n${pin}\n\n‚ö†Ô∏è Ne partagez jamais votre PIN`);
        }

        // G√âRER LIMITES
        function gererLimites() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = '‚öôÔ∏è G√©rer les Limites de Carte';
            body.innerHTML = `
                <div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px;">üí≥ Limite quotidienne de paiement:</label>
                        <input type="number" value="1000" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px;">üí∞ Limite quotidienne de retrait DAB:</label>
                        <input type="number" value="500" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                    </div>
                    <button class="btn">‚úÖ Enregistrer</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // CHOISIR PRODUIT CRYPTO
        function choisirProduitCrypto(crypto, solde, euroValue) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = `üíé Payer avec ${crypto}`;
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Solde: <strong>${solde} ${crypto}</strong> (‚âà ${euroValue} ‚Ç¨)</p>
                    <p style="margin-bottom: 15px;">Que voulez-vous acheter ?</p>
                    <button class="btn" onclick="showSection('boutique'); closeModal();">üõçÔ∏è Produits Boutique</button>
                    <button class="btn" onclick="showSection('abonnement'); closeModal();">üìÖ Abonnement</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // PAYER BOUTIQUE
        function payerBoutique() {
            if (state.produitsSelectionnes.length === 0) {
                alert('‚ùå Veuillez s√©lectionner au moins un produit');
                return;
            }

            const total = state.produitsSelectionnes.reduce((sum, p) => sum + p.prix, 0);
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí≥ Choisir le moyen de paiement';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Total: <strong>${total.toFixed(2)} ‚Ç¨</strong></p>
                    <button class="btn" onclick="payerAvecWallet(${total})">üí∞ Wallet (${state.wallet.toFixed(2)} ‚Ç¨)</button>
                    <button class="btn" onclick="payerAvecCarte(${total})">üí≥ Carte (${state.carte.toFixed(2)} ‚Ç¨)</button>
                    <button class="btn" onclick="payerAvecCrypto('USDC', ${total})">üíé USDC</button>
                    <button class="btn" onclick="payerAvecCrypto('OM Coin', ${total})">üíé OM Coin</button>
                    <button class="btn" onclick="payerModeTouriste(${total})">üåç Mode Touriste</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function payerAvecWallet(montant) {
            if (state.wallet >= montant) {
                state.wallet -= montant;
                const cashback = montant * 0.02;
                state.cashback += cashback;
                updateSoldes();
                alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec Wallet r√©ussi !\n\n+${cashback.toFixed(2)} ‚Ç¨ cashback ajout√©`);
                state.produitsSelectionnes = [];
                afficherProduitsBoutique();
                updatePanier();
                closeModal();
            } else {
                alert('‚ùå Solde insuffisant');
            }
        }

        function payerAvecCarte(montant) {
            if (state.carte >= montant) {
                state.carte -= montant;
                updateSoldes();
                alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec Carte r√©ussi !`);
                state.produitsSelectionnes = [];
                afficherProduitsBoutique();
                updatePanier();
                closeModal();
            } else {
                alert('‚ùå Solde insuffisant');
            }
        }

        function payerAvecCrypto(crypto, montant) {
            alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec ${crypto} effectu√© !\n\nTransaction blockchain confirm√©e.`);
            state.produitsSelectionnes = [];
            afficherProduitsBoutique();
            updatePanier();
            closeModal();
        }

        function payerModeTouriste(montant) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üåç Mode Touriste';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Total: <strong>${montant.toFixed(2)} ‚Ç¨</strong></p>
                    <button class="btn" onclick="payerAvecMethode('Alipay', ${montant})">üá®üá≥ Alipay</button>
                    <button class="btn" onclick="payerAvecMethode('WeChat Pay', ${montant})">üá®üá≥ WeChat Pay</button>
                    <button class="btn" onclick="payerAvecMethode('M-Pesa', ${montant})">üåç M-Pesa</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function payerAvecMethode(methode, montant) {
            alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec ${methode} effectu√© !`);
            state.produitsSelectionnes = [];
            afficherProduitsBoutique();
            updatePanier();
            closeModal();
        }

        // PAYER BOUTIQUE BNPL
        function payerBoutiqueBNPL() {
            if (state.produitsSelectionnes.length === 0) {
                alert('‚ùå Veuillez s√©lectionner au moins un produit');
                return;
            }

            const total = state.produitsSelectionnes.reduce((sum, p) => sum + p.prix, 0);
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí≥ BNPL - Payer Plus Tard';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Total: <strong>${total.toFixed(2)} ‚Ç¨</strong></p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                        <div onclick="selectBNPL(${total}, 3, 0)" style="background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold;">3x</div>
                            <div style="font-size: 11px; margin-top: 5px;">SANS FRAIS</div>
                            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">${(total / 3).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                        <div onclick="selectBNPL(${total}, 4, 0.015)" style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 15px; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold;">4x</div>
                            <div style="font-size: 11px; margin-top: 5px;">1.5% frais</div>
                            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">${((total * 1.015) / 4).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                        <div onclick="selectBNPL(${total}, 6, 0.025)" style="background: linear-gradient(135deg, #ef4444, #dc2626); padding: 15px; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold;">6x</div>
                            <div style="font-size: 11px; margin-top: 5px;">2.5% frais</div>
                            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">${((total * 1.025) / 6).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 15px;">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function selectBNPL(montant, fois, tauxFrais) {
            const frais = montant * tauxFrais;
            const total = montant + frais;
            const mensualite = total / fois;
            
            alert(`‚úÖ Paiement en ${fois}x accept√© !\n\nMontant: ${montant.toFixed(2)} ‚Ç¨\nFrais: ${frais.toFixed(2)} ‚Ç¨\nTotal: ${total.toFixed(2)} ‚Ç¨\nMensualit√©: ${mensualite.toFixed(2)} ‚Ç¨ √ó ${fois}`);
            state.produitsSelectionnes = [];
            afficherProduitsBoutique();
            updatePanier();
            closeModal();
        }

        // ACHETER ABONNEMENT
        function acheterAbonnement(nom, prix) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = `üìÖ ${nom}`;
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Prix: <strong>${prix.toFixed(2)} ‚Ç¨</strong></p>
                    <button class="btn" onclick="payerAbonnement('${nom}', ${prix}, 'Wallet')">üí∞ Payer avec Wallet</button>
                    <button class="btn" onclick="payerAbonnement('${nom}', ${prix}, 'Carte')">üí≥ Payer avec Carte</button>
                    <button class="btn" onclick="payerAbonnementBNPL('${nom}', ${prix})">üí≥ Payer en 3x/4x (BNPL)</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function payerAbonnement(nom, prix, moyen) {
            if (moyen === 'Wallet' && state.wallet >= prix) {
                state.wallet -= prix;
                updateSoldes();
                alert(`‚úÖ Abonnement "${nom}" activ√© !\n\nPaiement: ${prix.toFixed(2)} ‚Ç¨ avec Wallet\n\nVotre abonnement est actif imm√©diatement.`);
                closeModal();
            } else if (moyen === 'Carte' && state.carte >= prix) {
                state.carte -= prix;
                updateSoldes();
                alert(`‚úÖ Abonnement "${nom}" activ√© !\n\nPaiement: ${prix.toFixed(2)} ‚Ç¨ avec Carte\n\nVotre abonnement est actif imm√©diatement.`);
                closeModal();
            } else {
                alert('‚ùå Solde insuffisant');
            }
        }

        function payerAbonnementBNPL(nom, prix) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = `üí≥ ${nom} - BNPL`;
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Prix: <strong>${prix.toFixed(2)} ‚Ç¨</strong></p>
                    <div style="display: grid; gap: 10px;">
                        <div onclick="confirmerAbonnementBNPL('${nom}', ${prix}, 3)" style="background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 10px; cursor: pointer;">
                            <div style="font-weight: bold;">3x SANS FRAIS</div>
                            <div style="font-size: 20px; margin-top: 5px;">${(prix / 3).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                        <div onclick="confirmerAbonnementBNPL('${nom}', ${prix}, 4)" style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 15px; border-radius: 10px; cursor: pointer;">
                            <div style="font-weight: bold;">4x avec 1.5% frais</div>
                            <div style="font-size: 20px; margin-top: 5px;">${((prix * 1.015) / 4).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 15px;">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function confirmerAbonnementBNPL(nom, prix, fois) {
            alert(`‚úÖ Abonnement "${nom}" activ√© avec BNPL ${fois}x !\n\n‚ö†Ô∏è IMPORTANT:\nSi vous ne payez pas, votre abonnement sera bloqu√© et revendu √† un autre fan.\n\nMensualit√©: ${(prix / fois).toFixed(2)} ‚Ç¨`);
            closeModal();
        }

        // MENU PARTENAIRE
        function ouvrirMenuPartenaire(partenaire, cashbackPct) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            const menu = partenaire === "McDonald's" ? menuMcDonalds : [];
            let selection = [];
            let total = 0;

            title.textContent = `üçî Menu ${partenaire} (${cashbackPct}% cashback)`;
            body.innerHTML = `
                <div>
                    <div class="product-grid" id="menu-grid">
                        ${menu.map(item => `
                            <div class="product-card" onclick="toggleMenuItem(${item.id}, ${item.prix}, '${item.nom}')" id="menu-item-${item.id}">
                                <div class="product-img">${item.emoji}</div>
                                <div class="product-name">${item.nom}</div>
                                <div class="product-price">${item.prix.toFixed(2)} ‚Ç¨</div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.2); border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Total:</span>
                            <strong id="totalMenu" style="color: #4ade80; font-size: 20px;">0.00 ‚Ç¨</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>Cashback ${cashbackPct}%:</span>
                            <strong id="cashbackMenu" style="color: #4ade80;">0.00 ‚Ç¨</strong>
                        </div>
                    </div>
                    <button class="btn" onclick="payerMenuPartenaire('${partenaire}', ${cashbackPct})" style="margin-top: 15px;">üí≥ Payer en 1 Clic</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            
            window.menuSelection = [];
            window.partenaireCashback = cashbackPct;
            
            modal.classList.add('active');
        }

        function toggleMenuItem(id, prix, nom) {
            const element = document.getElementById(`menu-item-${id}`);
            const index = window.menuSelection.findIndex(item => item.id === id);
            
            if (index > -1) {
                window.menuSelection.splice(index, 1);
                element.classList.remove('selected');
            } else {
                window.menuSelection.push({ id, prix, nom });
                element.classList.add('selected');
            }
            
            const total = window.menuSelection.reduce((sum, item) => sum + item.prix, 0);
            const cashback = total * (window.partenaireCashback / 100);
            
            document.getElementById('totalMenu').textContent = total.toFixed(2) + ' ‚Ç¨';
            document.getElementById('cashbackMenu').textContent = cashback.toFixed(2) + ' ‚Ç¨';
        }

        function payerMenuPartenaire(partenaire, cashbackPct) {
            if (window.menuSelection.length === 0) {
                alert('‚ùå Veuillez s√©lectionner au moins un produit');
                return;
            }
            
            const total = window.menuSelection.reduce((sum, item) => sum + item.prix, 0);
            const cashback = total * (cashbackPct / 100);
            
            if (state.wallet >= total) {
                state.wallet -= total;
                state.cashback += cashback;
                updateSoldes();
                
                const produits = window.menuSelection.map(item => item.nom).join(', ');
                alert(`‚úÖ Paiement 1 Clic r√©ussi chez ${partenaire} !\n\nProduits: ${produits}\nTotal: ${total.toFixed(2)} ‚Ç¨\nCashback: +${cashback.toFixed(2)} ‚Ç¨\n\nLe cashback sera cr√©dit√© dans 24-48h`);
                closeModal();
            } else {
                alert('‚ùå Solde Wallet insuffisant');
            }
        }
    </script>
</body>
</html>
