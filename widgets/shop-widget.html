<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop PaieCash - Widget</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow-y: auto;
            height: 100vh;
        }

        .container {
            max-width: 100%;
            padding: 20px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .header-text h2 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-text p {
            font-size: 13px;
            opacity: 0.8;
        }

        .cart-badge {
            position: relative;
            width: 48px;
            height: 48px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cart-badge:hover {
            background: rgba(255,255,255,0.2);
        }

        .cart-count {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #ef4444;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .search-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 14px;
            outline: none;
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .categories {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            margin-bottom: 20px;
            padding-bottom: 8px;
        }

        .categories::-webkit-scrollbar {
            height: 4px;
        }

        .categories::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
            border-radius: 2px;
        }

        .categories::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
            border-radius: 2px;
        }

        .category-chip {
            background: rgba(255,255,255,0.1);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .category-chip:hover {
            background: rgba(255,255,255,0.15);
        }

        .category-chip.active {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .live-shopping-banner {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .live-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            background: #fff;
            color: #ef4444;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .live-content h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .live-content p {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 12px;
        }

        .live-btn {
            background: #fff;
            color: #ef4444;
            border: none;
            padding: 10px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .live-btn:hover {
            transform: scale(1.05);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .product-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .product-card:hover {
            transform: translateY(-4px);
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 12px 24px rgba(0,0,0,0.3);
        }

        .product-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            position: relative;
        }

        .discount-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: #ef4444;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .product-info {
            padding: 16px;
        }

        .product-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .product-price-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .product-price {
            font-size: 18px;
            font-weight: 700;
            color: #10b981;
        }

        .product-old-price {
            font-size: 14px;
            text-decoration: line-through;
            opacity: 0.5;
        }

        .add-cart-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .add-cart-btn:hover {
            transform: scale(1.02);
        }

        .cart-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: rgba(26, 26, 46, 0.98);
            backdrop-filter: blur(20px);
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }

        .cart-panel.open {
            right: 0;
        }

        .cart-header {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .cart-header h3 {
            font-size: 20px;
            font-weight: 700;
        }

        .close-cart {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
        }

        .cart-items {
            padding: 20px;
        }

        .cart-item {
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            display: flex;
            gap: 12px;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .cart-item-price {
            font-size: 16px;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 8px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .qty-btn {
            width: 28px;
            height: 28px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
        }

        .qty-value {
            font-size: 14px;
            font-weight: 600;
        }

        .cart-summary {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .summary-row.total {
            font-size: 18px;
            font-weight: 700;
            color: #10b981;
            padding-top: 12px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 16px;
        }

        .checkout-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
        }

        .empty-cart {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-cart-icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-cart p {
            font-size: 16px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="header-icon">üõçÔ∏è</div>
                <div class="header-text">
                    <h2>Boutique AS Monaco</h2>
                    <p>Produits officiels du club</p>
                </div>
            </div>
            <div class="cart-badge" onclick="toggleCart()">
                üõí
                <div class="cart-count" id="cart-count">3</div>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="search-bar">
            <span>üîç</span>
            <input type="text" class="search-input" placeholder="Rechercher un produit..." id="search-input">
        </div>

        <!-- Categories -->
        <div class="categories">
            <div class="category-chip active" onclick="filterCategory('all')">üî• Tout</div>
            <div class="category-chip" onclick="filterCategory('jerseys')">üëï Maillots</div>
            <div class="category-chip" onclick="filterCategory('accessories')">üß¢ Accessoires</div>
            <div class="category-chip" onclick="filterCategory('training')">üèÉ Entra√Ænement</div>
            <div class="category-chip" onclick="filterCategory('collection')">‚≠ê Collection</div>
            <div class="category-chip" onclick="filterCategory('nft')">üé® NFT</div>
        </div>

        <!-- Live Shopping Banner -->
        <div class="live-shopping-banner" onclick="joinLiveShopping()">
            <div class="live-badge">üî¥ LIVE</div>
            <div class="live-content">
                <h3>üé• Live Shopping en cours !</h3>
                <p>Rejoignez 2,347 fans ‚Ä¢ Offres exclusives -30%</p>
                <button class="live-btn">üöÄ Rejoindre Maintenant</button>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="products-grid">
            <!-- Product 1 -->
            <div class="product-card" onclick="viewProduct(1)">
                <div class="product-image">
                    <div class="discount-badge">-20%</div>
                    üëï
                </div>
                <div class="product-info">
                    <div class="product-title">Maillot Domicile 2025/26</div>
                    <div class="product-price-row">
                        <div>
                            <div class="product-price">79.99‚Ç¨</div>
                            <div class="product-old-price">99.99‚Ç¨</div>
                        </div>
                    </div>
                    <button class="add-cart-btn" onclick="addToCart(event, 1)">
                        <span>üõí</span> Ajouter
                    </button>
                </div>
            </div>

            <!-- Product 2 -->
            <div class="product-card" onclick="viewProduct(2)">
                <div class="product-image">
                    <div class="discount-badge">-15%</div>
                    üß¢
                </div>
                <div class="product-info">
                    <div class="product-title">Casquette Officielle</div>
                    <div class="product-price-row">
                        <div>
                            <div class="product-price">24.99‚Ç¨</div>
                            <div class="product-old-price">29.99‚Ç¨</div>
                        </div>
                    </div>
                    <button class="add-cart-btn" onclick="addToCart(event, 2)">
                        <span>üõí</span> Ajouter
                    </button>
                </div>
            </div>

            <!-- Product 3 -->
            <div class="product-card" onclick="viewProduct(3)">
                <div class="product-image">
                    üß•
                </div>
                <div class="product-info">
                    <div class="product-title">Veste d'Entra√Ænement</div>
                    <div class="product-price-row">
                        <div>
                            <div class="product-price">89.99‚Ç¨</div>
                        </div>
                    </div>
                    <button class="add-cart-btn" onclick="addToCart(event, 3)">
                        <span>üõí</span> Ajouter
                    </button>
                </div>
            </div>

            <!-- Product 4 -->
            <div class="product-card" onclick="viewProduct(4)">
                <div class="product-image">
                    <div class="discount-badge">-25%</div>
                    üß£
                </div>
                <div class="product-info">
                    <div class="product-title">√âcharpe Supporter</div>
                    <div class="product-price-row">
                        <div>
                            <div class="product-price">14.99‚Ç¨</div>
                            <div class="product-old-price">19.99‚Ç¨</div>
                        </div>
                    </div>
                    <button class="add-cart-btn" onclick="addToCart(event, 4)">
                        <span>üõí</span> Ajouter
                    </button>
                </div>
            </div>

            <!-- Product 5 NFT -->
            <div class="product-card" onclick="viewProduct(5)">
                <div class="product-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    üé®
                </div>
                <div class="product-info">
                    <div class="product-title">NFT √âdition Limit√©e</div>
                    <div class="product-price-row">
                        <div>
                            <div class="product-price">199.99‚Ç¨</div>
                        </div>
                    </div>
                    <button class="add-cart-btn" onclick="addToCart(event, 5)">
                        <span>üõí</span> Ajouter
                    </button>
                </div>
            </div>

            <!-- Product 6 -->
            <div class="product-card" onclick="viewProduct(6)">
                <div class="product-image">
                    ‚öΩ
                </div>
                <div class="product-info">
                    <div class="product-title">Ballon Officiel</div>
                    <div class="product-price-row">
                        <div>
                            <div class="product-price">39.99‚Ç¨</div>
                        </div>
                    </div>
                    <button class="add-cart-btn" onclick="addToCart(event, 6)">
                        <span>üõí</span> Ajouter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Panel -->
    <div class="cart-panel" id="cart-panel">
        <div class="cart-header">
            <h3>Mon Panier (3)</h3>
            <button class="close-cart" onclick="toggleCart()">‚úï</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Cart Item 1 -->
            <div class="cart-item">
                <div class="cart-item-image">üëï</div>
                <div class="cart-item-info">
                    <div class="cart-item-title">Maillot Domicile 2025/26</div>
                    <div class="cart-item-price">79.99‚Ç¨</div>
                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="updateQty(1, -1)">‚àí</button>
                        <span class="qty-value">1</span>
                        <button class="qty-btn" onclick="updateQty(1, 1)">+</button>
                    </div>
                </div>
            </div>

            <!-- Cart Item 2 -->
            <div class="cart-item">
                <div class="cart-item-image">üß¢</div>
                <div class="cart-item-info">
                    <div class="cart-item-title">Casquette Officielle</div>
                    <div class="cart-item-price">24.99‚Ç¨</div>
                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="updateQty(2, -1)">‚àí</button>
                        <span class="qty-value">2</span>
                        <button class="qty-btn" onclick="updateQty(2, 1)">+</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="cart-summary">
            <div class="summary-row">
                <span>Sous-total</span>
                <span>129.97‚Ç¨</span>
            </div>
            <div class="summary-row">
                <span>Livraison</span>
                <span>GRATUITE</span>
            </div>
            <div class="summary-row">
                <span>Cashback 5%</span>
                <span style="color: #10b981;">-6.50‚Ç¨</span>
            </div>
            <div class="summary-row total">
                <span>Total</span>
                <span>123.47‚Ç¨</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">
                üí≥ Payer Maintenant
            </button>
        </div>
    </div>

    <script>
        let cartCount = 3;

        // Toggle cart panel
        function toggleCart() {
            const panel = document.getElementById('cart-panel');
            panel.classList.toggle('open');
            sendToParent('CART_TOGGLED', { isOpen: panel.classList.contains('open') });
        }

        // Add to cart
        function addToCart(event, productId) {
            event.stopPropagation();
            cartCount++;
            document.getElementById('cart-count').textContent = cartCount;
            
            sendToParent('PRODUCT_ADDED_TO_CART', { 
                productId: productId,
                cartCount: cartCount,
                timestamp: Date.now()
            });

            // Animation
            event.target.innerHTML = '<span>‚úì</span> Ajout√©';
            setTimeout(() => {
                event.target.innerHTML = '<span>üõí</span> Ajouter';
            }, 2000);
        }

        // View product
        function viewProduct(productId) {
            sendToParent('PRODUCT_VIEWED', { productId: productId });
        }

        // Update quantity
        function updateQty(itemId, delta) {
            sendToParent('CART_QUANTITY_UPDATED', { 
                itemId: itemId, 
                delta: delta 
            });
        }

        // Checkout
        function checkout() {
            sendToParent('CHECKOUT_INITIATED', {
                total: 123.47,
                items: 3,
                timestamp: Date.now()
            });
        }

        // Filter category
        function filterCategory(category) {
            document.querySelectorAll('.category-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            event.target.classList.add('active');
            
            sendToParent('CATEGORY_FILTERED', { category: category });
        }

        // Join live shopping
        function joinLiveShopping() {
            sendToParent('LIVE_SHOPPING_JOINED', { 
                liveId: 'live-123',
                timestamp: Date.now()
            });
        }

        // Search
        document.getElementById('search-input').addEventListener('input', (e) => {
            sendToParent('SEARCH_QUERY', { query: e.target.value });
        });

        // Communication avec parent
        function sendToParent(type, data) {
            window.parent.postMessage({
                type: type,
                data: data
            }, '*');
        }

        // √âcouter les messages du parent
        window.addEventListener('message', (event) => {
            const { type, data } = event.data;
            
            if (type === 'UPDATE_CART') {
                console.log('Mise √† jour panier:', data);
            }
            
            if (type === 'APPLY_DISCOUNT') {
                console.log('Appliquer r√©duction:', data);
            }

            if (type === 'REFRESH_PRODUCTS') {
                console.log('Rafra√Æchir produits');
            }
        });

        // Envoyer un message de pr√™t
        sendToParent('SHOP_WIDGET_READY', { 
            version: '1.0.0',
            cartCount: cartCount,
            clubName: 'AS Monaco'
        });
    </script>
</body>
</html>
