<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé§ Voice AI - PaieCashFan (Multilingue)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .lang-btn {
            padding: 8px 15px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: white;
            color: #667eea;
        }

        .lang-btn:hover {
            transform: scale(1.05);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #f5f7fa;
        }

        .message {
            margin-bottom: 20px;
            padding: 15px 20px;
            border-radius: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
        }

        .message.assistant {
            background: white;
            color: #333;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .message.assistant .speaker-icon {
            float: right;
            margin-left: 10px;
            cursor: pointer;
            color: #667eea;
            font-size: 1.2em;
        }

        .message.assistant .speaker-icon:hover {
            transform: scale(1.2);
        }

        .voice-controls {
            padding: 20px 30px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .mic-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .mic-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .mic-button.listening {
            animation: pulse 1.5s infinite;
            background: #ff4444;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .send-button {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .typing-indicator {
            display: none;
            padding: 15px 20px;
            background: white;
            border-radius: 15px;
            max-width: 80px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .typing-indicator.show {
            display: block;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .quick-questions {
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 8px 15px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
        }

        .voice-status {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: none;
        }

        .voice-status.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>üé§ Voice AI Assistant</h1>
                <p style="font-size: 0.9em; opacity: 0.9;">Parlez ou √©crivez dans votre langue</p>
            </div>
            <div class="language-selector">
                <button class="lang-btn active" onclick="changeLanguage('fr')" data-lang="fr">
                    üá´üá∑ FR
                </button>
                <button class="lang-btn" onclick="changeLanguage('en')" data-lang="en">
                    üá¨üáß EN
                </button>
                <button class="lang-btn" onclick="changeLanguage('es')" data-lang="es">
                    üá™üá∏ ES
                </button>
                <button class="lang-btn" onclick="changeLanguage('de')" data-lang="de">
                    üá©üá™ DE
                </button>
                <button class="lang-btn" onclick="changeLanguage('it')" data-lang="it">
                    üáÆüáπ IT
                </button>
                <button class="lang-btn" onclick="changeLanguage('ar')" data-lang="ar">
                    üá∏üá¶ AR
                </button>
                <button class="lang-btn" onclick="changeLanguage('zh')" data-lang="zh">
                    üá®üá≥ ZH
                </button>
            </div>
        </div>

        <div class="quick-questions" id="quickQuestions">
            <!-- Questions rapides en fonction de la langue -->
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message assistant">
                <span id="welcomeMessage"></span>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <div class="voice-controls">
            <button class="mic-button" id="micBtn" onclick="toggleVoice()" title="Commande vocale">
                <i class="fas fa-microphone"></i>
            </button>
            <input 
                type="text" 
                id="chatInput" 
                placeholder="Tapez votre message..." 
                onkeypress="if(event.key==='Enter') sendMessage()"
            >
            <button class="send-button" onclick="sendMessage()" id="sendBtn">
                Envoyer
            </button>
        </div>
    </div>

    <div class="voice-status" id="voiceStatus">
        <i class="fas fa-microphone"></i>
        <span id="voiceText">√âcoute en cours...</span>
    </div>

    <script>
        // Traductions multilingues
        const translations = {
            fr: {
                welcome: "üëã Bonjour ! Je suis votre assistant IA multilingue. Comment puis-je vous aider aujourd'hui ?",
                placeholder: "Tapez votre message...",
                sendButton: "Envoyer",
                listening: "√âcoute en cours...",
                quickQuestions: [
                    "Quels sont les matchs aujourd'hui ?",
                    "Comment acheter un billet NFT ?",
                    "Montrez-moi les maillots disponibles",
                    "Comment connecter mon wallet ?"
                ]
            },
            en: {
                welcome: "üëã Hello! I'm your multilingual AI assistant. How can I help you today?",
                placeholder: "Type your message...",
                sendButton: "Send",
                listening: "Listening...",
                quickQuestions: [
                    "What matches are today?",
                    "How to buy an NFT ticket?",
                    "Show me available jerseys",
                    "How to connect my wallet?"
                ]
            },
            es: {
                welcome: "üëã ¬°Hola! Soy tu asistente IA multiling√ºe. ¬øC√≥mo puedo ayudarte hoy?",
                placeholder: "Escribe tu mensaje...",
                sendButton: "Enviar",
                listening: "Escuchando...",
                quickQuestions: [
                    "¬øQu√© partidos hay hoy?",
                    "¬øC√≥mo comprar un billete NFT?",
                    "Mu√©strame las camisetas disponibles",
                    "¬øC√≥mo conectar mi wallet?"
                ]
            },
            de: {
                welcome: "üëã Hallo! Ich bin Ihr mehrsprachiger KI-Assistent. Wie kann ich Ihnen heute helfen?",
                placeholder: "Geben Sie Ihre Nachricht ein...",
                sendButton: "Senden",
                listening: "H√∂rt zu...",
                quickQuestions: [
                    "Welche Spiele sind heute?",
                    "Wie kaufe ich ein NFT-Ticket?",
                    "Zeigen Sie mir verf√ºgbare Trikots",
                    "Wie verbinde ich mein Wallet?"
                ]
            },
            it: {
                welcome: "üëã Ciao! Sono il tuo assistente IA multilingue. Come posso aiutarti oggi?",
                placeholder: "Digita il tuo messaggio...",
                sendButton: "Invia",
                listening: "In ascolto...",
                quickQuestions: [
                    "Quali partite ci sono oggi?",
                    "Come acquistare un biglietto NFT?",
                    "Mostrami le maglie disponibili",
                    "Come collegare il mio wallet?"
                ]
            },
            ar: {
                welcome: "üëã ŸÖÿ±ÿ≠ÿ®ÿß! ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ ÿßŸÑÿ∞ŸÉŸä ŸÖÿ™ÿπÿØÿØ ÿßŸÑŸÑÿ∫ÿßÿ™. ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü",
                placeholder: "ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...",
                sendButton: "ÿ•ÿ±ÿ≥ÿßŸÑ",
                listening: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ...",
                quickQuestions: [
                    "ŸÖÿß ŸáŸä ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑŸäŸàŸÖÿü",
                    "ŸÉŸäŸÅ ÿ£ÿ¥ÿ™ÿ±Ÿä ÿ™ÿ∞ŸÉÿ±ÿ© NFTÿü",
                    "ÿ£ÿ±ŸÜŸä ÿßŸÑŸÇŸÖÿµÿßŸÜ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©",
                    "ŸÉŸäŸÅ ÿ£ŸàÿµŸÑ ŸÖÿ≠ŸÅÿ∏ÿ™Ÿäÿü"
                ]
            },
            zh: {
                welcome: "üëã ‰Ω†Â•ΩÔºÅÊàëÊòØÊÇ®ÁöÑÂ§öËØ≠Ë®ÄAIÂä©Êâã„ÄÇ‰ªäÂ§©ÊàëËÉΩÂ∏ÆÊÇ®‰ªÄ‰πàÔºü",
                placeholder: "ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...",
                sendButton: "ÂèëÈÄÅ",
                listening: "Ê≠£Âú®Âê¨...",
                quickQuestions: [
                    "‰ªäÂ§©ÊúâÂì™‰∫õÊØîËµõÔºü",
                    "Â¶Ç‰ΩïË¥≠‰π∞NFTÈó®Á•®Ôºü",
                    "ÁªôÊàëÁúãÁúãÂèØÁî®ÁöÑÁêÉË°£",
                    "Â¶Ç‰ΩïËøûÊé•ÊàëÁöÑÈí±ÂåÖÔºü"
                ]
            }
        };

        let currentLanguage = 'fr';
        let recognition = null;
        let isListening = false;
        let synthesis = window.speechSynthesis;

        // Initialiser la reconnaissance vocale
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('chatInput').value = transcript;
                stopListening();
                sendMessage();
            };

            recognition.onerror = function(event) {
                console.error('Erreur reconnaissance vocale:', event.error);
                stopListening();
            };

            recognition.onend = function() {
                stopListening();
            };
        }

        // Changer de langue
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // Mettre √† jour les boutons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            // Mettre √† jour l'interface
            updateInterface();
            
            // Mettre √† jour la langue de reconnaissance vocale
            if (recognition) {
                const langCodes = {
                    fr: 'fr-FR',
                    en: 'en-US',
                    es: 'es-ES',
                    de: 'de-DE',
                    it: 'it-IT',
                    ar: 'ar-SA',
                    zh: 'zh-CN'
                };
                recognition.lang = langCodes[lang];
            }
        }

        // Mettre √† jour l'interface
        function updateInterface() {
            const t = translations[currentLanguage];
            
            // Message de bienvenue
            document.getElementById('welcomeMessage').textContent = t.welcome;
            
            // Placeholder
            document.getElementById('chatInput').placeholder = t.placeholder;
            
            // Bouton envoyer
            document.getElementById('sendBtn').textContent = t.sendButton;
            
            // Questions rapides
            const quickQuestionsDiv = document.getElementById('quickQuestions');
            quickQuestionsDiv.innerHTML = '';
            t.quickQuestions.forEach(question => {
                const btn = document.createElement('button');
                btn.className = 'quick-btn';
                btn.textContent = question;
                btn.onclick = () => sendQuickQuestion(question);
                quickQuestionsDiv.appendChild(btn);
            });
        }

        // Toggle reconnaissance vocale
        function toggleVoice() {
            if (!recognition) {
                alert('La reconnaissance vocale n\'est pas support√©e par votre navigateur.');
                return;
            }

            if (isListening) {
                stopListening();
            } else {
                startListening();
            }
        }

        function startListening() {
            isListening = true;
            recognition.start();
            document.getElementById('micBtn').classList.add('listening');
            document.getElementById('voiceStatus').classList.add('show');
            document.getElementById('voiceText').textContent = translations[currentLanguage].listening;
        }

        function stopListening() {
            isListening = false;
            if (recognition) {
                recognition.stop();
            }
            document.getElementById('micBtn').classList.remove('listening');
            document.getElementById('voiceStatus').classList.remove('show');
        }

        // Envoyer un message
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Afficher le message utilisateur
            addMessage(message, 'user');
            input.value = '';
            
            // Afficher l'indicateur de saisie
            document.getElementById('typingIndicator').classList.add('show');
            
            // Simuler une r√©ponse (remplacer par vraie API IA)
            setTimeout(() => {
                const response = getAIResponse(message);
                document.getElementById('typingIndicator').classList.remove('show');
                addMessage(response, 'assistant');
                
                // Lire la r√©ponse vocalement
                speak(response);
            }, 1500);
        }

        // Ajouter un message au chat
        function addMessage(text, sender) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            if (sender === 'assistant') {
                const speakerIcon = document.createElement('span');
                speakerIcon.className = 'speaker-icon';
                speakerIcon.innerHTML = '<i class="fas fa-volume-up"></i>';
                speakerIcon.onclick = () => speak(text);
                messageDiv.appendChild(speakerIcon);
            }
            
            const textNode = document.createTextNode(text);
            messageDiv.appendChild(textNode);
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // Envoyer une question rapide
        function sendQuickQuestion(question) {
            document.getElementById('chatInput').value = question;
            sendMessage();
        }

        // Obtenir une r√©ponse IA (√† remplacer par vraie API)
        function getAIResponse(message) {
            const responses = {
                fr: {
                    matchs: "üèüÔ∏è Aujourd'hui : OM vs PSG √† 21h, Lyon vs Marseille √† 19h. Voulez-vous acheter des billets NFT ?",
                    billet: "üé´ Pour acheter un billet NFT, allez dans la section 'Billetterie', choisissez votre match et votre place. Paiement par SMS, Crypto ou Carte.",
                    maillot: "üëï Nous avons des maillots domicile et ext√©rieur disponibles de 71.99‚Ç¨ √† 89.99‚Ç¨. -20% de r√©duction en ce moment !",
                    wallet: "üí∞ Pour connecter votre wallet : cliquez sur 'Wallet' puis 'Connecter'. Choisissez MetaMask ou WalletConnect.",
                    default: "Je suis l√† pour vous aider avec PaieCashFan ! Billets NFT, boutique, wallet, donn√©es en temps r√©el... Que voulez-vous savoir ?"
                },
                en: {
                    matchs: "üèüÔ∏è Today: OM vs PSG at 9pm, Lyon vs Marseille at 7pm. Would you like to buy NFT tickets?",
                    billet: "üé´ To buy an NFT ticket, go to 'Ticketing', choose your match and seat. Payment by SMS, Crypto or Card.",
                    maillot: "üëï We have home and away jerseys available from ‚Ç¨71.99 to ‚Ç¨89.99. -20% discount now!",
                    wallet: "üí∞ To connect your wallet: click 'Wallet' then 'Connect'. Choose MetaMask or WalletConnect.",
                    default: "I'm here to help with PaieCashFan! NFT tickets, shop, wallet, real-time data... What would you like to know?"
                },
                es: {
                    matchs: "üèüÔ∏è Hoy: OM vs PSG a las 21h, Lyon vs Marseille a las 19h. ¬øQuieres comprar entradas NFT?",
                    billet: "üé´ Para comprar una entrada NFT, ve a 'Billetes', elige tu partido y asiento. Pago por SMS, Crypto o Tarjeta.",
                    maillot: "üëï Tenemos camisetas disponibles desde 71.99‚Ç¨ hasta 89.99‚Ç¨. ¬°-20% de descuento ahora!",
                    wallet: "üí∞ Para conectar tu wallet: haz clic en 'Wallet' y luego 'Conectar'. Elige MetaMask o WalletConnect.",
                    default: "¬°Estoy aqu√≠ para ayudarte con PaieCashFan! Entradas NFT, tienda, wallet, datos en tiempo real... ¬øQu√© quieres saber?"
                }
            };

            const langResponses = responses[currentLanguage] || responses.fr;
            const lower = message.toLowerCase();
            
            if (lower.includes('match') || lower.includes('partido') || lower.includes('spiel')) {
                return langResponses.matchs;
            } else if (lower.includes('billet') || lower.includes('ticket') || lower.includes('entrada')) {
                return langResponses.billet;
            } else if (lower.includes('maillot') || lower.includes('jersey') || lower.includes('camiseta')) {
                return langResponses.maillot;
            } else if (lower.includes('wallet') || lower.includes('portefeuille') || lower.includes('billetera')) {
                return langResponses.wallet;
            }
            
            return langResponses.default;
        }

        // Synth√®se vocale
        function speak(text) {
            if (!synthesis) return;
            
            // Annuler la lecture en cours
            synthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            // D√©finir la langue en fonction de la langue actuelle
            const langCodes = {
                fr: 'fr-FR',
                en: 'en-US',
                es: 'es-ES',
                de: 'de-DE',
                it: 'it-IT',
                ar: 'ar-SA',
                zh: 'zh-CN'
            };
            
            utterance.lang = langCodes[currentLanguage];
            utterance.rate = 1.0;
            utterance.pitch = 1.0;
            
            synthesis.speak(utterance);
        }

        // Initialiser au chargement
        window.addEventListener('DOMContentLoaded', function() {
            updateInterface();
            console.log('üé§ Voice AI Multilingue charg√© !');
            console.log('üåç Langues support√©es: FR, EN, ES, DE, IT, AR, ZH');
        });
    </script>
</body>
</html>