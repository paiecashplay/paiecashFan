<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemple Int√©gration PaieCashFan SDK</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Charger SDK PaieCashFan -->
    <script src="../sdk/paiecashfan-sdk.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%);
            color: #fff;
            padding: 40px 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #10b981 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-align: center;
        }
        .subtitle {
            text-align: center;
            color: #94a3b8;
            margin-bottom: 50px;
            font-size: 1.2rem;
        }
        .widgets {
            display: grid;
            gap: 30px;
        }
        .widget-section {
            background: rgba(26, 31, 46, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            padding: 30px;
        }
        .widget-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #8b5cf6;
            margin-bottom: 20px;
        }
        .widget-container {
            min-height: 400px;
        }
        .code-block {
            background: #0a0e1a;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto;
        }
        .code-block code {
            color: #10b981;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #10b981 0%, #8b5cf6 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4);
        }
        .log {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }
        .log-entry {
            margin-bottom: 5px;
            color: #10b981;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Exemple Int√©gration PaieCashFan SDK</h1>
        <p class="subtitle">Int√©grez facilement Wallet, eSIM et Shop en quelques lignes de code</p>

        <!-- Widget Wallet -->
        <div class="widget-section">
            <div class="widget-title">üí≥ Widget Wallet</div>
            <div class="widget-container" id="wallet-container"></div>
            
            <div class="controls">
                <button class="btn" onclick="refreshWallet()">üîÑ Refresh</button>
                <button class="btn" onclick="updateBalance()">üí∞ Update Balance (+10‚Ç¨)</button>
                <button class="btn" onclick="destroyWallet()">‚ùå Destroy</button>
            </div>

            <div class="code-block">
                <code>
// Initialiser Widget Wallet<br>
const wallet = PaieCashFan.Wallet.init({<br>
&nbsp;&nbsp;container: '#wallet-container',<br>
&nbsp;&nbsp;userId: '123',<br>
&nbsp;&nbsp;theme: 'dark',<br>
&nbsp;&nbsp;onReady: (data) => console.log('Ready:', data),<br>
&nbsp;&nbsp;onTransaction: (tx) => console.log('Transaction:', tx)<br>
});
                </code>
            </div>

            <div class="log" id="wallet-log"></div>
        </div>

        <!-- Widget eSIM -->
        <div class="widget-section">
            <div class="widget-title">üì± Widget eSIM</div>
            <div class="widget-container" id="esim-container"></div>
            
            <div class="controls">
                <button class="btn" onclick="activateESIM()">‚úÖ Activer eSIM</button>
                <button class="btn" onclick="destroyESIM()">‚ùå Destroy</button>
            </div>

            <div class="code-block">
                <code>
// Initialiser Widget eSIM<br>
const esim = PaieCashFan.eSIM.init({<br>
&nbsp;&nbsp;container: '#esim-container',<br>
&nbsp;&nbsp;userId: '123',<br>
&nbsp;&nbsp;onActivation: (data) => console.log('eSIM activ√©:', data)<br>
});
                </code>
            </div>

            <div class="log" id="esim-log"></div>
        </div>

        <!-- Widget Shop -->
        <div class="widget-section">
            <div class="widget-title">üõçÔ∏è Widget Shop</div>
            <div class="widget-container" id="shop-container"></div>
            
            <div class="controls">
                <button class="btn" onclick="changeClub('AS Monaco')">‚öΩ AS Monaco</button>
                <button class="btn" onclick="changeClub('Paris Saint-Germain')">üî¥üîµ PSG</button>
                <button class="btn" onclick="changeClub('Olympique Marseille')">üîµ‚ö™ OM</button>
                <button class="btn" onclick="destroyShop()">‚ùå Destroy</button>
            </div>

            <div class="code-block">
                <code>
// Initialiser Widget Shop<br>
const shop = PaieCashFan.Shop.init({<br>
&nbsp;&nbsp;container: '#shop-container',<br>
&nbsp;&nbsp;club: 'AS Monaco',<br>
&nbsp;&nbsp;onPurchase: (order) => console.log('Achat:', order)<br>
});
                </code>
            </div>

            <div class="log" id="shop-log"></div>
        </div>
    </div>

    <script>
        // Configuration SDK
        PaieCashFan.config({
            debug: true,
            widgetBaseUrl: '../widgets',
            apiBaseUrl: 'https://api.paiecashfan.com'
        });

        // Variables globales
        let walletInstance = null;
        let esimInstance = null;
        let shopInstance = null;
        let currentBalance = 1247.50;

        // Fonctions de log
        function logToContainer(containerId, message) {
            const logEl = document.getElementById(containerId);
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logEl.insertBefore(entry, logEl.firstChild);
            
            // Garder max 10 entries
            while (logEl.children.length > 10) {
                logEl.removeChild(logEl.lastChild);
            }
        }

        // Initialiser Wallet
        walletInstance = PaieCashFan.Wallet.init({
            container: '#wallet-container',
            userId: '123',
            theme: 'dark',
            height: '600px',
            onReady: (data) => {
                logToContainer('wallet-log', '‚úÖ Wallet ready: ' + JSON.stringify(data));
            },
            onTransaction: (tx) => {
                logToContainer('wallet-log', 'üí∞ Transaction: ' + JSON.stringify(tx));
            },
            onError: (error) => {
                logToContainer('wallet-log', '‚ùå Error: ' + error);
            }
        });

        // Fonctions Wallet
        function refreshWallet() {
            if (walletInstance) {
                walletInstance.refresh();
                logToContainer('wallet-log', 'üîÑ Refresh demand√©');
            }
        }

        function updateBalance() {
            if (walletInstance) {
                currentBalance += 10;
                walletInstance.updateBalance(currentBalance);
                logToContainer('wallet-log', `üí∞ Balance mise √† jour: ${currentBalance}‚Ç¨`);
            }
        }

        function destroyWallet() {
            if (walletInstance) {
                walletInstance.destroy();
                walletInstance = null;
                logToContainer('wallet-log', '‚ùå Widget d√©truit');
            }
        }

        // Initialiser eSIM (comment√© par d√©faut pour all√©ger la page)
        /*
        esimInstance = PaieCashFan.eSIM.init({
            container: '#esim-container',
            userId: '123',
            height: '400px',
            onActivation: (data) => {
                logToContainer('esim-log', '‚úÖ eSIM activ√©: ' + JSON.stringify(data));
            }
        });
        */

        function activateESIM() {
            if (!esimInstance) {
                esimInstance = PaieCashFan.eSIM.init({
                    container: '#esim-container',
                    userId: '123',
                    height: '400px',
                    onActivation: (data) => {
                        logToContainer('esim-log', '‚úÖ eSIM activ√©: ' + JSON.stringify(data));
                    }
                });
                logToContainer('esim-log', 'üöÄ Widget eSIM initialis√©');
            } else {
                logToContainer('esim-log', '‚ÑπÔ∏è Widget d√©j√† initialis√©');
            }
        }

        function destroyESIM() {
            if (esimInstance) {
                esimInstance.destroy();
                esimInstance = null;
                logToContainer('esim-log', '‚ùå Widget d√©truit');
            }
        }

        // Initialiser Shop (comment√© par d√©faut pour all√©ger la page)
        /*
        shopInstance = PaieCashFan.Shop.init({
            container: '#shop-container',
            club: 'AS Monaco',
            height: '800px',
            onPurchase: (order) => {
                logToContainer('shop-log', 'üõí Achat: ' + JSON.stringify(order));
            }
        });
        */

        function changeClub(club) {
            if (shopInstance) {
                shopInstance.destroy();
            }
            
            shopInstance = PaieCashFan.Shop.init({
                container: '#shop-container',
                club: club,
                height: '800px',
                onPurchase: (order) => {
                    logToContainer('shop-log', 'üõí Achat: ' + JSON.stringify(order));
                }
            });
            logToContainer('shop-log', `üè™ Boutique ${club} charg√©e`);
        }

        function destroyShop() {
            if (shopInstance) {
                shopInstance.destroy();
                shopInstance = null;
                logToContainer('shop-log', '‚ùå Widget d√©truit');
            }
        }
    </script>
</body>
</html>
