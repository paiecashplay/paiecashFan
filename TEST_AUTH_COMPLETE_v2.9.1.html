<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ TEST AUTHENTIFICATION v2.9.1</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #0e9cda 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            color: #0e9cda;
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
        }
        
        .test-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .test-section h2 {
            color: #333;
            font-size: 24px;
            margin-bottom: 20px;
            border-bottom: 3px solid #0e9cda;
            padding-bottom: 10px;
        }
        
        .test-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #0e9cda;
        }
        
        .test-item h3 {
            color: #0e9cda;
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .test-item p {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .test-item code {
            background: #e9ecef;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 13px;
            color: #d63384;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #0e9cda 0%, #0c7db3 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(14, 156, 218, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(14, 156, 218, 0.4);
        }
        
        .btn-google {
            background: white;
            color: #333;
            border: 2px solid #e0e0e0;
        }
        
        .btn-facebook {
            background: #1877f2;
            color: white;
        }
        
        .btn-apple {
            background: #000;
            color: white;
        }
        
        .btn-reset {
            background: #dc3545;
            color: white;
        }
        
        .status-box {
            background: #d1ecf1;
            border: 2px solid #0e9cda;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .status-box h4 {
            color: #0e9cda;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .status-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .status-box li {
            padding: 8px 0;
            color: #333;
            font-size: 14px;
        }
        
        .status-box li:before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .alert-info {
            background: #d1ecf1;
            border: 2px solid #0e9cda;
            color: #0c5460;
        }
        
        .alert-success {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ TEST AUTHENTIFICATION COMPL√àTE</h1>
            <p>Version 2.9.1 - Tests des nouvelles fonctionnalit√©s</p>
        </div>
        
        <div class="alert alert-info">
            <strong>üìå OBJECTIF :</strong> Tester toutes les nouvelles fonctionnalit√©s d'authentification :
            <br>‚úÖ Mot de passe oubli√© avec code de v√©rification
            <br>‚úÖ Connexion avec Google (Simulation)
            <br>‚úÖ Connexion avec Facebook (Simulation)
            <br>‚úÖ Connexion avec Apple (Simulation)
        </div>
        
        <!-- TEST 1: MOT DE PASSE OUBLI√â -->
        <div class="test-section">
            <h2>üîí TEST 1 : Mot de passe oubli√©</h2>
            
            <div class="test-item">
                <h3>Sc√©nario de test</h3>
                <p>
                    <strong>√âtape 1 :</strong> Cliquez sur "Tester Mot de passe oubli√©"<br>
                    <strong>√âtape 2 :</strong> Entrez : <code>etot@paiecash.com</code><br>
                    <strong>√âtape 3 :</strong> Notez le code √† 6 chiffres affich√©<br>
                    <strong>√âtape 4 :</strong> Entrez le code de v√©rification<br>
                    <strong>√âtape 5 :</strong> Nouveau mot de passe : <code>nouveaumdp123</code><br>
                    <strong>√âtape 6 :</strong> Confirmez le mot de passe<br>
                    <strong>R√©sultat attendu :</strong> "‚úÖ Mot de passe chang√© avec succ√®s !"
                </p>
                <button class="btn btn-primary" onclick="testerMotDePasseOublie()">
                    üîë Tester Mot de passe oubli√©
                </button>
            </div>
            
            <div class="test-item">
                <h3>V√©rification apr√®s changement</h3>
                <p>
                    Apr√®s avoir chang√© le mot de passe, testez la connexion avec :
                    <br><strong>Email :</strong> <code>etot@paiecash.com</code>
                    <br><strong>Nouveau mot de passe :</strong> <code>nouveaumdp123</code>
                </p>
                <button class="btn btn-primary" onclick="window.location.href='connexion.html'">
                    üîì Aller √† la page de connexion
                </button>
            </div>
        </div>
        
        <!-- TEST 2: CONNEXIONS SOCIALES -->
        <div class="test-section">
            <h2>üåê TEST 2 : Connexions avec r√©seaux sociaux</h2>
            
            <div class="test-item">
                <h3>Google Sign-In (Simulation)</h3>
                <p>
                    <strong>Action :</strong> Cliquez sur le bouton Google<br>
                    <strong>R√©sultat attendu :</strong> 
                    <br>‚Ä¢ Message d'information sur l'int√©gration OAuth 2.0
                    <br>‚Ä¢ Proposition de simulation avec cr√©ation de compte test
                    <br>‚Ä¢ Connexion automatique et redirection vers l'app
                    <br><strong>Compte cr√©√© :</strong> <code>google.user@gmail.com</code>
                </p>
                <button class="btn btn-google" onclick="connexionGoogle()">
                    üî¥ Connexion avec Google
                </button>
            </div>
            
            <div class="test-item">
                <h3>Facebook Login (Simulation)</h3>
                <p>
                    <strong>Action :</strong> Cliquez sur le bouton Facebook<br>
                    <strong>R√©sultat attendu :</strong> 
                    <br>‚Ä¢ Message d'information sur Facebook SDK
                    <br>‚Ä¢ Proposition de simulation avec cr√©ation de compte test
                    <br>‚Ä¢ Connexion automatique et redirection vers l'app
                    <br><strong>Compte cr√©√© :</strong> <code>facebook.user@fb.com</code>
                </p>
                <button class="btn btn-facebook" onclick="connexionFacebook()">
                    üìò Connexion avec Facebook
                </button>
            </div>
            
            <div class="test-item">
                <h3>Apple Sign-In (Simulation)</h3>
                <p>
                    <strong>Action :</strong> Cliquez sur le bouton Apple<br>
                    <strong>R√©sultat attendu :</strong> 
                    <br>‚Ä¢ Message d'information sur Sign in with Apple
                    <br>‚Ä¢ Proposition de simulation avec cr√©ation de compte test
                    <br>‚Ä¢ Connexion automatique et redirection vers l'app
                    <br><strong>Compte cr√©√© :</strong> <code>apple.user@icloud.com</code>
                </p>
                <button class="btn btn-apple" onclick="connexionApple()">
                    üçé Connexion avec Apple
                </button>
            </div>
        </div>
        
        <!-- TEST 3: V√âRIFICATION LOCALE -->
        <div class="test-section">
            <h2>üîç TEST 3 : V√©rification des donn√©es</h2>
            
            <div class="test-item">
                <h3>Inspection LocalStorage</h3>
                <p>V√©rifiez les donn√©es stock√©es dans le navigateur</p>
                <button class="btn btn-primary" onclick="afficherDonneesStockees()">
                    üìä Afficher les donn√©es
                </button>
                <button class="btn btn-reset" onclick="resetToutesLesDonnees()">
                    üóëÔ∏è R√©initialiser toutes les donn√©es
                </button>
            </div>
            
            <div id="dataDisplay" style="display: none;" class="status-box">
                <h4>üìã Donn√©es stock√©es :</h4>
                <pre id="dataContent" style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 12px; overflow-x: auto;"></pre>
            </div>
        </div>
        
        <!-- STATUS BOX -->
        <div class="status-box">
            <h4>‚úÖ Fonctionnalit√©s impl√©ment√©es :</h4>
            <ul>
                <li>Syst√®me "Mot de passe oubli√©" avec code √† 6 chiffres</li>
                <li>Validation email et v√©rification d'existence</li>
                <li>Code de r√©initialisation valide 15 minutes</li>
                <li>Changement s√©curis√© du mot de passe avec confirmation</li>
                <li>Connexion Google avec OAuth 2.0 (simulation)</li>
                <li>Connexion Facebook avec SDK (simulation)</li>
                <li>Connexion Apple Sign-In (simulation)</li>
                <li>Cr√©ation automatique de comptes sociaux</li>
                <li>Redirection automatique apr√®s connexion</li>
                <li>Messages d'erreur clairs et informatifs</li>
            </ul>
        </div>
        
        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è IMPORTANT :</strong> Les connexions sociales sont en mode SIMULATION. 
            Pour la production, il faudra configurer :
            <br>‚Ä¢ Google Cloud Console (OAuth 2.0)
            <br>‚Ä¢ Facebook App Developer
            <br>‚Ä¢ Apple Developer Account
        </div>
    </div>
    
    <script src="auth_ameliore.js"></script>
    <script>
        function testerMotDePasseOublie() {
            // Ouvrir directement la fonction
            afficherMotDePasseOublie();
        }
        
        function afficherDonneesStockees() {
            const dataDisplay = document.getElementById('dataDisplay');
            const dataContent = document.getElementById('dataContent');
            
            const utilisateurs = localStorage.getItem('utilisateurs');
            const utilisateurConnecte = localStorage.getItem('utilisateurConnecte');
            
            let output = "=== UTILISATEURS ENREGISTR√âS ===\n\n";
            
            if (utilisateurs) {
                const users = JSON.parse(utilisateurs);
                output += `Nombre d'utilisateurs : ${users.length}\n\n`;
                users.forEach((user, index) => {
                    output += `${index + 1}. ${user.nomComplet}\n`;
                    output += `   Email: ${user.email}\n`;
                    output += `   Provider: ${user.authProvider || 'email'}\n`;
                    output += `   Solde: ${user.solde}‚Ç¨\n\n`;
                });
            } else {
                output += "Aucun utilisateur enregistr√©\n\n";
            }
            
            output += "=== UTILISATEUR CONNECT√â ===\n\n";
            if (utilisateurConnecte) {
                const user = JSON.parse(utilisateurConnecte);
                output += `Nom: ${user.nomComplet}\n`;
                output += `Email: ${user.email}\n`;
                output += `Solde: ${user.solde}‚Ç¨\n`;
            } else {
                output += "Aucun utilisateur connect√©\n";
            }
            
            dataContent.textContent = output;
            dataDisplay.style.display = 'block';
        }
        
        function resetToutesLesDonnees() {
            if (confirm('‚ö†Ô∏è ATTENTION !\n\nCette action va supprimer TOUTES les donn√©es :\n‚Ä¢ Tous les utilisateurs\n‚Ä¢ Les sessions\n‚Ä¢ Les codes de r√©initialisation\n\n√ätes-vous s√ªr ?')) {
                localStorage.clear();
                alert('‚úÖ Toutes les donn√©es ont √©t√© effac√©es !\n\nLe syst√®me est r√©initialis√©.');
                location.reload();
            }
        }
        
        // Log de d√©marrage
        console.log('üß™ Page de test charg√©e');
        console.log('üì¶ Fonctionnalit√©s disponibles:');
        console.log('  - afficherMotDePasseOublie()');
        console.log('  - connexionGoogle()');
        console.log('  - connexionFacebook()');
        console.log('  - connexionApple()');
    </script>
</body>
</html>
