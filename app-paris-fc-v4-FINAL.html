<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2FAEE0">
    <title>PaieCashPlay - Paris FC v4.0 FINAL ULTRA-COMPL√àTE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --om-blue: #2563eb;
            --om-white: #FFFFFF;
            --dark-bg: #0f172a;
            --card-bg: rgba(255, 255, 255, 0.05);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* ========== LOADER ========== */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s;
        }

        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader-logo {
            width: 120px;
            height: 120px;
            background: url('https://upload.wikimedia.org/wikipedia/fr/thumb/2/22/Paris_FC_logo_2020.svg/1200px-Paris_FC_logo_2020.svg.png') center/contain no-repeat;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .loader-text {
            margin-top: 24px;
            font-size: 24px;
            font-weight: 700;
            color: var(--om-blue);
        }

        .loader-subtext {
            margin-top: 8px;
            font-size: 14px;
            opacity: 0.7;
        }

        /* ========== HEADER FIXE ========== */
        .app-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(47, 174, 224, 0.3);
            z-index: 1000;
            padding: 12px 20px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .club-logo-header {
            width: 48px;
            height: 48px;
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .club-logo-header:hover {
            animation: none;
        }

        .club-logo-header img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .header-title h1 {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--om-blue), #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-title span {
            font-size: 12px;
            opacity: 0.8;
        }

        .header-right {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .points-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
            border-radius: 20px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .points-badge:hover {
            transform: scale(1.05);
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            position: relative;
            transition: all 0.3s;
        }

        .btn-icon:hover {
            background: rgba(47, 174, 224, 0.2);
            transform: translateY(-2px);
        }

        .notification-btn .badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* ========== MENU HORIZONTAL FIXE ========== */
        .horizontal-menu {
            position: fixed;
            top: 72px;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid var(--om-blue);
            z-index: 999;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .horizontal-menu::-webkit-scrollbar {
            display: none;
        }

        .menu-container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .menu-btn {
            flex: 0 0 auto;
            padding: 16px 20px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .menu-btn:hover {
            color: white;
            background: rgba(47, 174, 224, 0.1);
        }

        .menu-btn.active {
            color: var(--om-blue);
            border-bottom-color: var(--om-blue);
            background: rgba(47, 174, 224, 0.05);
        }

        .menu-icon {
            font-size: 20px;
        }

        /* ========== MAIN CONTENT ========== */
        .app-main {
            margin-top: 140px;
            padding: 20px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding-bottom: 40px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            margin-bottom: 24px;
        }

        .section-header h2 {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, white, var(--om-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-header p {
            opacity: 0.7;
            font-size: 16px;
        }

        /* ========== CARDS ========== */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .card:hover {
            border-color: rgba(47, 174, 224, 0.5);
            transform: translateY(-2px);
        }

        .card h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        /* ========== BUTTONS ========== */
        .btn-primary {
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--om-blue), #1d8bb8);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(47, 174, 224, 0.4);
        }

        .btn-secondary {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* ========== STORIES HORIZONTALES ========== */
        .stories-container {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 12px 0;
            scrollbar-width: none;
        }

        .stories-container::-webkit-scrollbar {
            display: none;
        }

        .story-item {
            flex: 0 0 auto;
            width: 140px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .story-item:hover {
            transform: scale(1.05);
        }

        .story-image {
            width: 140px;
            height: 200px;
            border-radius: 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: 3px solid var(--om-blue);
            position: relative;
            overflow: hidden;
        }

        .story-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .story-actions {
            position: absolute;
            bottom: 8px;
            left: 8px;
            right: 8px;
            display: flex;
            gap: 4px;
        }

        .story-btn {
            flex: 1;
            padding: 6px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .story-btn:hover {
            background: var(--om-blue);
        }

        .story-name {
            margin-top: 8px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        /* ========== GAMIFICATION ========== */
        .level-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 14px;
        }

        .level-bronze { background: linear-gradient(135deg, #cd7f32, #a0522d); }
        .level-silver { background: linear-gradient(135deg, #c0c0c0, #808080); }
        .level-gold { background: linear-gradient(135deg, #ffd700, #ffb700); color: #92400e; }
        .level-platinum { background: linear-gradient(135deg, #e5e4e2, #a8a8a8); }
        .level-diamond { background: linear-gradient(135deg, #b9f2ff, #00bfff); color: #0c4a6e; }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
            margin: 12px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--om-blue), #60a5fa);
            border-radius: 8px;
            transition: width 1s ease;
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .badge-item {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .badge-item:hover {
            transform: translateY(-4px);
            border-color: var(--om-blue);
        }

        .badge-icon {
            font-size: 36px;
            margin-bottom: 8px;
        }

        .badge-name {
            font-size: 12px;
            font-weight: 600;
        }

        .badge-locked {
            opacity: 0.3;
            filter: grayscale(1);
        }

        /* ========== WALLET & TRANSACTIONS ========== */
        .wallet-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 24px;
            color: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .wallet-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { transform: translate(-100%, -100%); }
            100% { transform: translate(100%, 100%); }
        }

        .wallet-balance {
            font-size: 48px;
            font-weight: 800;
            margin: 16px 0;
            font-family: 'Roboto Mono', monospace;
        }

        .wallet-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .transaction-item {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .transaction-item:hover {
            border-color: var(--om-blue);
        }

        .transaction-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .transaction-icon.success { background: rgba(16, 185, 129, 0.2); }
        .transaction-icon.pending { background: rgba(245, 158, 11, 0.2); }
        .transaction-icon.failed { background: rgba(239, 68, 68, 0.2); }

        .transaction-details {
            flex: 1;
        }

        .transaction-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .transaction-date {
            font-size: 12px;
            opacity: 0.6;
        }

        .transaction-amount {
            font-size: 18px;
            font-weight: 700;
            font-family: 'Roboto Mono', monospace;
        }

        .transaction-amount.positive { color: var(--success); }
        .transaction-amount.negative { color: var(--danger); }

        /* ========== PARTNERS GRID ========== */
        .partners-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .partner-card {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .partner-card:hover {
            transform: translateY(-4px);
            border-color: var(--om-blue);
            box-shadow: 0 8px 24px rgba(47, 174, 224, 0.3);
        }

        .partner-logo {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .partner-name {
            font-weight: 700;
            margin-bottom: 8px;
        }

        .partner-cashback {
            display: inline-block;
            padding: 4px 12px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
        }

        /* ========== NFT CARDS ========== */
        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .nft-card {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nft-card:hover {
            transform: translateY(-8px);
            border-color: var(--om-blue);
            box-shadow: 0 12px 32px rgba(47, 174, 224, 0.4);
        }

        .nft-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
        }

        .nft-info {
            padding: 16px;
        }

        .nft-title {
            font-weight: 700;
            margin-bottom: 8px;
        }

        .nft-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
        }

        .nft-price-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--om-blue);
        }

        /* ========== MODALS ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border: 1px solid rgba(47, 174, 224, 0.3);
            border-radius: 20px;
            padding: 32px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
        }

        .btn-close {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-close:hover {
            background: rgba(239, 68, 68, 0.3);
            transform: rotate(90deg);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--om-blue);
            background: rgba(47, 174, 224, 0.1);
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* ========== ALERTS ========== */
        .alert {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.5);
            color: #10b981;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.5);
            color: #f59e0b;
        }

        .alert-danger {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #ef4444;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .header-title h1 {
                font-size: 14px;
            }
            .menu-btn {
                padding: 12px 14px;
                font-size: 12px;
            }
            .section-header h2 {
                font-size: 24px;
            }
            .story-item {
                width: 100px;
            }
            .story-image {
                width: 100px;
                height: 140px;
            }
            .wallet-balance {
                font-size: 32px;
            }
            .partners-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            .nft-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- LOADER -->
    <div id="loader" class="loader">
        <div class="loader-logo"></div>
        <div class="loader-text">PaieCashPlay Paris FC</div>
        <div class="loader-subtext">Version 4.0 FINAL</div>
    </div>

    <!-- APP CONTAINER -->
    <div id="app" class="app-container" style="display: none;">
        
        <!-- HEADER FIXE -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="club-logo-header">
                        <img src="https://upload.wikimedia.org/wikipedia/fr/thumb/2/22/Paris_FC_logo_2020.svg/1200px-Paris_FC_logo_2020.svg.png" alt="Paris FC">
                    </div>
                    <div class="header-title">
                        <h1>Paris Football Club</h1>
                        <span id="userLevel" class="level-badge level-platinum">üíé Platine</span>
                    </div>
                </div>
                <div class="header-right">
                    <span class="points-badge" onclick="showPointsDetails()">
                        <span>‚≠ê</span>
                        <span id="userPoints">4250</span>
                    </span>
                    <button class="btn-icon" id="btnAI" onclick="openAIAssistant()">
                        <span>ü§ñ</span>
                    </button>
                    <button class="btn-icon notification-btn" onclick="showNotifications()">
                        <span>üîî</span>
                        <span class="badge">12</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- MENU HORIZONTAL FIXE -->
        <nav class="horizontal-menu">
            <div class="menu-container">
                <button class="menu-btn active" data-section="accueilSection">
                    <span class="menu-icon">üè†</span>
                    <span>Accueil</span>
                </button>
                <button class="menu-btn" data-section="fideliteSection">
                    <span class="menu-icon">üíé</span>
                    <span>Fid√©lit√©</span>
                </button>
                <button class="menu-btn" data-section="legendesSection">
                    <span class="menu-icon">‚≠ê</span>
                    <span>L√©gendes</span>
                </button>
                <button class="menu-btn" data-section="billetterieSection">
                    <span class="menu-icon">üéüÔ∏è</span>
                    <span>Billetterie</span>
                </button>
                <button class="menu-btn" data-section="boutiqueSection">
                    <span class="menu-icon">üõçÔ∏è</span>
                    <span>Boutique</span>
                </button>
                <button class="menu-btn" data-section="paiementSection">
                    <span class="menu-icon">üí≥</span>
                    <span>Paiement</span>
                </button>
                <button class="menu-btn" data-section="profilSection">
                    <span class="menu-icon">üë§</span>
                    <span>Profil</span>
                </button>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="app-main" id="mainContent">
            
            <!-- ========================================
                 SECTION 1 : ACCUEIL
                 Stories horizontales + Envoyer argent + Recherche amis
            ========================================= -->
            <section id="accueilSection" class="section active">
                <div class="section-header">
                    <h2>üè† Accueil</h2>
                    <p>Partagez vos moments et gagnez des points !</p>
                </div>

                <!-- Actions Rapides -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 20px;">
                    <button class="btn-primary" onclick="openAddStoryModal()">
                        üì∏ Ajouter Story (+10 pts)
                    </button>
                    <button class="btn-primary" onclick="openSearchFriendsModal()">
                        üîç Rechercher Amis
                    </button>
                    <button class="btn-secondary" onclick="inviteFriends()">
                        üéÅ Inviter (+50 pts)
                    </button>
                </div>

                <!-- Stories Horizontales -->
                <div class="card">
                    <h3>üì± Stories Supporters</h3>
                    <div class="stories-container" id="storiesContainer">
                        <!-- Stories inject√©es dynamiquement -->
                    </div>
                </div>

                <!-- Feed Posts -->
                <div id="postsFeed">
                    <!-- Posts inject√©s dynamiquement -->
                </div>
            </section>

            <!-- ========================================
                 SECTION 2 : FID√âLIT√â
                 Gamification compl√®te avec niveaux, badges, recrutement
            ========================================= -->
            <section id="fideliteSection" class="section">
                <div class="section-header">
                    <h2>üíé Programme Fid√©lit√©</h2>
                    <p>Gagnez des points, d√©bloquez des badges et recrutez !</p>
                </div>

                <!-- Progression Niveau -->
                <div class="card">
                    <h3>üéØ Votre Progression</h3>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 16px 0;">
                        <div>
                            <div class="level-badge level-platinum">üíé Platine</div>
                            <p style="margin-top: 8px; opacity: 0.7; font-size: 14px;">Encore 750 pts pour Diamond</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 36px; font-weight: 800; color: var(--om-blue);">4,250</div>
                            <div style="font-size: 14px; opacity: 0.7;">points</div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; opacity: 0.7;">
                        <span>Platine (4000)</span>
                        <span>Diamond (5000)</span>
                    </div>
                </div>

                <!-- Niveaux & Cashback -->
                <div class="card">
                    <h3>üèÜ Niveaux de Fid√©lit√©</h3>
                    <div style="display: grid; gap: 12px; margin-top: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(205, 127, 50, 0.2); border-radius: 12px;">
                            <span class="level-badge level-bronze">ü•â Bronze</span>
                            <span>0-999 pts ‚Ä¢ 2% cashback</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(192, 192, 192, 0.2); border-radius: 12px;">
                            <span class="level-badge level-silver">ü•à Argent</span>
                            <span>1,000-1,999 pts ‚Ä¢ 3% cashback</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255, 215, 0, 0.2); border-radius: 12px;">
                            <span class="level-badge level-gold">ü•á Or</span>
                            <span>2,000-3,999 pts ‚Ä¢ 4% cashback</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(229, 228, 226, 0.2); border-radius: 12px; border: 2px solid var(--om-blue);">
                            <span class="level-badge level-platinum">üíé Platine</span>
                            <span>4,000-4,999 pts ‚Ä¢ 5% cashback</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(185, 242, 255, 0.2); border-radius: 12px;">
                            <span class="level-badge level-diamond">üí† Diamond</span>
                            <span>5,000+ pts ‚Ä¢ 7% cashback</span>
                        </div>
                    </div>
                </div>

                <!-- Badges D√©bloqu√©s -->
                <div class="card">
                    <h3>üéñÔ∏è Mes Badges (12/25)</h3>
                    <div class="badges-grid" id="badgesGrid">
                        <!-- Badges inject√©s dynamiquement -->
                    </div>
                </div>

                <!-- Recrutement & Commission -->
                <div class="card">
                    <h3>üéÅ Programme de Parrainage</h3>
                    <div class="alert alert-success">
                        <span style="font-size: 24px;">üéâ</span>
                        <div>
                            <strong>Gagnez +50 pts par filleul</strong>
                            <p style="margin-top: 4px; opacity: 0.8; font-size: 14px;">+ 2% de commission sur leurs achats !</p>
                        </div>
                    </div>
                    <div style="margin-top: 16px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span>Filleuls actifs</span>
                            <strong style="color: var(--om-blue);">8 personnes</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span>Commission totale</span>
                            <strong style="color: var(--success);">+124,50 ‚Ç¨</strong>
                        </div>
                    </div>
                    <button class="btn-primary" style="width: 100%; margin-top: 16px;" onclick="shareReferralCode()">
                        üì§ Partager mon code
                    </button>
                </div>
            </section>

            <!-- ========================================
                 SECTION 3 : L√âGENDES
                 Ambassadeurs + Live Shopping
            ========================================= -->
            <section id="legendesSection" class="section">
                <div class="section-header">
                    <h2>‚≠ê L√©gendes Paris FC</h2>
                    <p>Soutenez nos ambassadeurs et leurs projets</p>
                </div>

                <!-- Live Shopping EN DIRECT -->
                <div class="card" style="background: linear-gradient(135deg, #ef4444, #dc2626); border: 2px solid #fca5a5;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3>üî¥ LIVE SHOPPING EN DIRECT</h3>
                            <p style="margin-top: 8px;">Nicolas Laspalles ‚Ä¢ 147 spectateurs</p>
                        </div>
                        <button class="btn-primary" onclick="joinLiveShopping()">
                            üì∫ Rejoindre
                        </button>
                    </div>
                </div>

                <!-- Ambassadeur Principal : St√©phane Mbia -->
                <div class="card">
                    <div style="display: flex; gap: 20px; align-items: start;">
                        <div style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--om-blue), #60a5fa); display: flex; align-items: center; justify-content: center; font-size: 48px;">
                            ‚≠ê
                        </div>
                        <div style="flex: 1;">
                            <h3>Nicolas Laspalles</h3>
                            <p style="opacity: 0.7; margin: 8px 0;">L√©gende Paris FC ‚Ä¢ Attaquant ‚Ä¢ 1995-2005</p>
                            <div style="display: flex; gap: 12px; margin-top: 16px;">
                                <button class="btn-primary" onclick="supportMbia()">
                                    ‚ù§Ô∏è Faire un don
                                </button>
                                <button class="btn-secondary" onclick="viewMbiaProjects()">
                                    üìö Ses projets
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-success" style="margin-top: 16px;">
                        <span>üè´</span>
                        <div>
                            <strong>Projet Jeunesse Paris</strong>
                            <p style="font-size: 14px; margin-top: 4px;">Formation et insertion des jeunes franciliens</p>
                        </div>
                    </div>
                </div>

                <!-- Autres L√©gendes -->
                <div class="card">
                    <h3>üåü Autres Ambassadeurs</h3>
                    <div style="display: grid; gap: 12px; margin-top: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                            <div>
                                <strong>Sylvain Armand</strong>
                                <p style="font-size: 12px; opacity: 0.7;">D√©fenseur ‚Ä¢ 2000-2004</p>
                            </div>
                            <button class="btn-secondary" style="padding: 8px 16px;">Soutenir</button>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                            <div>
                                <strong>Mevl√ºt Erding</strong>
                                <p style="font-size: 12px; opacity: 0.7;">Attaquant ‚Ä¢ 2005-2008</p>
                            </div>
                            <button class="btn-secondary" style="padding: 8px 16px;">Soutenir</button>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                            <div>
                                <strong>Guillaume Hoarau</strong>
                                <p style="font-size: 12px; opacity: 0.7;">Attaquant ‚Ä¢ 2005-2008</p>
                            </div>
                            <button class="btn-secondary" style="padding: 8px 16px;">Soutenir</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========================================
                 SECTION 4 : BILLETTERIE NFT
                 Achat/Vente avec tra√ßabilit√© blockchain
            ========================================= -->
            <section id="billetterieSection" class="section">
                <div class="section-header">
                    <h2>üéüÔ∏è Billetterie NFT</h2>
                    <p>Achetez et revendez vos billets en toute s√©curit√©</p>
                </div>

                <!-- Alert Avantages NFT -->
                <div class="alert alert-success">
                    <span>üîê</span>
                    <div>
                        <strong>Billets NFT certifi√©s blockchain</strong>
                        <p style="font-size: 14px; margin-top: 4px;">Impossible √† contrefaire ‚Ä¢ Revente s√©curis√©e ‚Ä¢ Historique tra√ßable</p>
                    </div>
                </div>

                <!-- Prochains Matchs -->
                <div class="card">
                    <h3>‚öΩ Prochains Matchs</h3>
                    <div style="display: grid; gap: 16px; margin-top: 16px;">
                        <!-- Match 1 -->
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                <div>
                                    <div style="font-size: 12px; opacity: 0.7; margin-bottom: 4px;">Ligue 2 ‚Ä¢ Stade Jean Bouin</div>
                                    <h4 style="font-size: 20px;">Paris FC vs Guingamp</h4>
                                    <div style="font-size: 14px; margin-top: 8px;">üìÖ 15 d√©cembre 2024 ‚Ä¢ 21:00</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 24px; font-weight: 800; color: var(--om-blue);">45‚Ç¨</div>
                                    <div style="font-size: 12px; opacity: 0.7;">√† partir de</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn-primary" style="flex: 1;" onclick="buyTicketNFT('pfc-guingamp')">üéüÔ∏è Acheter</button>
                                <button class="btn-secondary" onclick="viewTicketDetails('pfc-guingamp')">üëÅÔ∏è D√©tails</button>
                            </div>
                        </div>

                        <!-- Match 2 -->
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                <div>
                                    <div style="font-size: 12px; opacity: 0.7; margin-bottom: 4px;">Ligue 2 ‚Ä¢ Stade Jean Bouin</div>
                                    <h4 style="font-size: 20px;">Paris FC vs Auxerre</h4>
                                    <div style="font-size: 14px; margin-top: 8px;">üìÖ 22 d√©cembre 2024 ‚Ä¢ 17:00</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 24px; font-weight: 800; color: var(--om-blue);">35‚Ç¨</div>
                                    <div style="font-size: 12px; opacity: 0.7;">√† partir de</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn-primary" style="flex: 1;" onclick="buyTicketNFT('pfc-auxerre')">üéüÔ∏è Acheter</button>
                                <button class="btn-secondary" onclick="viewTicketDetails('pfc-auxerre')">üëÅÔ∏è D√©tails</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mes Billets -->
                <div class="card">
                    <h3>üé´ Mes Billets (3)</h3>
                    <div style="display: grid; gap: 12px; margin-top: 16px;">
                        <div style="background: rgba(47, 174, 224, 0.1); border: 1px solid var(--om-blue); border-radius: 12px; padding: 16px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <strong>Paris FC vs Guingamp</strong>
                                    <p style="font-size: 12px; opacity: 0.7; margin-top: 4px;">Tribune Boulogne ‚Ä¢ Place 142</p>
                                    <p style="font-size: 12px; margin-top: 8px;">üîê NFT #PFC-2024-0142</p>
                                </div>
                                <button class="btn-secondary" style="padding: 8px 16px;" onclick="resellTicket('PFC-2024-0142')">üí∞ Revendre</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========================================
                 SECTION 5 : BOUTIQUE
                 NFT Joueurs + Produits + Achat 1 clic
            ========================================= -->
            <section id="boutiqueSection" class="section">
                <div class="section-header">
                    <h2>üõçÔ∏è Boutique Paris FC</h2>
                    <p>Achat en 1 clic + NFT Joueurs et Moments exclusifs</p>
                </div>

                <!-- Tabs Cat√©gories -->
                <div style="display: flex; gap: 12px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 8px;">
                    <button class="btn-primary shop-tab active" data-category="nft-players">‚öΩ NFT Joueurs</button>
                    <button class="btn-secondary shop-tab" data-category="nft-legends">‚≠ê NFT L√©gendes</button>
                    <button class="btn-secondary shop-tab" data-category="nft-moments">üì∏ NFT Moments</button>
                    <button class="btn-secondary shop-tab" data-category="products">üëï Produits</button>
                </div>

                <!-- NFT Joueurs Actuels -->
                <div class="shop-category" id="nft-players">
                    <div class="nft-grid" id="nftPlayersGrid">
                        <!-- NFTs inject√©s dynamiquement -->
                    </div>
                </div>

                <!-- NFT L√©gendes -->
                <div class="shop-category" id="nft-legends" style="display: none;">
                    <div class="nft-grid" id="nftLegendsGrid">
                        <!-- NFTs inject√©s dynamiquement -->
                    </div>
                </div>

                <!-- NFT Moments de Match -->
                <div class="shop-category" id="nft-moments" style="display: none;">
                    <div class="nft-grid" id="nftMomentsGrid">
                        <!-- NFTs inject√©s dynamiquement -->
                    </div>
                </div>

                <!-- Produits Classiques -->
                <div class="shop-category" id="products" style="display: none;">
                    <div class="nft-grid" id="productsGrid">
                        <!-- Produits inject√©s dynamiquement -->
                    </div>
                </div>
            </section>

            <!-- ========================================
                 SECTION 6 : PAIEMENT
                 Wallet simplifi√© + Carte + Partenaires + Historique
            ========================================= -->
            <section id="paiementSection" class="section">
                <div class="section-header">
                    <h2>üí≥ Paiement & Wallet</h2>
                    <p>G√©rez votre argent et vos transactions</p>
                </div>

                <!-- Wallet Card -->
                <div class="wallet-card">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <div style="font-size: 14px; opacity: 0.9;">Solde Total</div>
                            <div class="wallet-balance">1,247.50 ‚Ç¨</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; opacity: 0.9;">Cashback disponible</div>
                            <div style="font-size: 24px; font-weight: 700; color: #10b981;">+37.20 ‚Ç¨</div>
                        </div>
                    </div>
                    <div class="wallet-actions">
                        <button class="btn-primary" onclick="rechargeWallet()">üí∞ Recharger</button>
                        <button class="btn-primary" onclick="exchangeCurrency()">üîÑ √âchanger</button>
                    </div>
                </div>

                <!-- Actions Rapides -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 20px;">
                    <button class="btn-secondary" onclick="sendMoney()">üì§ Envoyer</button>
                    <button class="btn-secondary" onclick="requestMoney()">üì• Demander</button>
                    <button class="btn-secondary" onclick="scanQR()">üì∑ Scanner QR</button>
                    <button class="btn-secondary" onclick="showTransactions()">üìä Transactions</button>
                </div>

                <!-- Partenaires Paiement (6) -->
                <div class="card">
                    <h3>ü§ù Partenaires de Paiement (Cashback)</h3>
                    <div class="partners-grid">
                        <div class="partner-card" onclick="payWithPartner('mcdonalds')">
                            <div class="partner-logo">üçî</div>
                            <div class="partner-name">McDonald's</div>
                            <div class="partner-cashback">5% cashback</div>
                        </div>
                        <div class="partner-card" onclick="payWithPartner('carrefour')">
                            <div class="partner-logo">üõí</div>
                            <div class="partner-name">Carrefour</div>
                            <div class="partner-cashback">3% cashback</div>
                        </div>
                        <div class="partner-card" onclick="payWithPartner('ubereats')">
                            <div class="partner-logo">üçï</div>
                            <div class="partner-name">Uber Eats</div>
                            <div class="partner-cashback">4% cashback</div>
                        </div>
                        <div class="partner-card" onclick="payWithPartner('decathlon')">
                            <div class="partner-logo">‚öΩ</div>
                            <div class="partner-name">D√©cathlon</div>
                            <div class="partner-cashback">6% cashback</div>
                        </div>
                        <div class="partner-card" onclick="payWithPartner('fnac')">
                            <div class="partner-logo">üìö</div>
                            <div class="partner-name">Fnac</div>
                            <div class="partner-cashback">3% cashback</div>
                        </div>
                        <div class="partner-card" onclick="payWithPartner('sephora')">
                            <div class="partner-logo">üíÑ</div>
                            <div class="partner-name">Sephora</div>
                            <div class="partner-cashback">4% cashback</div>
                        </div>
                    </div>
                </div>

                <!-- Historique des Transactions -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h3>üìä Mes Transactions</h3>
                        <button class="btn-secondary" style="padding: 8px 16px;" onclick="exportTransactions()">üì• Exporter</button>
                    </div>
                    <div id="transactionsHistory">
                        <!-- Transactions inject√©es dynamiquement -->
                    </div>
                </div>
            </section>

            <!-- ========================================
                 SECTION 7 : PROFIL
                 Upload photo identit√© + Mot de passe + Code secret
            ========================================= -->
            <section id="profilSection" class="section">
                <div class="section-header">
                    <h2>üë§ Mon Profil</h2>
                    <p>G√©rez vos informations personnelles et s√©curit√©</p>
                </div>

                <!-- Carte Profil -->
                <div class="card">
                    <div style="display: flex; gap: 20px; align-items: start;">
                        <div style="position: relative;">
                            <div id="profileAvatar" style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--om-blue), #60a5fa); display: flex; align-items: center; justify-content: center; font-size: 48px; cursor: pointer;" onclick="uploadProfilePhoto()">
                                üë§
                            </div>
                            <button style="position: absolute; bottom: 0; right: 0; width: 32px; height: 32px; border-radius: 50%; background: var(--om-blue); border: 2px solid #0f172a; color: white; cursor: pointer; font-size: 16px;" onclick="uploadProfilePhoto()">üì∑</button>
                        </div>
                        <div style="flex: 1;">
                            <h3>Alexandre Martin</h3>
                            <p style="opacity: 0.7; margin: 4px 0;">alexandre.martin@email.com</p>
                            <span class="level-badge level-platinum" style="margin-top: 8px;">üíé Fan Platine</span>
                        </div>
                    </div>
                </div>

                <!-- Statistiques -->
                <div class="card">
                    <h3>üìà Mes Statistiques</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 16px;">
                        <div style="text-align: center; padding: 16px; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                            <div style="font-size: 32px; font-weight: 800; color: var(--om-blue);">4,250</div>
                            <div style="font-size: 12px; opacity: 0.7; margin-top: 4px;">Points Fid√©lit√©</div>
                        </div>
                        <div style="text-align: center; padding: 16px; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                            <div style="font-size: 32px; font-weight: 800; color: var(--success);">12</div>
                            <div style="font-size: 12px; opacity: 0.7; margin-top: 4px;">Badges</div>
                        </div>
                        <div style="text-align: center; padding: 16px; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                            <div style="font-size: 32px; font-weight: 800; color: var(--warning);">8</div>
                            <div style="font-size: 12px; opacity: 0.7; margin-top: 4px;">Filleuls</div>
                        </div>
                    </div>
                </div>

                <!-- S√©curit√© -->
                <div class="card">
                    <h3>üîê S√©curit√©</h3>
                    <div style="display: grid; gap: 12px; margin-top: 16px;">
                        <button class="btn-secondary" style="width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;" onclick="uploadIdentityDocument()">
                            <span>üìÑ Photo d'Identit√©</span>
                            <span style="opacity: 0.7; font-size: 14px;">Non v√©rifi√©</span>
                        </button>
                        <button class="btn-secondary" style="width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;" onclick="changePassword()">
                            <span>üîë Changer Mot de Passe</span>
                            <span>‚Üí</span>
                        </button>
                        <button class="btn-secondary" style="width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;" onclick="manageSecretCode()">
                            <span>üî¢ Code Secret (paiements >30‚Ç¨)</span>
                            <span id="secretCodeStatus">Non d√©fini</span>
                        </button>
                    </div>
                </div>

                <!-- Pr√©f√©rences -->
                <div class="card">
                    <h3>‚öôÔ∏è Pr√©f√©rences</h3>
                    <div style="display: grid; gap: 12px; margin-top: 16px;">
                        <button class="btn-secondary" style="width: 100%; text-align: left;">üîî Notifications</button>
                        <button class="btn-secondary" style="width: 100%; text-align: left;">üåç Langue & R√©gion</button>
                        <button class="btn-secondary" style="width: 100%; text-align: left;">üí≥ Moyens de Paiement</button>
                        <button class="btn-secondary" style="width: 100%; text-align: left;">‚ùì Aide & Support</button>
                    </div>
                </div>

                <!-- D√©connexion -->
                <button class="btn-primary" style="width: 100%; background: linear-gradient(135deg, #ef4444, #dc2626); margin-top: 20px;" onclick="logout()">
                    üö™ D√©connexion
                </button>
            </section>

        </main>

    </div>

    <!-- ========================================
         MODALS
    ========================================= -->

    <!-- Modal Ajouter Story -->
    <div id="modalAddStory" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üì∏ Ajouter une Story</h3>
                <button class="btn-close" onclick="closeModal('modalAddStory')">√ó</button>
            </div>
            <div class="input-group">
                <label>Photo (horizontale recommand√©e)</label>
                <input type="file" id="storyPhoto" accept="image/*">
            </div>
            <div class="input-group">
                <label>L√©gende</label>
                <textarea id="storyCaption" placeholder="Partagez votre moment..."></textarea>
            </div>
            <div class="alert alert-success">
                <span>‚≠ê</span>
                <div>Vous gagnerez +10 points en publiant cette story !</div>
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="publishStory()">üì§ Publier (+10 pts)</button>
        </div>
    </div>

    <!-- Modal Rechercher Amis -->
    <div id="modalSearchFriends" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üîç Rechercher Amis</h3>
                <button class="btn-close" onclick="closeModal('modalSearchFriends')">√ó</button>
            </div>
            <div class="input-group">
                <label>Nom ou T√©l√©phone</label>
                <input type="text" id="friendSearch" placeholder="Rechercher...">
            </div>
            <div id="friendsSearchResults" style="margin-top: 16px;">
                <!-- R√©sultats inject√©s dynamiquement -->
            </div>
        </div>
    </div>

    <!-- Modal Envoyer Argent depuis Story -->
    <div id="modalSendMoneyStory" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üí∏ Envoyer de l'Argent</h3>
                <button class="btn-close" onclick="closeModal('modalSendMoneyStory')">√ó</button>
            </div>
            <div style="text-align: center; margin: 20px 0;">
                <div id="recipientAvatar" style="width: 80px; height: 80px; margin: 0 auto; border-radius: 50%; background: linear-gradient(135deg, var(--om-blue), #60a5fa); display: flex; align-items: center; justify-content: center; font-size: 40px;">üë§</div>
                <h4 id="recipientName" style="margin-top: 12px;">Sophie Martin</h4>
            </div>
            <div class="input-group">
                <label>Montant (‚Ç¨)</label>
                <input type="number" id="sendAmount" placeholder="0.00" min="1" step="0.01">
            </div>
            <div class="input-group">
                <label>Message (optionnel)</label>
                <input type="text" id="sendMessage" placeholder="Pour...">
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="confirmSendMoney()">‚úÖ Envoyer</button>
        </div>
    </div>

    <!-- Modal Code Secret -->
    <div id="modalSecretCode" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üî¢ Code Secret</h3>
                <button class="btn-close" onclick="closeModal('modalSecretCode')">√ó</button>
            </div>
            <div class="alert alert-warning">
                <span>‚ö†Ô∏è</span>
                <div>Ce code sera demand√© pour les paiements sup√©rieurs √† 30‚Ç¨</div>
            </div>
            <div class="input-group">
                <label>Nouveau Code (4 chiffres)</label>
                <input type="password" id="newSecretCode" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <div class="input-group">
                <label>Confirmer le Code</label>
                <input type="password" id="confirmSecretCode" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="saveSecretCode()">‚úÖ Enregistrer</button>
        </div>
    </div>

    <!-- Modal V√©rification Code Secret (Achat >30‚Ç¨) -->
    <div id="modalVerifyCode" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üîê V√©rification Requise</h3>
                <button class="btn-close" onclick="closeModal('modalVerifyCode')">√ó</button>
            </div>
            <div class="alert alert-warning">
                <span>üí≥</span>
                <div>
                    <strong>Montant : <span id="verifyAmount">0.00</span> ‚Ç¨</strong>
                    <p style="font-size: 14px; margin-top: 4px;">Entrez votre code secret pour valider</p>
                </div>
            </div>
            <div class="input-group">
                <label>Code Secret</label>
                <input type="password" id="verifyCodeInput" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="confirmPurchase()">‚úÖ Valider l'Achat</button>
        </div>
    </div>

    <script>
        // ========================================
        // VARIABLES GLOBALES
        // ========================================
        let currentUser = {
            name: 'Alexandre Martin',
            email: 'alexandre.martin@email.com',
            points: 4250,
            level: 'Platine',
            badges: 12,
            filleuls: 8,
            walletBalance: 1247.50,
            cashback: 37.20,
            secretCode: null,
            identityVerified: false
        };

        let pendingPurchase = null;

        const stories = [
            { id: 1, user: 'Sophie Martin', avatar: 'üë©', image: 'https://via.placeholder.com/140x200/667eea/ffffff?text=Story+1' },
            { id: 2, user: 'Thomas Dubois', avatar: 'üë®', image: 'https://via.placeholder.com/140x200/764ba2/ffffff?text=Story+2' },
            { id: 3, user: 'Julie Bernard', avatar: 'üë±‚Äç‚ôÄÔ∏è', image: 'https://via.placeholder.com/140x200/f093fb/ffffff?text=Story+3' },
            { id: 4, user: 'Marc Rousseau', avatar: 'üë®‚Äçü¶∞', image: 'https://via.placeholder.com/140x200/4facfe/ffffff?text=Story+4' }
        ];

        const badges = [
            { id: 1, icon: '‚≠ê', name: 'Premi√®re Story', unlocked: true },
            { id: 2, icon: 'üéØ', name: '100 Points', unlocked: true },
            { id: 3, icon: 'üíé', name: 'Platine', unlocked: true },
            { id: 4, icon: 'üéüÔ∏è', name: 'Premier Billet', unlocked: true },
            { id: 5, icon: 'üõçÔ∏è', name: 'Premier Achat', unlocked: true },
            { id: 6, icon: 'üë•', name: '5 Filleuls', unlocked: true },
            { id: 7, icon: 'üî•', name: 'S√©rie de 7', unlocked: true },
            { id: 8, icon: 'üí∞', name: '100‚Ç¨ Cashback', unlocked: true },
            { id: 9, icon: 'üèÜ', name: 'Top Fan', unlocked: true },
            { id: 10, icon: 'üì±', name: 'Partage x10', unlocked: true },
            { id: 11, icon: '‚ö°', name: 'Paiement √âclair', unlocked: true },
            { id: 12, icon: 'üéÅ', name: 'G√©n√©reux', unlocked: true },
            { id: 13, icon: 'üåü', name: 'VIP', unlocked: false },
            { id: 14, icon: 'üí†', name: 'Diamond', unlocked: false },
            { id: 15, icon: 'üëë', name: 'L√©gende', unlocked: false }
        ];

        const nftPlayers = [
            { id: 1, name: 'Jean-Philippe Krasso', position: 'Attaquant', price: 39.99, icon: '‚öΩ' },
            { id: 2, name: 'Timoth√©e Kolodziejczak', position: 'D√©fenseur', price: 29.99, icon: 'üõ°Ô∏è' },
            { id: 3, name: 'Adama Camara', position: 'Milieu', price: 34.99, icon: '‚ö°' },
            { id: 4, name: 'Lohann Doucet', position: 'Milieu', price: 32.99, icon: 'üéØ' }
        ];

        const nftLegends = [
            { id: 1, name: 'Nicolas Laspalles', era: '1995-2005', price: 79.99, icon: 'üëë' },
            { id: 2, name: 'Sylvain Armand', era: '2000-2004', price: 69.99, icon: '‚≠ê' },
            { id: 3, name: 'Guillaume Hoarau', era: '2005-2008', price: 74.99, icon: 'üî•' },
            { id: 4, name: 'Mevl√ºt Erding', era: '2005-2008', price: 64.99, icon: 'üíé' }
        ];

        const nftMoments = [
            { id: 1, name: 'But de Krasso vs Metz', date: '2024', price: 39.99, icon: 'üöÄ' },
            { id: 2, name: 'Mont√©e en Ligue 2 - 2006', date: '2006', price: 89.99, icon: 'üèÜ' },
            { id: 3, name: 'Victoire Derby vs Red Star', date: '2023', price: 44.99, icon: '‚ö°' }
        ];

        const transactions = [
            { id: 1, type: 'purchase', title: 'Big Mac Menu - McDonald\'s', amount: -9.50, cashback: 0.48, date: '08/12/2024 14:32', status: 'success' },
            { id: 2, type: 'recharge', title: 'Recharge Wallet', amount: 50.00, date: '07/12/2024 09:15', status: 'success' },
            { id: 3, type: 'transfer', title: 'Envoy√© √† Sophie Martin', amount: -25.00, date: '06/12/2024 18:45', status: 'success' },
            { id: 4, type: 'cashback', title: 'Cashback D√©cathlon', amount: 2.40, date: '05/12/2024 16:20', status: 'success' },
            { id: 5, type: 'purchase', title: 'Billet Paris FC vs Guingamp', amount: -35.00, date: '04/12/2024 11:30', status: 'success' }
        ];

        // ========================================
        // INITIALIZATION
        // ========================================
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.getElementById('loader').classList.add('hidden');
                document.getElementById('app').style.display = 'block';
                initApp();
            }, 2000);
        });

        function initApp() {
            renderStories();
            renderBadges();
            renderNFTPlayers();
            renderNFTLegends();
            renderNFTMoments();
            renderTransactions();
            setupMenuNavigation();
            setupShopTabs();
        }

        // ========================================
        // NAVIGATION
        // ========================================
        function setupMenuNavigation() {
            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const sectionId = btn.dataset.section;
                    
                    // Update menu
                    document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Update sections
                    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                    document.getElementById(sectionId).classList.add('active');
                });
            });
        }

        function setupShopTabs() {
            document.querySelectorAll('.shop-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const category = tab.dataset.category;
                    
                    // Update tabs
                    document.querySelectorAll('.shop-tab').forEach(t => {
                        t.classList.remove('btn-primary', 'active');
                        t.classList.add('btn-secondary');
                    });
                    tab.classList.remove('btn-secondary');
                    tab.classList.add('btn-primary', 'active');
                    
                    // Update categories
                    document.querySelectorAll('.shop-category').forEach(c => c.style.display = 'none');
                    document.getElementById(category).style.display = 'block';
                });
            });
        }

        // ========================================
        // STORIES
        // ========================================
        function renderStories() {
            const container = document.getElementById('storiesContainer');
            container.innerHTML = stories.map(story => `
                <div class="story-item">
                    <div class="story-image" style="background-image: url('${story.image}');">
                        <div class="story-actions">
                            <button class="story-btn" onclick="openSendMoneyModal('${story.user}')">üí∏</button>
                            <button class="story-btn" onclick="callUser('${story.user}')">üìû</button>
                        </div>
                    </div>
                    <div class="story-name">${story.user}</div>
                </div>
            `).join('');
        }

        function openAddStoryModal() {
            document.getElementById('modalAddStory').classList.add('active');
        }

        function publishStory() {
            currentUser.points += 10;
            document.getElementById('userPoints').textContent = currentUser.points.toLocaleString();
            showAlert('success', '‚úÖ Story publi√©e ! +10 points gagn√©s');
            closeModal('modalAddStory');
        }

        function openSearchFriendsModal() {
            document.getElementById('modalSearchFriends').classList.add('active');
            // Simulate search results
            document.getElementById('friendsSearchResults').innerHTML = `
                <div style="padding: 12px; background: rgba(255,255,255,0.05); border-radius: 12px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <strong>Lucas Petit</strong>
                        <p style="font-size: 12px; opacity: 0.7;">+33 6 12 34 56 78</p>
                    </div>
                    <button class="btn-primary" style="padding: 8px 16px;">Ajouter</button>
                </div>
            `;
        }

        function openSendMoneyModal(username) {
            document.getElementById('recipientName').textContent = username;
            document.getElementById('modalSendMoneyStory').classList.add('active');
        }

        function confirmSendMoney() {
            const amount = parseFloat(document.getElementById('sendAmount').value);
            if (!amount || amount <= 0) {
                showAlert('danger', '‚ùå Montant invalide');
                return;
            }
            
            if (amount > currentUser.walletBalance) {
                showAlert('danger', '‚ùå Solde insuffisant');
                return;
            }

            currentUser.walletBalance -= amount;
            showAlert('success', `‚úÖ ${amount.toFixed(2)}‚Ç¨ envoy√© avec succ√®s !`);
            closeModal('modalSendMoneyStory');
        }

        function callUser(username) {
            showAlert('success', `üìû Appel en cours vers ${username}...`);
        }

        function inviteFriends() {
            const code = 'PFC-' + Math.random().toString(36).substr(2, 6).toUpperCase();
            showAlert('success', `üéÅ Code de parrainage : ${code}\n+50 pts par filleul !`);
        }

        // ========================================
        // BADGES
        // ========================================
        function renderBadges() {
            const container = document.getElementById('badgesGrid');
            container.innerHTML = badges.map(badge => `
                <div class="badge-item ${!badge.unlocked ? 'badge-locked' : ''}" onclick="shareBadge(${badge.id})">
                    <div class="badge-icon">${badge.icon}</div>
                    <div class="badge-name">${badge.name}</div>
                </div>
            `).join('');
        }

        function shareBadge(badgeId) {
            const badge = badges.find(b => b.id === badgeId);
            if (badge && badge.unlocked) {
                showAlert('success', `üì§ Badge "${badge.name}" partag√© ! +5 points`);
                currentUser.points += 5;
                document.getElementById('userPoints').textContent = currentUser.points.toLocaleString();
            }
        }

        function shareReferralCode() {
            const code = 'PFC-' + Math.random().toString(36).substr(2, 6).toUpperCase();
            showAlert('success', `üéÅ Votre code : ${code}\nPartagez-le pour gagner +50 pts par filleul !`);
        }

        function showPointsDetails() {
            showAlert('success', `‚≠ê Vos Points\n\nTotal : ${currentUser.points} points\nNiveau : ${currentUser.level}\nCashback : ${currentUser.cashback.toFixed(2)}‚Ç¨`);
        }

        // ========================================
        // L√âGENDES & LIVE SHOPPING
        // ========================================
        function joinLiveShopping() {
            showAlert('success', 'üì∫ Connexion au Live Shopping...\nüî¥ Nicolas Laspalles en direct');
        }

        function supportMbia() {
            showAlert('success', '‚ù§Ô∏è Merci pour votre soutien √† Nicolas Laspalles !\nVous soutenez la jeunesse parisienne.');
        }

        function viewMbiaProjects() {
            showAlert('success', 'üìö Projets de Nicolas Laspalles :\n\nüë• Formation des jeunes\n‚öΩ √âcoles de football\nüéì Insertion professionnelle');
        }

        // ========================================
        // BILLETTERIE NFT
        // ========================================
        function buyTicketNFT(matchId) {
            const price = matchId === 'pfc-guingamp' ? 35 : 30;
            if (price > 30 && !currentUser.secretCode) {
                showAlert('warning', '‚ö†Ô∏è Veuillez d√©finir un code secret dans votre profil pour les achats >30‚Ç¨');
                return;
            }
            
            if (price > 30) {
                pendingPurchase = { type: 'ticket', id: matchId, price: price };
                document.getElementById('verifyAmount').textContent = price.toFixed(2);
                document.getElementById('modalVerifyCode').classList.add('active');
            } else {
                completePurchase('ticket', matchId, price);
            }
        }

        function viewTicketDetails(matchId) {
            showAlert('success', `üéüÔ∏è D√©tails du match ${matchId.toUpperCase()}\n\nüìç Stade V√©lodrome\nüë• 67,000 places\nüîê Billet NFT certifi√©`);
        }

        function resellTicket(nftId) {
            showAlert('success', `üí∞ Mise en vente du billet NFT ${nftId}\nPrix sugg√©r√© : 50‚Ç¨`);
        }

        // ========================================
        // BOUTIQUE NFT
        // ========================================
        function renderNFTPlayers() {
            const container = document.getElementById('nftPlayersGrid');
            container.innerHTML = nftPlayers.map(nft => `
                <div class="nft-card" onclick="buyNFT('player', ${nft.id}, ${nft.price})">
                    <div class="nft-image">${nft.icon}</div>
                    <div class="nft-info">
                        <div class="nft-title">${nft.name}</div>
                        <p style="font-size: 12px; opacity: 0.7; margin-top: 4px;">${nft.position}</p>
                        <div class="nft-price">
                            <span class="nft-price-value">${nft.price}‚Ç¨</span>
                            <button class="btn-primary" style="padding: 8px 16px; font-size: 14px;">Acheter</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderNFTLegends() {
            const container = document.getElementById('nftLegendsGrid');
            container.innerHTML = nftLegends.map(nft => `
                <div class="nft-card" onclick="buyNFT('legend', ${nft.id}, ${nft.price})">
                    <div class="nft-image">${nft.icon}</div>
                    <div class="nft-info">
                        <div class="nft-title">${nft.name}</div>
                        <p style="font-size: 12px; opacity: 0.7; margin-top: 4px;">${nft.era}</p>
                        <div class="nft-price">
                            <span class="nft-price-value">${nft.price}‚Ç¨</span>
                            <button class="btn-primary" style="padding: 8px 16px; font-size: 14px;">Acheter</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderNFTMoments() {
            const container = document.getElementById('nftMomentsGrid');
            container.innerHTML = nftMoments.map(nft => `
                <div class="nft-card" onclick="buyNFT('moment', ${nft.id}, ${nft.price})">
                    <div class="nft-image">${nft.icon}</div>
                    <div class="nft-info">
                        <div class="nft-title">${nft.name}</div>
                        <p style="font-size: 12px; opacity: 0.7; margin-top: 4px;">${nft.date}</p>
                        <div class="nft-price">
                            <span class="nft-price-value">${nft.price}‚Ç¨</span>
                            <button class="btn-primary" style="padding: 8px 16px; font-size: 14px;">Acheter</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyNFT(type, id, price) {
            if (price > 30 && !currentUser.secretCode) {
                showAlert('warning', '‚ö†Ô∏è Veuillez d√©finir un code secret dans votre profil pour les achats >30‚Ç¨');
                return;
            }
            
            if (price > 30) {
                pendingPurchase = { type: 'nft', subtype: type, id: id, price: price };
                document.getElementById('verifyAmount').textContent = price.toFixed(2);
                document.getElementById('modalVerifyCode').classList.add('active');
            } else {
                completePurchase('nft', `${type}-${id}`, price);
            }
        }

        // ========================================
        // PAIEMENT & WALLET
        // ========================================
        function rechargeWallet() {
            showAlert('success', 'üí∞ Recharge du wallet\nMontant : 50‚Ç¨\nM√©thode : Carte bancaire');
        }

        function exchangeCurrency() {
            showAlert('success', 'üîÑ √âchange de devises\nEUR ‚Üî OM Coin disponible');
        }

        function sendMoney() {
            showAlert('success', 'üì§ Envoi d\'argent\nS√©lectionnez un contact');
        }

        function requestMoney() {
            showAlert('success', 'üì• Demande d\'argent\nCr√©ation d\'un lien de paiement');
        }

        function scanQR() {
            showAlert('success', 'üì∑ Scanner un QR Code\nOuvrez votre cam√©ra');
        }

        function showTransactions() {
            showAlert('success', 'üìä Historique complet des transactions\nD√©filez vers le bas');
        }

        function payWithPartner(partner) {
            const partners = {
                mcdonalds: { name: 'McDonald\'s', cashback: 5 },
                carrefour: { name: 'Carrefour', cashback: 3 },
                ubereats: { name: 'Uber Eats', cashback: 4 },
                decathlon: { name: 'D√©cathlon', cashback: 6 },
                fnac: { name: 'Fnac', cashback: 3 },
                sephora: { name: 'Sephora', cashback: 4 }
            };
            
            const p = partners[partner];
            showAlert('success', `üõí Paiement 1-clic chez ${p.name}\nüí∞ ${p.cashback}% de cashback automatique`);
        }

        function exportTransactions() {
            showAlert('success', 'üì• Export des transactions\nFormats : PDF, CSV, JSON');
        }

        function renderTransactions() {
            const container = document.getElementById('transactionsHistory');
            container.innerHTML = transactions.map(t => {
                const isPositive = t.amount > 0;
                const statusClass = t.status === 'success' ? 'success' : 'pending';
                return `
                    <div class="transaction-item">
                        <div class="transaction-icon ${statusClass}">
                            ${t.type === 'purchase' ? 'üõí' : t.type === 'recharge' ? 'üí∞' : t.type === 'transfer' ? 'üí∏' : 'üéÅ'}
                        </div>
                        <div class="transaction-details">
                            <div class="transaction-title">${t.title}</div>
                            <div class="transaction-date">${t.date}</div>
                            ${t.cashback ? `<div style="color: var(--success); font-size: 12px;">+${t.cashback.toFixed(2)}‚Ç¨ cashback</div>` : ''}
                        </div>
                        <div class="transaction-amount ${isPositive ? 'positive' : 'negative'}">
                            ${isPositive ? '+' : ''}${t.amount.toFixed(2)}‚Ç¨
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ========================================
        // PROFIL & S√âCURIT√â
        // ========================================
        function uploadProfilePhoto() {
            showAlert('success', 'üì∑ S√©lectionnez une photo de profil\nFormats accept√©s : JPG, PNG');
        }

        function uploadIdentityDocument() {
            showAlert('success', 'üìÑ Upload document d\'identit√©\nCarte d\'identit√© ou Passeport\nV√©rification sous 24h');
        }

        function changePassword() {
            showAlert('success', 'üîë Changement de mot de passe\nSaisissez l\'ancien et le nouveau');
        }

        function manageSecretCode() {
            document.getElementById('modalSecretCode').classList.add('active');
        }

        function saveSecretCode() {
            const newCode = document.getElementById('newSecretCode').value;
            const confirmCode = document.getElementById('confirmSecretCode').value;
            
            if (newCode.length !== 4 || !/^\d{4}$/.test(newCode)) {
                showAlert('danger', '‚ùå Le code doit contenir exactement 4 chiffres');
                return;
            }
            
            if (newCode !== confirmCode) {
                showAlert('danger', '‚ùå Les codes ne correspondent pas');
                return;
            }
            
            currentUser.secretCode = newCode;
            document.getElementById('secretCodeStatus').textContent = 'D√©fini ‚úì';
            document.getElementById('secretCodeStatus').style.color = 'var(--success)';
            showAlert('success', '‚úÖ Code secret enregistr√© avec succ√®s');
            closeModal('modalSecretCode');
        }

        function confirmPurchase() {
            const code = document.getElementById('verifyCodeInput').value;
            
            if (code !== currentUser.secretCode) {
                showAlert('danger', '‚ùå Code incorrect');
                return;
            }
            
            if (pendingPurchase) {
                completePurchase(pendingPurchase.type, pendingPurchase.id, pendingPurchase.price);
                pendingPurchase = null;
            }
            
            closeModal('modalVerifyCode');
        }

        function completePurchase(type, id, price) {
            if (price > currentUser.walletBalance) {
                showAlert('danger', '‚ùå Solde insuffisant');
                return;
            }
            
            currentUser.walletBalance -= price;
            currentUser.points += Math.floor(price * 2);
            
            showAlert('success', `‚úÖ Achat confirm√© !\nüí∞ -${price.toFixed(2)}‚Ç¨\n‚≠ê +${Math.floor(price * 2)} points`);
            document.getElementById('userPoints').textContent = currentUser.points.toLocaleString();
        }

        function logout() {
            if (confirm('√ätes-vous s√ªr de vouloir vous d√©connecter ?')) {
                showAlert('success', 'üëã √Ä bient√¥t sur PaieCashPlay Paris FC !');
                setTimeout(() => {
                    location.reload();
                }, 2000);
            }
        }

        // ========================================
        // UTILITIES
        // ========================================
        function openAIAssistant() {
            showAlert('success', 'ü§ñ Assistant IA Paris FC\nComment puis-je vous aider ?');
        }

        function showNotifications() {
            showAlert('success', 'üîî 12 nouvelles notifications\n\n‚Ä¢ +50 pts : Nouveau filleul\n‚Ä¢ Cashback disponible : 12‚Ç¨\n‚Ä¢ Match Paris FC vs Guingamp demain');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `
                <span>${type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ùå'}</span>
                <div>${message.replace(/\n/g, '<br>')}</div>
            `;
            
            document.querySelector('.app-main').insertBefore(alertDiv, document.querySelector('.app-main').firstChild);
            
            setTimeout(() => {
                alertDiv.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => alertDiv.remove(), 300);
            }, 5000);
        }

        // Close modals on click outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>