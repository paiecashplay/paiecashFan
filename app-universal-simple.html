<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaieCashFan - Chargement...</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: white;
        }

        /* HEADER */
        .header {
            background: rgba(0, 0, 0, 0.6);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .club-logo-header {
            width: 50px;
            height: 50px;
        }

        .header-info h2 {
            font-size: 18px;
        }

        .header-info p {
            font-size: 14px;
            opacity: 0.8;
        }

        .user-info {
            text-align: right;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin: 0 auto 5px;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }

        /* BARRE DE RECHERCHE */
        .search-container {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .search-input-wrapper {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 12px 45px 12px 45px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 15px;
            outline: none;
            transition: all 0.3s;
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .search-input:focus {
            background: rgba(255,255,255,0.15);
            border-color: #60a5fa;
            box-shadow: 0 0 15px rgba(96, 165, 250, 0.3);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            pointer-events: none;
        }

        .search-clear {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(239, 68, 68, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 14px;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .search-clear:hover {
            background: #ef4444;
            transform: translateY(-50%) scale(1.1);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(30, 30, 50, 0.98);
            border-radius: 15px;
            margin-top: 10px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 12px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-result-item:hover {
            background: rgba(96, 165, 250, 0.2);
        }

        .search-result-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-title {
            font-weight: bold;
            font-size: 15px;
            margin-bottom: 3px;
        }

        .search-result-desc {
            font-size: 12px;
            opacity: 0.7;
        }

        .search-result-price {
            font-weight: bold;
            color: #10b981;
        }

        .search-no-results {
            padding: 30px;
            text-align: center;
            opacity: 0.7;
        }

        /* MENU */
        .menu {
            display: flex;
            overflow-x: auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            gap: 10px;
        }

        .menu-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .menu-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* CONTAINER */
        .container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* SECTIONS */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* CARD */
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .card-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        /* WALLET CARD */
        .wallet-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .wallet-balance {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }

        .wallet-info {
            font-size: 14px;
            opacity: 0.9;
        }

        /* BUTTONS */
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .close-btn {
            float: right;
            font-size: 24px;
            cursor: pointer;
        }

        /* CRYPTO CARDS */
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .crypto-card {
            padding: 20px;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .crypto-card:hover {
            transform: scale(1.05);
        }

        /* PRODUCT GRID */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .product-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .product-card.selected {
            border: 3px solid #4ade80;
            background: rgba(74, 222, 128, 0.2);
        }

        .product-img {
            font-size: 60px;
            margin-bottom: 10px;
        }

        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .product-price {
            color: #4ade80;
            font-size: 18px;
            font-weight: bold;
        }

        /* QR CODE */
        .qr-code {
            background: white;
            padding: 20px;
            border-radius: 15px;
            display: inline-block;
            position: relative;
        }

        .qr-pattern {
            width: 200px;
            height: 200px;
            background: 
                linear-gradient(0deg, transparent 45%, #000 45%, #000 55%, transparent 55%),
                linear-gradient(90deg, transparent 45%, #000 45%, #000 55%, transparent 55%);
            background-size: 20px 20px;
            position: relative;
        }

        .qr-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 10px;
            border-radius: 10px;
            font-weight: bold;
            color: #3b82f6;
            font-size: 16px;
        }

        @media (max-width: 768px) {
            .crypto-grid, .product-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Animations pour le panier */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        #cart-floating {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .checkout-payment-option:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255,255,255,0.2);
        }
    </style>
    <!-- CHARGEMENT BASES DE DONN√âES -->
    <script src="‚≠ê_LEGENDES_CLUBS_DATABASE.js"></script>
    <script src="üåç_TOUTES_FEDERATIONS_FIFA.js"></script>
    <!-- CAF d√©j√† inclus dans TOUTES_FEDERATIONS_FIFA.js -->
    <script src="üåç_TOUTES_COMPETITIONS_2026.js"></script>
    <script src="equipes-nationales-internationales.js"></script>
    <script src="clubs-football-complet.js"></script>
    <script src="üèÄ_BASKET_FEDERATIONS_CLUBS.js"></script>
    <script src="ü§æ_HANDBALL_FEDERATIONS_CLUBS.js"></script>
    <script src="üèâ_RUGBY_VOLLEY_FEDERATIONS_CLUBS.js"></script>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <div class="header-left">
            <button onclick="window.location.href='index.html'" style="background: rgba(59, 130, 246, 0.8); color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: bold; margin-right: 15px;">
                ‚Üê Tous les clubs
            </button>
            <div id="clubLogoHeaderContainer" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; background: rgba(255,255,255,0.1);">
                ‚öΩ
            </div>
            <div class="header-info">
                <h2 id="clubNameHeader">Mon Club</h2>
                <p>Platine üíé</p>
            </div>
        </div>
        <div class="user-info">
            <div style="position: relative;">
                <div class="user-avatar">üë§</div>
                <div class="notification-badge">5</div>
            </div>
            <div style="font-size: 12px; margin-top: 5px;">ETOT Constantin Nicolas</div>
            <div style="font-size: 11px; opacity: 0.7;">etot@paiecash.com</div>
            <button onclick="seDeconnecter()" style="margin-top: 10px; padding: 8px 15px; background: rgba(239, 68, 68, 0.8); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: bold;">
                üö™ D√©connexion
            </button>
        </div>
    </div>

    <!-- BARRE DE RECHERCHE -->
    <div class="search-container">
        <div class="search-input-wrapper">
            <span class="search-icon">üîç</span>
            <input 
                type="text" 
                id="searchInput" 
                class="search-input" 
                placeholder="Rechercher un produit, une l√©gende, un club..." 
                autocomplete="off"
            />
            <button class="search-clear" id="searchClear" onclick="clearSearch()">‚úï</button>
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <!-- MENU -->
    <div class="menu">
        <button class="menu-btn active" onclick="showSection('accueil')">üè† Accueil</button>
        <button class="menu-btn" onclick="showSection('fidelite')">üíé Fid√©lit√©</button>
        <button class="menu-btn" onclick="showSection('legendes')">‚≠ê L√©gendes</button>
        <button class="menu-btn" onclick="showSection('billets')">üéüÔ∏è Billets</button>
        <button class="menu-btn" onclick="showSection('boutique')">üõçÔ∏è Boutique</button>
        <button class="menu-btn" id="btn-afrique" onclick="showSection('afrique')" style="display: none;">üåç Afrique</button>
        <button class="menu-btn" onclick="showSection('transactions')">üìä Transactions</button>
        <button class="menu-btn" onclick="showSection('paiement')">üí≥ Paiement</button>
        <button class="menu-btn" onclick="showSection('profil')">üë§ Profil</button>
        <button class="menu-btn" onclick="window.location.href='support.html'">üí¨ Support</button>
    </div>

    <!-- CONTAINER -->
    <div class="container">
        <!-- ACCUEIL -->
        <div class="section active" id="accueil">
            <div class="card">
                <div class="card-title" id="welcomeMessage">üëã Bienvenue !</div>
                <p>Vous √™tes connect√© en tant que <strong id="userName">ETOT Constantin Nicolas</strong></p>
                <p style="margin-top: 10px;">Niveau : Platine üíé | 4,250 points</p>
            </div>

            <!-- WALLET PAIECASH -->
            <div class="wallet-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="font-size: 22px; font-weight: bold; letter-spacing: 3px;">PAIECASH</div>
                    <div id="walletClubDisplay" style="font-size: 14px; opacity: 0.9;">‚öΩ Chargement...</div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">SOLDE TOTAL</div>
                    <div style="font-size: 36px; font-weight: bold;" id="soldeTotal-accueil">1247.50 ‚Ç¨</div>
                    <div style="font-size: 14px; margin-top: 5px; display: flex; gap: 15px;">
                        <span>üíµ Wallet : <span id="soldeWallet-accueil">625.00</span>‚Ç¨</span>
                        <span>üí≥ Carte : <span id="soldeCarte-accueil">622.50</span>‚Ç¨</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 16px; color: #90EE90;">+ <span id="cashback-accueil">37.20</span>‚Ç¨ cashback</div>
                </div>

                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 12px; opacity: 0.8; margin-bottom: 5px;">N¬∞ Identification</div>
                    <div style="font-size: 18px; font-weight: bold; letter-spacing: 2px;">5234 8765 1234 5678</div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <div>
                            <div style="font-size: 11px; opacity: 0.7;">Titulaire</div>
                            <div style="font-size: 14px; font-weight: bold;">ETOT CONSTANTIN</div>
                        </div>
                        <div>
                            <div style="font-size: 11px; opacity: 0.7;">Expire</div>
                            <div style="font-size: 14px; font-weight: bold;">12/34</div>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="showSection('paiement')" style="width: 100%; background: white; color: #667eea; font-weight: bold;">üí≥ G√©rer Wallet & Paiements</button>
            </div>

            <!-- TRANSACTIONS R√âCENTES -->
            <div class="card">
                <div class="card-title">üìä Transactions R√©centes</div>
                <div id="transactionsRecentes">
                    <!-- Les transactions s'afficheront ici dynamiquement -->
                    <div style="text-align: center; padding: 30px; opacity: 0.5;">
                        <div style="font-size: 50px; margin-bottom: 10px;">üìä</div>
                        <p style="font-size: 14px;">Aucune transaction r√©cente</p>
                        <p style="font-size: 12px; margin-top: 5px; opacity: 0.7;">Vos transactions appara√Ætront ici</p>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="showSection('transactions')" style="margin-top: 15px; width: 100%;">Voir toutes les transactions</button>
            </div>

            <div class="card">
                <div class="card-title">Actions Rapides</div>
                <button class="btn" onclick="showSection('paiement')">üí≥ Aller au Paiement</button>
                <button class="btn btn-secondary" onclick="showSection('boutique')">üõçÔ∏è Aller √† la Boutique</button>
            </div>
        </div>

        <!-- FID√âLIT√â -->
        <div class="section" id="fidelite">
            <div class="card">
                <div class="card-title">üíé Programme Fid√©lit√©</div>
                <p style="margin-bottom: 20px;">Niveau Platine üíé</p>
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Progression</div>
                    <div style="background: rgba(255,255,255,0.3); height: 10px; border-radius: 5px; overflow: hidden;">
                        <div style="background: white; height: 100%; width: 42.5%;"></div>
                    </div>
                    <div style="margin-top: 10px; font-size: 18px; font-weight: bold;">4,250 / 10,000 points</div>
                </div>
                <p>Contenu √† venir...</p>
            </div>
        </div>

        <!-- L√âGENDES -->
        <div class="section" id="legendes">
            <div class="card">
                <div class="card-title">‚≠ê L√©gendes & Ambassadeurs du Club</div>
                <p style="margin-bottom: 20px;">D√©couvrez les l√©gendes qui ont marqu√© l'histoire du club et soutenez leurs associations en achetant leurs NFTs collectors.</p>
                
                <div id="legendes-container" style="display: grid; gap: 25px; margin-top: 25px;">
                    <!-- Les l√©gendes seront charg√©es dynamiquement ici via JavaScript -->
                    <div style="text-align: center; padding: 40px; opacity: 0.7;">
                        <div style="font-size: 60px; margin-bottom: 15px;">‚è≥</div>
                        <p>Chargement des l√©gendes du club...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TRANSACTIONS TEMPS R√âEL -->
        <div class="section" id="transactions">
            <div class="card">
                <div class="card-title">üìä Transactions en Temps R√©el</div>
                <p style="margin-bottom: 20px;">Historique complet de vos transactions avec mise √† jour instantan√©e</p>
                
                <!-- Filtres -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="filtrerTransactions('toutes')" style="padding: 10px 20px;">Toutes</button>
                    <button class="btn btn-secondary" onclick="filtrerTransactions('boutique')" style="padding: 10px 20px;">üõçÔ∏è Boutique</button>
                    <button class="btn btn-secondary" onclick="filtrerTransactions('wallet')" style="padding: 10px 20px;">üíµ Wallet</button>
                    <button class="btn btn-secondary" onclick="filtrerTransactions('crypto')" style="padding: 10px 20px;">‚Çø Crypto</button>
                    <button class="btn btn-secondary" onclick="filtrerTransactions('alipay')" style="padding: 10px 20px;">üá®üá≥ Alipay</button>
                    <button class="btn btn-secondary" onclick="filtrerTransactions('wechat')" style="padding: 10px 20px;">üá®üá≥ WeChat</button>
                </div>
                
                <!-- Liste des transactions -->
                <div id="listeTransactionsComplete" style="display: grid; gap: 15px;">
                    <!-- Les transactions seront ajout√©es ici dynamiquement -->
                    <div style="text-align: center; padding: 40px; opacity: 0.5;">
                        <div style="font-size: 60px; margin-bottom: 15px;">üìä</div>
                        <p>Aucune transaction pour le moment</p>
                        <p style="font-size: 12px; margin-top: 10px;">Les transactions s'afficheront ici en temps r√©el apr√®s vos achats</p>
                    </div>
                </div>
                
                <!-- Statistiques -->
                <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                    <div class="card-title" style="margin-bottom: 15px;">üìà Statistiques</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <div style="font-size: 12px; opacity: 0.7;">Total d√©pens√©</div>
                            <div style="font-size: 24px; font-weight: bold; color: #ff6b6b;" id="totalDepense">0.00 ‚Ç¨</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; opacity: 0.7;">Total cashback gagn√©</div>
                            <div style="font-size: 24px; font-weight: bold; color: #4ade80;" id="totalCashback">0.00 ‚Ç¨</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; opacity: 0.7;">Nombre de transactions</div>
                            <div style="font-size: 24px; font-weight: bold;" id="nombreTransactions">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BILLETS -->
        <div class="section" id="billets">
            <div class="card">
                <div class="card-title">üéüÔ∏è Billetterie Officielle</div>
                <p style="margin-bottom: 20px;">Achetez vos billets pour les prochains matchs</p>
                <div class="product-grid">
                    <div class="product-card">
                        <div class="product-img" style="font-size: 60px;">‚öΩ</div>
                        <div class="product-name">Match √† Domicile</div>
                        <div style="font-size: 12px; opacity: 0.8; margin: 5px 0;">Prochain match</div>
                        <div class="product-price">45 ‚Ç¨</div>
                    </div>
                    <div class="product-card">
                        <div class="product-img" style="font-size: 60px;">üèÜ</div>
                        <div class="product-name">Match Europ√©en</div>
                        <div style="font-size: 12px; opacity: 0.8; margin: 5px 0;">Champions League</div>
                        <div class="product-price">85 ‚Ç¨</div>
                    </div>
                </div>
            </div>

            <!-- MARCH√â FAN-TO-FAN BILLETS -->
            <div class="card">
                <div class="card-title">üé´ March√© Fan-to-Fan - Billets</div>
                <p style="margin-bottom: 20px;">Billets revendus par des fans v√©rifi√©s</p>
                <div class="product-grid">
                    <div class="product-card" style="position: relative; border: 2px solid #10b981;">
                        <div style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                            ‚úì Vendeur v√©rifi√©
                        </div>
                        <div class="product-img" style="font-size: 60px;">üéüÔ∏è</div>
                        <div class="product-name">OM - PSG</div>
                        <div style="font-size: 12px; opacity: 0.8; margin: 5px 0;">Tribune Ganay - Rang 12</div>
                        <div style="font-size: 12px; color: #60a5fa; margin: 5px 0;">Vendu par: @OMFan123</div>
                        <div style="display: flex; align-items: center; gap: 10px; justify-content: center; margin: 8px 0;">
                            <div style="text-decoration: line-through; opacity: 0.6; font-size: 12px;">65 ‚Ç¨</div>
                            <div class="product-price">58 ‚Ç¨</div>
                        </div>
                        <div style="font-size: 10px; color: #10b981; font-weight: bold;">-11% vs prix officiel</div>
                    </div>

                    <div class="product-card" style="position: relative; border: 2px solid #10b981;">
                        <div style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                            ‚úì Vendeur v√©rifi√©
                        </div>
                        <div class="product-img" style="font-size: 60px;">üéüÔ∏è</div>
                        <div class="product-name">OM - OL</div>
                        <div style="font-size: 12px; opacity: 0.8; margin: 5px 0;">Virage Sud - Rang 8</div>
                        <div style="font-size: 12px; color: #60a5fa; margin: 5px 0;">Vendu par: @MarseilleForever</div>
                        <div style="display: flex; align-items: center; gap: 10px; justify-content: center; margin: 8px 0;">
                            <div style="text-decoration: line-through; opacity: 0.6; font-size: 12px;">45 ‚Ç¨</div>
                            <div class="product-price">40 ‚Ç¨</div>
                        </div>
                        <div style="font-size: 10px; color: #10b981; font-weight: bold;">-11% vs prix officiel</div>
                    </div>

                    <div class="product-card" style="position: relative; border: 2px solid #10b981;">
                        <div style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                            ‚úì Vendeur v√©rifi√©
                        </div>
                        <div class="product-img" style="font-size: 60px;">üéüÔ∏è</div>
                        <div class="product-name">OM - Nice</div>
                        <div style="font-size: 12px; opacity: 0.8; margin: 5px 0;">Tribune Jean Bouin - Rang 15</div>
                        <div style="font-size: 12px; color: #60a5fa; margin: 5px 0;">Vendu par: @SupporterOM</div>
                        <div style="display: flex; align-items: center; gap: 10px; justify-content: center; margin: 8px 0;">
                            <div style="text-decoration: line-through; opacity: 0.6; font-size: 12px;">50 ‚Ç¨</div>
                            <div class="product-price">43 ‚Ç¨</div>
                        </div>
                        <div style="font-size: 10px; color: #10b981; font-weight: bold;">-14% vs prix officiel</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAIEMENT -->
        <div class="section" id="paiement">
            <div class="wallet-card">
                <div class="wallet-info">PAIECASH</div>
                <div class="wallet-info">SOLDE TOTAL</div>
                <div class="wallet-balance" id="soldeTotal">1247.50 ‚Ç¨</div>
                <div class="wallet-info">Wallet (<span id="soldeWallet">625.00</span>‚Ç¨) + Carte (<span id="soldeCarte">622.50</span>‚Ç¨) + <span id="cashback">37.20</span>‚Ç¨ cashback</div>
            </div>

            <button class="btn" onclick="rechargerWallet()">üí∞ Recharger Wallet</button>
            <button class="btn btn-secondary" onclick="retirerVersCarte()">üí∏ Retirer vers Carte</button>

            <!-- WALLET MULTI-CLUB - √âCOSYST√àME SPORT -->
            <div class="card" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.1)); border: 2px solid rgba(59, 130, 246, 0.3);">
                <div class="card-title">üëõ Wallet √âcosyst√®me Sport</div>
                <p style="margin-bottom: 15px;">6 Stablecoins de clubs fran√ßais - Parit√© 1:1 avec l'EUR</p>
                
                <div style="background: rgba(16, 185, 129, 0.2); border-left: 4px solid #10b981; padding: 12px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px;">üîê Syst√®me Non-Custodial</div>
                    <div style="font-size: 11px; opacity: 0.9;">Adresse: <code style="font-size: 10px;">0x742d35Cc6634C0532925a3b844Bc9e7595f8f3a</code></div>
                    <div style="font-size: 11px; opacity: 0.9; margin-top: 5px;">‚úÖ Achat/revente facile entre les 6 clubs | Interop√©rabilit√© totale</div>
                </div>

                <div class="crypto-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <!-- OM COIN -->
                    <div class="crypto-card" onclick="choisirProduitCrypto('OM Coin', 2450, 2450)" style="background: linear-gradient(135deg, #3b82f6, #1e40af); position: relative; padding: 20px; border-radius: 15px; color: white; cursor: pointer;">
                        <div style="font-size: 12px; opacity: 0.9;">üèüÔ∏è Olympique Marseille</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">2,450.00 OMC</div>
                        <div style="font-size: 11px; opacity: 0.8;">= 2,450.00 EUR</div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: bold;">1 OMC = 1 EUR</div>
                    </div>

                    <!-- PSG COIN -->
                    <div class="crypto-card" onclick="choisirProduitCrypto('PSG Coin', 150, 150)" style="background: linear-gradient(135deg, #1e3a8a, #3b82f6); position: relative; padding: 20px; border-radius: 15px; color: white; cursor: pointer;">
                        <div style="font-size: 12px; opacity: 0.9;">‚öúÔ∏è Paris Saint-Germain</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">150.00 PSC</div>
                        <div style="font-size: 11px; opacity: 0.8;">= 150.00 EUR</div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: bold;">1 PSC = 1 EUR</div>
                    </div>

                    <!-- OL COIN -->
                    <div class="crypto-card" onclick="choisirProduitCrypto('OL Coin', 75, 75)" style="background: linear-gradient(135deg, #ef4444, #dc2626); position: relative; padding: 20px; border-radius: 15px; color: white; cursor: pointer;">
                        <div style="font-size: 12px; opacity: 0.9;">ü¶Å Olympique Lyonnais</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">75.00 OLC</div>
                        <div style="font-size: 11px; opacity: 0.8;">= 75.00 EUR</div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: bold;">1 OLC = 1 EUR</div>
                    </div>

                    <!-- MONACO COIN -->
                    <div class="crypto-card" onclick="choisirProduitCrypto('Monaco Coin', 50, 50)" style="background: linear-gradient(135deg, #dc2626, #991b1b); position: relative; padding: 20px; border-radius: 15px; color: white; cursor: pointer;">
                        <div style="font-size: 12px; opacity: 0.9;">üè¥ AS Monaco</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">50.00 ASC</div>
                        <div style="font-size: 11px; opacity: 0.8;">= 50.00 EUR</div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: bold;">1 ASC = 1 EUR</div>
                    </div>

                    <!-- LILLE COIN -->
                    <div class="crypto-card" onclick="choisirProduitCrypto('LOSC Coin', 100, 100)" style="background: linear-gradient(135deg, #dc2626, #b91c1c); position: relative; padding: 20px; border-radius: 15px; color: white; cursor: pointer;">
                        <div style="font-size: 12px; opacity: 0.9;">üê∂ LOSC Lille</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">100.00 LSC</div>
                        <div style="font-size: 11px; opacity: 0.8;">= 100.00 EUR</div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: bold;">1 LSC = 1 EUR</div>
                    </div>

                    <!-- LENS COIN -->
                    <div class="crypto-card" onclick="choisirProduitCrypto('RC Lens Coin', 80, 80)" style="background: linear-gradient(135deg, #fbbf24, #f59e0b); position: relative; padding: 20px; border-radius: 15px; color: white; cursor: pointer;">
                        <div style="font-size: 12px; opacity: 0.9;">üíõ RC Lens</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">80.00 RCL</div>
                        <div style="font-size: 11px; opacity: 0.8;">= 80.00 EUR</div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: bold;">1 RCL = 1 EUR</div>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: rgba(0, 176, 224, 0.2); border-radius: 10px;">
                    <div style="font-size: 13px; font-weight: bold; margin-bottom: 10px;">üí° Avantages √âcosyst√®me Sport</div>
                    <div style="font-size: 11px; display: grid; gap: 5px;">
                        <div>‚úÖ Achat/revente sans frais entre les 6 clubs</div>
                        <div>‚úÖ R√©ductions exclusives dans toutes les boutiques</div>
                        <div>‚úÖ +2% de cashback suppl√©mentaire</div>
                        <div>‚úÖ Priorit√© billetterie multi-clubs</div>
                    </div>
                </div>

                <button class="btn" onclick="convertirCrypto()" style="margin-top: 15px;">üîÑ Convertir entre Stablecoins</button>
            </div>

            <!-- CRYPTO CLASSIQUES -->
            <div class="card">
                <div class="card-title">üíé Mes Crypto Classiques</div>
                <div class="crypto-grid">
                    <div class="crypto-card" onclick="choisirProduitCrypto('USDC', 847.30, 801.25)" style="background: linear-gradient(135deg, #10b981, #059669);">
                        <div style="font-size: 12px; opacity: 0.9;">USDC</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;" id="usdc">847.30 $</div>
                        <div style="font-size: 11px; opacity: 0.8;">‚âà 801.25 ‚Ç¨</div>
                    </div>
                    <div class="crypto-card" onclick="choisirProduitCrypto('Bitcoin', 0.012, 450)" style="background: linear-gradient(135deg, #f97316, #ea580c);">
                        <div style="font-size: 12px; opacity: 0.9;">Bitcoin</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">0.012 BTC</div>
                        <div style="font-size: 11px; opacity: 0.8;">‚âà 450 ‚Ç¨</div>
                    </div>
                    <div class="crypto-card" onclick="choisirProduitCrypto('Ethereum', 0.25, 380)" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                        <div style="font-size: 12px; opacity: 0.9;">Ethereum</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">0.25 ETH</div>
                        <div style="font-size: 11px; opacity: 0.8;">‚âà 380 ‚Ç¨</div>
                    </div>
                </div>
                <button class="btn" onclick="convertirCrypto()" style="margin-top: 20px;">üîÑ Convertir / √âchanger</button>
            </div>

            <!-- QR CODE -->
            <div class="card">
                <div class="card-title">üì± Recevoir un Paiement</div>
                <button class="btn" onclick="afficherQRCode()">üì≤ Afficher QR Code PaieCash</button>
            </div>

            <!-- CARTE BANCAIRE -->
            <div class="card">
                <div class="card-title">üí≥ Ma Carte Bancaire OM</div>
                <div style="background: linear-gradient(135deg, #1e3a8a, #0ea5e9); padding: 30px; border-radius: 20px; color: white; margin-bottom: 15px;">
                    <div style="margin-bottom: 20px;">
                        <div style="font-size: 14px; opacity: 0.9;">CARTE OFFICIELLE</div>
                        <div style="font-size: 20px; font-weight: bold;">OLYMPIQUE DE MARSEILLE</div>
                    </div>
                    <div style="font-size: 20px; letter-spacing: 3px; margin: 20px 0;">5234 8765 1234 5678</div>
                    <div style="display: flex; justify-content: space-between;">
                        <div><div style="font-size: 10px;">TITULAIRE</div><div style="font-weight: bold;">ETOT CONSTANTIN</div></div>
                        <div><div style="font-size: 10px;">EXPIRE</div><div style="font-weight: bold;">12/27</div></div>
                        <div><div style="font-size: 10px;">CVV</div><div style="font-weight: bold;" id="cvv">***</div></div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <button class="btn btn-secondary" onclick="voirPIN()">üëÅÔ∏è Voir PIN</button>
                    <button class="btn btn-secondary" onclick="gererLimites()">‚öôÔ∏è Limites</button>
                </div>
            </div>
        </div>

        <!-- BOUTIQUE -->
        <div class="section" id="boutique">
            <!-- LIVE STREAM BOUTIQUE -->
            <div class="card" style="padding: 0; overflow: hidden;">
                <div style="position: relative; background: black; aspect-ratio: 16/9;">
                    <video style="width: 100%; height: 100%; object-fit: cover;" autoplay loop muted playsinline>
                        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                    </video>
                    <div style="position: absolute; top: 15px; left: 15px; background: #ef4444; color: white; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; display: flex; align-items: center; gap: 5px;">
                        <span style="display: inline-block; width: 8px; height: 8px; background: white; border-radius: 50%; animation: pulse 1.5s infinite;"></span>
                        üî¥ DIRECT
                    </div>
                    <div style="position: absolute; top: 15px; right: 15px; display: flex; gap: 10px;">
                        <div style="background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); padding: 5px 12px; border-radius: 15px; font-size: 12px; font-weight: bold;">
                            üëÅÔ∏è 2,347
                        </div>
                        <div style="background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); padding: 5px 12px; border-radius: 15px; font-size: 12px; font-weight: bold;">
                            ‚ù§Ô∏è 892
                        </div>
                    </div>
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); padding: 20px 15px 15px;">
                        <h3 style="margin: 0; font-size: 16px; font-weight: bold;">üõçÔ∏è Live Stream Boutique du Club</h3>
                        <p style="margin: 5px 0 0; font-size: 13px; opacity: 0.9;">Shopping en direct - Nouveaut√©s & Exclusivit√©s</p>
                    </div>
                </div>
            </div>

            <!-- ONGLETS BOUTIQUE -->
            <div style="display: flex; gap: 10px; padding: 15px 20px; background: rgba(0,0,0,0.3); overflow-x: auto; white-space: nowrap;">
                <button class="boutique-tab active" onclick="showBoutiqueTab('officiel')" data-tab="officiel" style="padding: 10px 20px; border-radius: 20px; border: none; background: rgba(255,255,255,0.2); color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    üè™ Boutique Officielle
                </button>
                <button class="boutique-tab" onclick="showBoutiqueTab('fan-articles')" data-tab="fan-articles" style="padding: 10px 20px; border-radius: 20px; border: none; background: rgba(255,255,255,0.1); color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    üë§ Ventes Fan (Articles)
                </button>
            </div>
            
            <div style="padding: 15px 20px; background: rgba(16, 185, 129, 0.2); border-left: 4px solid #10b981; margin: 0;">
                <p style="font-size: 13px; opacity: 0.95;">
                    üí° <strong>NFTs de L√©gendes :</strong> D√©couvrez les NFTs des l√©gendes du club dans l'onglet "‚≠ê L√©gendes" du menu principal !
                </p>
            </div>

            <!-- BARRE DE PAIEMENT STICKY (TOUJOURS VISIBLE EN HAUT) -->
            <div id="sticky-payment-bar" style="position: sticky; top: 0; z-index: 100; background: linear-gradient(135deg, #10b981, #059669); padding: 15px 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                    <div style="flex: 1; min-width: 200px;">
                        <div style="font-size: 12px; opacity: 0.9; margin-bottom: 3px;">Votre panier</div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span style="font-size: 18px; font-weight: bold;" id="sticky-nb-produits">0 produit</span>
                            <span style="font-size: 22px; font-weight: bold; color: #fbbf24;" id="sticky-total">0.00 ‚Ç¨</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn" onclick="payerBoutique()" style="padding: 12px 25px; font-size: 15px; font-weight: bold; background: #1e40af; box-shadow: 0 4px 10px rgba(0,0,0,0.2); margin: 0;">
                            üí≥ PAYER MAINTENANT
                        </button>
                        <button class="btn" onclick="payerBoutiqueBNPL()" style="padding: 12px 25px; font-size: 15px; font-weight: bold; background: linear-gradient(135deg, #f59e0b, #d97706); box-shadow: 0 4px 10px rgba(0,0,0,0.2); margin: 0;">
                            üìÖ Payer en 3x/4x/6x
                        </button>
                        <button onclick="viderPanier()" style="padding: 12px 20px; background: rgba(239,68,68,0.9); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
                            üóëÔ∏è Vider
                        </button>
                    </div>
                </div>
            </div>

            <!-- CONTENU TAB: BOUTIQUE OFFICIELLE -->
            <div class="boutique-content" id="boutique-officiel" style="display: block;">
                <div class="card">
                    <div class="card-title">üè™ Boutique Officielle</div>
                    <p style="margin-bottom: 20px;">S√©lectionnez un ou plusieurs produits</p>
                    <div class="product-grid" id="boutique-grid">
                        <!-- Les produits WooCommerce seront charg√©s ici dynamiquement -->
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.2); border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Produits s√©lectionn√©s:</span>
                            <strong id="nbProduits">0</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Total:</span>
                            <strong id="totalBoutique" style="color: #4ade80; font-size: 20px;">0.00 ‚Ç¨</strong>
                        </div>
                    </div>
                    <button class="btn" onclick="payerBoutique()" style="margin-top: 15px;">üí≥ Payer (choisir moyen)</button>
                    <button class="btn" onclick="payerBoutiqueBNPL()" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üí≥ Payer en 3x/4x/6x (BNPL)</button>
                </div>
            </div>

            <!-- CONTENU TAB: VENTES FAN ARTICLES -->
            <div class="boutique-content" id="boutique-fan-articles" style="display: none;">
                <div class="card">
                    <div class="card-title">üë§ Ventes Fan-to-Fan - Articles</div>
                    <p style="margin-bottom: 20px;">Articles d'occasion vendus par des fans</p>
                    <div class="product-grid">
                        <div class="product-card" style="position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                                ‚úì V√©rifi√©
                            </div>
                            <div class="product-img" style="font-size: 60px;">üß£</div>
                            <div class="product-name">√âcharpe Vintage 1993</div>
                            <div style="font-size: 11px; opacity: 0.7; margin: 5px 0;">Saison Ligue des Champions</div>
                            <div style="font-size: 12px; color: #60a5fa; margin: 5px 0;">Vendu par: @JeanMarseille</div>
                            <div class="product-price">45 ‚Ç¨</div>
                            <div style="font-size: 10px; opacity: 0.6; margin-top: 5px;">√âtat: Excellent | Ann√©e: 1993</div>
                        </div>
                        <div class="product-card" style="position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                                ‚úì V√©rifi√©
                            </div>
                            <div class="product-img" style="font-size: 60px;">üëï</div>
                            <div class="product-name">Maillot Drogba 2003</div>
                            <div style="font-size: 11px; opacity: 0.7; margin: 5px 0;">Collector #11 Floqu√©</div>
                            <div style="font-size: 12px; color: #60a5fa; margin: 5px 0;">Vendu par: @OMCollector</div>
                            <div class="product-price">280 ‚Ç¨</div>
                            <div style="font-size: 10px; opacity: 0.6; margin-top: 5px;">√âtat: Neuf | √âdition limit√©e</div>
                        </div>
                        <div class="product-card" style="position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold;">
                                ‚úì V√©rifi√©
                            </div>
                            <div class="product-img" style="font-size: 60px;">üß¢</div>
                            <div class="product-name">Casquette R√©tro OM</div>
                            <div style="font-size: 11px; opacity: 0.7; margin: 5px 0;">Collection 1998</div>
                            <div style="font-size: 12px; color: #60a5fa; margin: 5px 0;">Vendu par: @FanOMPure</div>
                            <div class="product-price">32 ‚Ç¨</div>
                            <div style="font-size: 10px; opacity: 0.6; margin-top: 5px;">√âtat: Tr√®s bon | Rare</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- ABONNEMENT -->
        <div class="section" id="abonnement">
            <div class="card">
                <div class="card-title">üìÖ Abonnements & Pass</div>
                <div class="product-grid">
                    <div class="product-card" onclick="acheterAbonnement('Pass Mensuel', 29.90)">
                        <div class="product-img">üé´</div>
                        <div class="product-name">Pass Mensuel</div>
                        <div class="product-price">29.90 ‚Ç¨/mois</div>
                        <div style="font-size: 11px; margin-top: 5px; opacity: 0.8;">Acc√®s tous les matchs</div>
                    </div>
                    <div class="product-card" onclick="acheterAbonnement('Pass Annuel', 299.00)">
                        <div class="product-img">üéüÔ∏è</div>
                        <div class="product-name">Pass Annuel</div>
                        <div class="product-price">299.00 ‚Ç¨/an</div>
                        <div style="font-size: 11px; margin-top: 5px; opacity: 0.8;">-20% vs mensuel</div>
                    </div>
                    <div class="product-card" onclick="acheterAbonnement('VIP Platinum', 1999.00)">
                        <div class="product-img">üëë</div>
                        <div class="product-name">VIP Platinum</div>
                        <div class="product-price">1999.00 ‚Ç¨/an</div>
                        <div style="font-size: 11px; margin-top: 5px; opacity: 0.8;">Acc√®s loges</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PARTENAIRES -->
        <div class="section" id="partenaires">
            <div class="card">
                <div class="card-title">ü§ù Partenaires avec Cashback</div>
                <p style="margin-bottom: 20px;">Choisissez votre partenaire pour voir le menu</p>
                <div style="display: grid; gap: 15px;">
                    <div onclick="ouvrirMenuPartenaire('McDonald\\'s', 5)" style="background: rgba(255, 193, 7, 0.2); padding: 20px; border-radius: 15px; cursor: pointer;">
                        <div style="font-size: 40px; margin-bottom: 10px;">üçî</div>
                        <div style="font-weight: bold; font-size: 18px;">McDonald's</div>
                        <div style="color: #4ade80; font-weight: bold; margin-top: 5px;">Cashback 5%</div>
                    </div>
                    <div onclick="ouvrirMenuPartenaire('Carrefour', 3)" style="background: rgba(0, 82, 204, 0.2); padding: 20px; border-radius: 15px; cursor: pointer;">
                        <div style="font-size: 40px; margin-bottom: 10px;">üõí</div>
                        <div style="font-weight: bold; font-size: 18px;">Carrefour</div>
                        <div style="color: #4ade80; font-weight: bold; margin-top: 5px;">Cashback 3%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AFRIQUE (OM UNIQUEMENT) -->
        <div class="section" id="afrique" style="display: none;">
            <!-- HERO AFRIQUE -->
            <div class="card" style="background: linear-gradient(135deg, #0052a5, #00b4d8); padding: 0; text-align: center; overflow: hidden; position: relative;">
                <!-- Image Aubameyang en arri√®re-plan -->
                <div style="position: relative; min-height: 500px;">
                    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0, 82, 165, 0.3) 0%, rgba(0, 82, 165, 0.85) 100%);"></div>
                    <img src="https://www.genspark.ai/api/files/s/mRvbluWz" 
                         alt="Pierre-Emerick Aubameyang - OM" 
                         style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center top;" 
                         onerror="this.style.display='none'; console.log('Image Aubameyang non charg√©e')">
                    
                    <!-- OM AFRICA en haut √† gauche -->
                    <div style="position: absolute; top: 20px; left: 25px; z-index: 2; text-align: left;">
                        <h2 style="font-size: 32px; font-weight: bold; margin: 0; text-shadow: 3px 3px 15px rgba(0,0,0,0.9);">OM AFRICA</h2>
                    </div>
                    
                    <!-- Textes en bas -->
                    <div style="position: absolute; bottom: 40px; left: 0; right: 0; z-index: 1; text-align: center; padding: 0 20px;">
                        <p style="font-size: 18px; opacity: 0.9; text-shadow: 2px 2px 10px rgba(0,0,0,0.9); font-style: italic; margin-bottom: 25px;">"Fiers d'√™tre Marseillais, fiers d'√™tre Africains"</p>
                        <div style="padding: 12px 25px; background: rgba(0,0,0,0.5); border-radius: 25px; display: inline-block; backdrop-filter: blur(10px);">
                            <div style="font-size: 15px; font-weight: bold;">üá¨üá¶ Pierre-Emerick Aubameyang</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- PANIER FLOTTANT -->
            <div id="cart-floating" style="position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #10b981, #059669); padding: 15px 20px; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4); z-index: 1000; display: none;" onclick="openCart()">
                <span style="font-size: 24px;">üõí</span>
                <span id="cart-count" style="position: absolute; top: 5px; right: 5px; background: #ef4444; color: white; font-size: 12px; font-weight: bold; padding: 2px 6px; border-radius: 50%; min-width: 20px; text-align: center;">0</span>
                <span style="margin-left: 10px; font-weight: bold;">Panier</span>
            </div>

            <!-- CARTES CO-BRAND√âES -->
            <div class="card">
                <div class="card-title">üí≥ Cartes OM Africa x PaieCashFan</div>
                <div id="cartes-afrique-container" style="display: flex; gap: 30px; flex-wrap: wrap; align-items: flex-start;">
                    <!-- Carte Standard -->
                    <div style="position: relative; height: 220px; border-radius: 20px; overflow: hidden; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.3);" onclick="acheterCarteAfrique('carte-standard')">
                        <!-- Image de fond Aubameyang -->
                        <img src="https://www.genspark.ai/api/files/s/mRvbluWz" 
                             alt="Aubameyang" 
                             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center;">
                        <!-- Overlay gradient -->
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(0, 82, 165, 0.85), rgba(0, 180, 216, 0.85));"></div>
                        
                        <!-- Contenu de la carte -->
                        <div style="position: relative; z-index: 1; padding: 20px; height: 100%; display: flex; flex-direction: column; justify-content: space-between;">
                            <!-- En-t√™te : Cartes OM √† gauche, x PaieCash √† droite -->
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div style="text-align: left;">
                                    <div style="font-size: 18px; font-weight: bold; text-shadow: 2px 2px 5px rgba(0,0,0,0.8);">Cartes OM</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 16px; font-weight: bold; text-shadow: 2px 2px 5px rgba(0,0,0,0.8);">x PaieCash</div>
                                </div>
                            </div>
                            
                            <!-- Centre : Type de carte -->
                            <div style="text-align: center;">
                                <div style="font-size: 24px; font-weight: bold; text-shadow: 2px 2px 8px rgba(0,0,0,0.9); margin-bottom: 5px;">STANDARD</div>
                                <div style="font-size: 20px; font-weight: bold; color: #4ade80; text-shadow: 2px 2px 5px rgba(0,0,0,0.8);">GRATUITE</div>
                            </div>
                            
                            <!-- Bas : Mastercard √† droite -->
                            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                                <div style="font-size: 11px; opacity: 0.9;">
                                    <div>‚úÖ +2% cashback OM</div>
                                    <div>‚úÖ Accept√©e partout</div>
                                </div>
                                <div style="background: white; padding: 5px 12px; border-radius: 8px;">
                                    <div style="color: #000; font-weight: bold; font-size: 14px;">Mastercard</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Carte Premium -->
                    <div style="position: relative; height: 220px; border-radius: 20px; overflow: hidden; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.3);" onclick="acheterCarteAfrique('carte-premium')">
                        <!-- Image de fond Aubameyang -->
                        <img src="https://www.genspark.ai/api/files/s/mRvbluWz" 
                             alt="Aubameyang" 
                             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center;">
                        <!-- Overlay gradient dor√© -->
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(255, 215, 0, 0.75), rgba(0, 82, 165, 0.85));"></div>
                        
                        <!-- Contenu de la carte -->
                        <div style="position: relative; z-index: 1; padding: 20px; height: 100%; display: flex; flex-direction: column; justify-content: space-between;">
                            <!-- En-t√™te : Cartes OM √† gauche, x PaieCash √† droite -->
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div style="text-align: left;">
                                    <div style="font-size: 18px; font-weight: bold; text-shadow: 2px 2px 5px rgba(0,0,0,0.8);">Cartes OM</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 16px; font-weight: bold; text-shadow: 2px 2px 5px rgba(0,0,0,0.8);">x PaieCash</div>
                                </div>
                            </div>
                            
                            <!-- Centre : Type de carte -->
                            <div style="text-align: center;">
                                <div style="font-size: 24px; font-weight: bold; text-shadow: 2px 2px 8px rgba(0,0,0,0.9); margin-bottom: 5px;">PREMIUM üíé</div>
                                <div style="font-size: 18px; font-weight: bold; color: #fef3c7; text-shadow: 2px 2px 5px rgba(0,0,0,0.8);">1 970 FCFA</div>
                            </div>
                            
                            <!-- Bas : Mastercard √† droite -->
                            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                                <div style="font-size: 11px; opacity: 0.9;">
                                    <div>‚úÖ +5% cashback OM</div>
                                    <div>‚úÖ Priorit√© billetterie</div>
                                </div>
                                <div style="background: white; padding: 5px 12px; border-radius: 8px;">
                                    <div style="color: #000; font-weight: bold; font-size: 14px;">Mastercard</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- BOUTON EXEMPLES 3 JOUEURS AFRICAINS -->
                <div style="text-align: center; margin-top: 30px;">
                    <a href="cartes-hakimi.html" 
                       target="_blank"
                       style="display: inline-block; background: linear-gradient(135deg, #4ade80, #3b82f6); color: white; padding: 15px 40px; border-radius: 12px; font-size: 18px; font-weight: bold; text-decoration: none; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: transform 0.3s;"
                       onmouseover="this.style.transform='scale(1.05)'"
                       onmouseout="this.style.transform='scale(1)'">
                        üåç Voir 3 Exemples de Cartes Joueurs Africains
                    </a>
                    <div style="font-size: 14px; color: rgba(255,255,255,0.7); margin-top: 10px;">
                        Aubameyang (OM) ‚Ä¢ Hakimi (PSG) ‚Ä¢ P√©p√© (RC Lens)
                    </div>
                </div>
            </div>

            <!-- PACKS FAN OM CI -->
            <div class="card">
                <div class="card-title">üéÅ Packs Fan OM C√¥te d'Ivoire</div>
                <div id="packs-afrique-container" style="display: grid; gap: 15px;">
                    <!-- Pack Starter -->
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; position: relative;">
                        <div style="font-size: 36px; margin-bottom: 10px;">üéÅ</div>
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Pack Fan OM CI - Starter</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">Pack de d√©marrage pour nouveaux fans</div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                            <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">Contenu du pack :</div>
                            <div style="font-size: 11px; margin: 5px 0;">üí≥ Carte OM Africa Standard (gratuite)</div>
                            <div style="font-size: 11px; margin: 5px 0;">üëï T-shirt OM Africa</div>
                            <div style="font-size: 11px; margin: 5px 0;">üîë Porte-cl√© OM</div>
                            <div style="font-size: 11px; margin: 5px 0;">üí∞ 10‚Ç¨ cashback offert</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 24px; font-weight: bold; color: #4ade80;">16 400 FCFA</div>
                                <div style="font-size: 11px; opacity: 0.8;">25 EUR</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 11px; font-weight: bold;">
                                √âconomie: 12‚Ç¨
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pack Premium -->
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; position: relative;">
                        <div style="font-size: 36px; margin-bottom: 10px;">üéÅ</div>
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Pack Fan OM CI - Premium</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">Pack complet pour vrais supporters</div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                            <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">Contenu du pack :</div>
                            <div style="font-size: 11px; margin: 5px 0;">üíé Carte OM Africa Premium</div>
                            <div style="font-size: 11px; margin: 5px 0;">üëö Maillot Lifestyle OM</div>
                            <div style="font-size: 11px; margin: 5px 0;">üß¢ Casquette OM</div>
                            <div style="font-size: 11px; margin: 5px 0;">üëú Sac OM</div>
                            <div style="font-size: 11px; margin: 5px 0;">üîë Porte-cl√© OM</div>
                            <div style="font-size: 11px; margin: 5px 0;">üí∞ 25‚Ç¨ cashback offert</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 24px; font-weight: bold; color: #4ade80;">36 080 FCFA</div>
                                <div style="font-size: 11px; opacity: 0.8;">55 EUR</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 11px; font-weight: bold;">
                                √âconomie: 30‚Ç¨
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pack Collector -->
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; position: relative;">
                        <div style="position: absolute; top: 10px; right: 10px; background: #ef4444; padding: 5px 10px; border-radius: 20px; font-size: 10px; font-weight: bold;">√âDITION LIMIT√âE</div>
                        <div style="font-size: 36px; margin-bottom: 10px;">üèÜ</div>
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Pack Fan OM CI - Collector</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">Edition limit√©e C√¥te d'Ivoire</div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                            <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">Contenu du pack :</div>
                            <div style="font-size: 11px; margin: 5px 0;">üíé Carte OM Africa Premium M√©tal</div>
                            <div style="font-size: 11px; margin: 5px 0;">üëö Maillot OM x CI Exclusif</div>
                            <div style="font-size: 11px; margin: 5px 0;">üß¢ Casquette Edition limit√©e</div>
                            <div style="font-size: 11px; margin: 5px 0;">üëú Sac collector</div>
                            <div style="font-size: 11px; margin: 5px 0;">üéí Sac √† dos OM</div>
                            <div style="font-size: 11px; margin: 5px 0;">üì± Coque t√©l√©phone</div>
                            <div style="font-size: 11px; margin: 5px 0;">üí∞ 50‚Ç¨ cashback offert</div>
                            <div style="font-size: 11px; margin: 5px 0;">üéüÔ∏è 1 ticket match offert (sous conditions)</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 24px; font-weight: bold; color: #4ade80;">58 400 FCFA</div>
                                <div style="font-size: 11px; opacity: 0.8;">89 EUR</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 11px; font-weight: bold;">
                                √âconomie: 60‚Ç¨
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MERCHANDISING PRIORITAIRE -->
            <div class="card">
                <div class="card-title">üëï Textile Accessible (5 000 - 15 000 FCFA)</div>
                <div id="textile-afrique-container" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <!-- T-shirt 1 -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üëï</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">T-shirt OM Africa Edition</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Logo OM + mention "OM Africa" - Blanc</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">9 850 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">15 EUR</div>
                    </div>
                    
                    <!-- T-shirt 2 -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üëï</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">T-shirt OM C√¥te d'Ivoire</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Logo OM + drapeau CI stylis√© - Edition exclusive</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">11 820 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">18 EUR</div>
                        <div style="margin-top: 8px; background: #ef4444; padding: 3px 8px; border-radius: 10px; font-size: 10px; display: inline-block;">EXCLUSIF AFRIQUE</div>
                    </div>
                    
                    <!-- Casquette -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üß¢</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Casquette OM Africa</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Casquette officielle OM Africa - Tr√®s forte demande</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">7 875 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">12 EUR</div>
                    </div>
                    
                    <!-- Maillot -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üëö</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Maillot Lifestyle OM Street</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Version "street" fans - PAS le maillot officiel</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">16 400 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">25 EUR</div>
                    </div>
                </div>
            </div>

            <!-- ACCESSOIRES -->
            <div class="card">
                <div class="card-title">üõçÔ∏è Accessoires du Quotidien</div>
                <div id="accessoires-afrique-container" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <!-- Sac -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üëú</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Sac OM Africa</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Sac / tote bag officiel</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">6 560 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">10 EUR</div>
                    </div>
                    
                    <!-- Bonnet -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üß¢</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Bonnet OM</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Bonnet officiel OM</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">5 250 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">8 EUR</div>
                    </div>
                    
                    <!-- Coque -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üì±</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Coque t√©l√©phone OM</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Coque iPhone/Android - Logo OM</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">7 875 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">12 EUR</div>
                    </div>
                    
                    <!-- Porte-cl√©s -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üîë</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Porte-cl√©s OM</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Porte-cl√©s officiel OM</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">3 280 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">5 EUR</div>
                    </div>
                    
                    <!-- Sac √† dos -->
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">üéí</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Sac √† dos scolaire OM</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">Parfait pour les jeunes & √©tudiants</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">16 400 FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">25 EUR</div>
                    </div>
                </div>
            </div>

            <!-- COLLECTION EXCLUSIVE AFRIQUE -->
            <div class="card">
                <div class="card-title">‚≠ê Collection Afrique Exclusive</div>
                <p style="font-size: 13px; opacity: 0.8; margin-bottom: 15px;">Ces produits n'existent pas en Europe - Valeur √©motionnelle tr√®s forte</p>
                <div id="exclusive-afrique-container" style="display: grid; gap: 15px;">
                    <!-- Exclusif 1 -->
                    <div style="background: linear-gradient(135deg, #f97316, #ea580c); padding: 20px; border-radius: 15px; cursor: pointer; position: relative;">
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.3); padding: 5px 12px; border-radius: 20px; font-size: 10px; font-weight: bold;">‚≠ê EXCLUSIF</div>
                        <div style="font-size: 56px; text-align: center; margin-bottom: 10px;">üëï</div>
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 8px; text-align: center;">T-shirt OM x C√¥te d'Ivoire</div>
                        <div style="font-size: 12px; opacity: 0.9; margin-bottom: 15px; text-align: center;">OM üá´üá∑ + üá®üáÆ drapeau stylis√© - "Fiers d'√™tre Marseillais, fiers d'√™tre Africains"</div>
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #fef3c7;">14 430 FCFA</div>
                            <div style="font-size: 12px; opacity: 0.8;">22 EUR</div>
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 10px; font-size: 11px; text-align: center;">
                            üéÅ Cashback +7% sur ce produit
                        </div>
                    </div>
                    
                    <!-- Exclusif 2 -->
                    <div style="background: linear-gradient(135deg, #f97316, #ea580c); padding: 20px; border-radius: 15px; cursor: pointer; position: relative;">
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.3); padding: 5px 12px; border-radius: 20px; font-size: 10px; font-weight: bold;">‚≠ê EXCLUSIF</div>
                        <div style="font-size: 56px; text-align: center; margin-bottom: 10px;">üëö</div>
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 8px; text-align: center;">Maillot OM Passion Afrique</div>
                        <div style="font-size: 12px; opacity: 0.9; margin-bottom: 15px; text-align: center;">"OM ‚Äì Passion sans fronti√®res" - Collection unique</div>
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #fef3c7;">22 960 FCFA</div>
                            <div style="font-size: 12px; opacity: 0.8;">35 EUR</div>
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 10px; font-size: 11px; text-align: center;">
                            üéÅ Cashback +7% sur ce produit
                        </div>
                    </div>
                </div>
            </div>

            <!-- ACTIVATIONS LOCALES -->
            <div class="card">
                <div class="card-title">üìç Activations Locales - C√¥te d'Ivoire</div>
                <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                    <p style="font-size: 14px; font-weight: bold; margin-bottom: 10px;">üè™ Pop-up Stores √† venir :</p>
                    <ul style="list-style: none; padding: 0; font-size: 13px; opacity: 0.9;">
                        <li style="padding: 5px 0;">üìç <strong>Abidjan</strong> (Plateau, Cocody, Yopougon)</li>
                        <li style="padding: 5px 0;">üìç <strong>Bouak√©</strong> (Centre-ville)</li>
                        <li style="padding: 5px 0;">üìç <strong>Yamoussoukro</strong> (Centre)</li>
                    </ul>
                </div>
                <div style="background: linear-gradient(135deg, #10b981, #059669); padding: 20px; border-radius: 15px; margin-top: 15px;">
                    <p style="font-size: 18px; font-weight: bold; margin-bottom: 15px;">üéâ Fan Zones lors des gros matchs OM</p>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 10px;">üèüÔ∏è Qu'est-ce qu'une Fan Zone ?</div>
                        <div style="font-size: 12px; opacity: 0.95; line-height: 1.6;">
                            Espaces d√©di√©s aux supporters OM en Afrique lors des grands matchs :<br>
                            ‚Ä¢ üì∫ √âcrans g√©ants HD<br>
                            ‚Ä¢ üçî Nourriture & boissons<br>
                            ‚Ä¢ üéÅ Animations & cadeaux<br>
                            ‚Ä¢ üëï Merchandising exclusif<br>
                            ‚Ä¢ üé§ Ambiance garantie !
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 10px; color: #fef3c7;">üí≥ Paiement EXCLUSIF PaieCashFan</div>
                        <div style="font-size: 12px; opacity: 0.95; line-height: 1.6;">
                            ‚úÖ Payez uniquement avec votre <strong>Carte PaieCash OM</strong><br>
                            üéÅ Carte OM <strong>OFFERTE</strong> (Standard) ou √† <strong>prix r√©duit</strong> (Premium)<br>
                            üîÑ Rechargez via Orange Money, Wave, MTN, Moov<br>
                            üí∞ Cashback imm√©diat sur tous vos achats
                        </div>
                    </div>
                </div>
            </div>

            <!-- MOYENS DE PAIEMENT OM AFRIQUE -->
            <div class="card">
                <div class="card-title">üí∞ Comment Payer ? (Afrique & Europe)</div>
                
                <!-- STABLECOIN DYNAMIQUE -->
                <div id="stablecoin-section"></div>
                <script>
                    (function() {
                        const stablecoin = getClubStablecoin();
                        const currentClub = getCurrentClub();
                        const clubName = currentClub.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                        
                        const stablecoinHTML = `
                            <div style="background: linear-gradient(135deg, ${stablecoin.colors[0]}, ${stablecoin.colors[1]}); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">${stablecoin.emoji}</div>
                                <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">${stablecoin.name} (${stablecoin.code}) - Stablecoin Officiel</div>
                                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">1 ${stablecoin.code} = 1 EUR = 655.96 FCFA</div>
                                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">‚úÖ Avantages:</div>
                                    <div style="font-size: 11px; margin: 5px 0;">‚Ä¢ Cashback +10% sur achats ${clubName}</div>
                                    <div style="font-size: 11px; margin: 5px 0;">‚Ä¢ Transactions instantan√©es</div>
                                    <div style="font-size: 11px; margin: 5px 0;">‚Ä¢ Frais r√©duits (0.5%)</div>
                                    <div style="font-size: 11px; margin: 5px 0;">‚Ä¢ Utilisable partout dans l'√©cosyst√®me ${clubName}</div>
                                </div>
                            </div>
                        `;
                        
                        document.getElementById('stablecoin-section').innerHTML = stablecoinHTML;
                    })();
                </script>

                <!-- MOBILE MONEY AFRIQUE -->
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: bold; margin-bottom: 15px;">üì± Mobile Money (Afrique)</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <!-- Orange Money -->
                        <div style="background: rgba(255, 140, 0, 0.2); border: 2px solid #ff8c00; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 5px;">üü†</div>
                            <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Orange Money</div>
                            <div style="font-size: 11px; opacity: 0.9;">Frais: 1% | Max: 2M FCFA</div>
                            <div style="font-size: 10px; margin-top: 5px;">üá®üáÆ üá∏üá≥ üá≤üá± üáßüá´ üá®üá≤ üá¨üá≥</div>
                        </div>

                        <!-- Wave -->
                        <div style="background: rgba(0, 120, 255, 0.2); border: 2px solid #0078ff; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 5px;">üíô</div>
                            <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Wave</div>
                            <div style="font-size: 11px; opacity: 0.9; color: #4ade80;">GRATUIT (0%) | Max: 5M FCFA</div>
                            <div style="font-size: 10px; margin-top: 5px;">üá®üáÆ üá∏üá≥ üá≤üá± üáßüá´ üáßüáØ</div>
                        </div>

                        <!-- MTN Mobile Money -->
                        <div style="background: rgba(255, 204, 0, 0.2); border: 2px solid #ffcc00; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 5px;">üü°</div>
                            <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">MTN Momo</div>
                            <div style="font-size: 11px; opacity: 0.9;">Frais: 1.5% | Max: 3M FCFA</div>
                            <div style="font-size: 10px; margin-top: 5px;">üá®üáÆ üá®üá≤ üá¨üá≠ üá≥üá¨ üá∫üá¨</div>
                        </div>

                        <!-- Moov Money -->
                        <div style="background: rgba(0, 80, 200, 0.2); border: 2px solid #0050c8; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 5px;">üîµ</div>
                            <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Moov Money</div>
                            <div style="font-size: 11px; opacity: 0.9;">Frais: 1.2% | Max: 2.5M FCFA</div>
                            <div style="font-size: 10px; margin-top: 5px;">üá®üáÆ üáßüáØ üáπüá¨ üáßüá´ üá≥üá™</div>
                        </div>
                    </div>
                </div>

                <!-- CARTES BANCAIRES -->
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: bold; margin-bottom: 15px;">üí≥ Cartes Bancaires (Europe & Afrique)</div>
                    <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
                        <div style="font-size: 13px; margin-bottom: 10px;">
                            <strong>‚úÖ Accept√©:</strong> Visa, Mastercard, Cartes CI/UEMOA
                        </div>
                        <div style="font-size: 12px; opacity: 0.9;">
                            ‚Ä¢ Europe: EUR (frais 2.9% + 0.30‚Ç¨)<br>
                            ‚Ä¢ Afrique: FCFA (frais 1.5%)<br>
                            ‚Ä¢ Paiement s√©curis√© 3D Secure
                        </div>
                    </div>
                </div>

                <!-- CARTE PAIECASH DYNAMIQUE -->
                <div id="carte-paiecash-section"></div>
                <script>
                    (function() {
                        const stablecoin = getClubStablecoin();
                        const currentClub = getCurrentClub();
                        const clubName = currentClub.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                        const clubAbbrev = clubName.split(' ').map(w => w[0]).join('');
                        
                        const carteHTML = `
                            <div style="background: linear-gradient(135deg, ${stablecoin.colors[0]}, ${stablecoin.colors[1]}); padding: 20px; border-radius: 15px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üíé</div>
                                <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Carte PaieCash ${clubAbbrev}</div>
                                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">Carte co-brand√©e incluse dans les packs & abonnements</div>
                                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">üîÑ Rechargeable par:</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ Orange Money, Wave, MTN, Moov</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ Carte Bancaire (Visa, Mastercard)</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ Virement SEPA (Europe)</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ ${stablecoin.code} (Stablecoin ${clubName})</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">üí≥ Incluse dans:</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ Tous les Packs Fan ${clubAbbrev}</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ Abonnement Fan ${clubName} (mensuel/annuel)</div>
                                    <div style="font-size: 11px; margin: 3px 0;">‚Ä¢ Ou achat s√©par√© (2 000 - 5 000 FCFA)</div>
                                </div>
                            </div>
                        `;
                        
                        document.getElementById('carte-paiecash-section').innerHTML = carteHTML;
                    })();
                </script>
            </div>

            <!-- INTERFACE DE PAIEMENT INTERACTIVE -->
            <div class="card">
                <div class="card-title">üõí Simulez un paiement</div>
                <div id="payment-intro"></div>
                <script>
                    (function() {
                        const currentClub = getCurrentClub();
                        const clubName = currentClub.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                        document.getElementById('payment-intro').innerHTML = `<p style="font-size: 13px; opacity: 0.8; margin-bottom: 20px;">Choisissez votre moyen de paiement pr√©f√©r√© pour acheter un produit ${clubName}</p>`;
                    })();
                </script>
                
                <!-- Montant √† payer -->
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <div style="font-size: 14px; font-weight: bold; margin-bottom: 10px;">Montant √† payer:</div>
                    <div style="font-size: 28px; font-weight: bold; color: #4ade80;">16 400 FCFA <span style="font-size: 16px; opacity: 0.7;">(25 EUR)</span></div>
                    <div id="payment-pack-name"></div>
                    <script>
                        (function() {
                            const currentClub = getCurrentClub();
                            const clubAbbrev = currentClub.split('-').map(w => w[0].toUpperCase()).join('');
                            document.getElementById('payment-pack-name').innerHTML = `<div style="font-size: 12px; opacity: 0.7; margin-top: 5px;">Pack Fan ${clubAbbrev} - Starter</div>`;
                        })();
                    </script>
                </div>
                
                <!-- S√©lection moyen de paiement -->
                <div style="font-size: 14px; font-weight: bold; margin-bottom: 15px;">Choisissez votre moyen de paiement:</div>
                <div style="display: grid; gap: 12px; margin-bottom: 20px;">
                    <!-- STABLECOIN DYNAMIQUE -->
                    <div id="payment-stablecoin-option"></div>
                    <script>
                        (function() {
                            const stablecoin = getClubStablecoin();
                            const stablecoinHTML = `
                                <div onclick="selectPaymentMethod('stablecoin')" id="payment-stablecoin" style="background: linear-gradient(135deg, ${stablecoin.colors[0]}, ${stablecoin.colors[1]}); padding: 15px; border-radius: 10px; cursor: pointer; border: 3px solid transparent; transition: all 0.3s;">
                                    <div style="display: flex; align-items: center; justify-content: space-between;">
                                        <div style="display: flex; align-items: center; gap: 12px;">
                                            <div style="font-size: 32px;">${stablecoin.emoji}</div>
                                            <div>
                                                <div style="font-size: 15px; font-weight: bold;">${stablecoin.name} (${stablecoin.code})</div>
                                                <div style="font-size: 11px; opacity: 0.9;">Cashback +10% | Instantan√©</div>
                                            </div>
                                        </div>
                                        <div style="font-size: 20px;">‚≠ê</div>
                                    </div>
                                </div>
                            `;
                            document.getElementById('payment-stablecoin-option').innerHTML = stablecoinHTML;
                        })();
                    </script>
                    
                    <!-- Orange Money -->
                    <div onclick="selectPaymentMethod('orange')" id="payment-orange" style="background: rgba(255, 140, 0, 0.2); border: 2px solid #ff8c00; padding: 15px; border-radius: 10px; cursor: pointer; transition: all 0.3s;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 32px;">üü†</div>
                                <div>
                                    <div style="font-size: 15px; font-weight: bold;">Orange Money</div>
                                    <div style="font-size: 11px; opacity: 0.9;">Frais: 1% | üá®üáÆ üá∏üá≥ üá≤üá± üáßüá´</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Wave -->
                    <div onclick="selectPaymentMethod('wave')" id="payment-wave" style="background: rgba(0, 120, 255, 0.2); border: 2px solid #0078ff; padding: 15px; border-radius: 10px; cursor: pointer; transition: all 0.3s;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 32px;">üíô</div>
                                <div>
                                    <div style="font-size: 15px; font-weight: bold;">Wave</div>
                                    <div style="font-size: 11px; opacity: 0.9; color: #4ade80;">GRATUIT (0%) | üá®üáÆ üá∏üá≥ üá≤üá±</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Carte Bancaire -->
                    <div onclick="selectPaymentMethod('card')" id="payment-card" style="background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); padding: 15px; border-radius: 10px; cursor: pointer; transition: all 0.3s;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 32px;">üí≥</div>
                                <div>
                                    <div style="font-size: 15px; font-weight: bold;">Carte Bancaire</div>
                                    <div style="font-size: 11px; opacity: 0.9;">Visa, Mastercard | Europe & Afrique</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bouton de paiement -->
                <button onclick="processPayment()" style="width: 100%; padding: 15px; background: linear-gradient(135deg, #10b981, #059669); border: none; border-radius: 10px; color: white; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                    üí∞ Payer maintenant
                </button>
                
                <!-- Message de confirmation -->
                <div id="payment-result" style="margin-top: 20px; padding: 15px; border-radius: 10px; display: none;"></div>
            </div>

            <!-- AVANTAGES OM AFRICA -->
            <div class="card" style="background: linear-gradient(135deg, #1e3c72, #2a5298);">
                <div class="card-title">üéØ Vos Avantages OM Africa</div>
                <ul style="list-style: none; padding: 0; font-size: 14px;">
                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <strong>Cashback +3%</strong> sur tous les produits OM
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <strong>Cashback +7%</strong> sur produits Africa exclusifs
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <strong>10‚Ç¨ offerts</strong> premier achat
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <strong>Priorit√© billetterie</strong> (carte premium)
                    </li>
                    <li style="padding: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <strong>Acc√®s √©v√©nements exclusifs</strong>
                    </li>
                </ul>
            </div>
        </div>

        <!-- PROFIL -->
        <div class="section" id="profil">
            <div class="card">
                <div class="card-title">üë§ Mon Profil</div>
                <p style="margin-bottom: 10px;"><strong>Nom :</strong> ETOT Constantin Nicolas</p>
                <p style="margin-bottom: 10px;"><strong>Email :</strong> etot@paiecash.com</p>
                <p style="margin-bottom: 10px;"><strong>Niveau :</strong> Platine üíé</p>
                <p style="margin-bottom: 10px;"><strong>Points :</strong> 4,250</p>
            </div>
            <div class="card">
                <div class="card-title">‚öôÔ∏è Param√®tres</div>
                <button class="btn">üîî Notifications</button>
                <button class="btn btn-secondary">üîí S√©curit√©</button>
            </div>
            
            <div class="card">
                <div class="card-title">üìö Aide & Support</div>
                <button class="btn" onclick="window.location.href='onboarding.html?force=true'">üìñ Guide de d√©marrage</button>
                <button class="btn btn-secondary" onclick="window.location.href='support.html'">üí¨ Support & FAQ</button>
            </div>
            
            <div class="card">
                <div class="card-title">üåê S√©lecteur de Langue</div>
                <p style="margin-bottom: 15px; font-size: 14px; opacity: 0.8;">Choisissez votre langue pr√©f√©r√©e. La d√©tection automatique par g√©olocalisation est activ√©e.</p>
                <div id="selecteurLangue">
                    <!-- Le s√©lecteur sera g√©n√©r√© dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">√ó</span>
            <div class="modal-title" id="modalTitle"></div>
            <div id="modalBody"></div>
        </div>
    </div>
    
    <!-- MODAL PANIER & CHECKOUT -->
    <div class="modal" id="cart-modal" style="display: none;">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close-btn" onclick="closeCart()">√ó</span>
            <div class="modal-title" id="cart-modal-title">üõí Mon Panier</div>
            <div id="cart-modal-body"></div>
        </div>
    </div>

    <!-- INT√âGRATION WOOCOMMERCE -->
    <script src="woocommerce-integration.js"></script>
    
    <!-- PRODUITS PHARES (e-SIM + Mastercard) -->
    <script src="üèÜ_PRODUITS_PHARES_CLUBS.js"></script>
    
    <!-- SCRAPER PRODUITS CLUBS -->
    <script src="üõçÔ∏è_SCRAPER_PRODUITS_CLUBS.js"></script>
    
    <!-- MULTI-LANGUES I18N -->
    <script src="üåç_MULTI_LANGUES_I18N.js"></script>
    
    <!-- NOWPAYMENTS (Paiement Crypto) -->
    <script src="üí∞_nowpayments-integration.js"></script>
    
    <!-- OM AFRIQUE FRANCHISE -->
    <script src="om-afrique-franchise.js"></script>
<script src="üí∞_paiements-om-afrique.js"></script>

    <script>
        // √âTAT GLOBAL
        let state = {
            wallet: 625.00,
            carte: 622.50,
            cashback: 37.20,
            usdc: 847.30,
            omcoin: 2450,
            pscoin: 150,
            olcoin: 75,
            ascoin: 50,
            lscoin: 100,
            rclcoin: 80,
            produitsSelectionnes: [],
            transactions: [], // Historique des transactions temps r√©el
            filtreTransaction: 'toutes' // Filtre actif
        };

        // MAP DES STABLECOINS PAR CLUB
        const clubStablecoins = {
            'olympique-de-marseille': { code: 'OMC', balance: 2450, name: 'OM Coin', emoji: 'üîµ‚ö™', colors: ['#0052a5', '#00b4d8'] },
            'paris-saint-germain': { code: 'PSC', balance: 150, name: 'PSG Coin', emoji: 'üî¥üîµ', colors: ['#004170', '#E1000F'] },
            'olympique-lyonnais': { code: 'OLC', balance: 75, name: 'OL Coin', emoji: 'üî¥üîµ', colors: ['#DA020E', '#01499D'] },
            'as-monaco': { code: 'ASC', balance: 50, name: 'AS Monaco Coin', emoji: 'üî¥‚ö™', colors: ['#CE1126', '#ffffff'] },
            'losc-lille': { code: 'LSC', balance: 100, name: 'LOSC Coin', emoji: 'üî¥‚ö™', colors: ['#D2122E', '#ffffff'] },
            'rc-lens': { code: 'RCL', balance: 80, name: 'RC Lens Coin', emoji: 'üü°üî¥', colors: ['#FFC627', '#D2122E'] },
            'sco-angers': { code: 'ANC', balance: 120, name: 'Angers Coin', emoji: '‚ö´‚ö™', colors: ['#000000', '#ffffff'] },
            'stade-rennais': { code: 'SRC', balance: 90, name: 'Rennes Coin', emoji: 'üî¥‚ö´', colors: ['#DA0812', '#000000'] },
            'ogc-nice': { code: 'ONC', balance: 110, name: 'Nice Coin', emoji: 'üî¥‚ö´', colors: ['#ED1C24', '#000000'] },
            'arsenal-fc': { code: 'AFC', balance: 200, name: 'Arsenal Coin', emoji: 'üî¥‚ö™', colors: ['#EF0107', '#ffffff'] },
            'liverpool-fc': { code: 'LFC', balance: 180, name: 'Liverpool Coin', emoji: 'üî¥', colors: ['#C8102E', '#00B2A9'] },
            'bayern-munich': { code: 'BMC', balance: 220, name: 'Bayern Coin', emoji: 'üî¥üîµ', colors: ['#DC052D', '#0066B2'] },
            'real-madrid': { code: 'RMC', balance: 250, name: 'Real Madrid Coin', emoji: '‚ö™üü°', colors: ['#FEBE10', '#00529F'] },
            'galatasaray': { code: 'GSC', balance: 300, name: 'Galatasaray Coin', emoji: 'üü°üî¥', colors: ['#FDB913', '#D2122E'] },
            'fenerbahce': { code: 'FBC', balance: 280, name: 'Fenerbah√ße Coin', emoji: 'üü°üîµ', colors: ['#FFED00', '#00529F'] },
            'besiktas': { code: 'BJC', balance: 260, name: 'Be≈üikta≈ü Coin', emoji: '‚ö´‚ö™', colors: ['#000000', '#ffffff'] },
            'trabzonspor': { code: 'TBC', balance: 350, name: 'Trabzonspor Coin', emoji: 'üîµüü§', colors: ['#6e2142', '#9b3458'] }
        };

        // FONCTION POUR D√âTECTER LE CLUB ACTIF
        function getCurrentClub() {
            // 1. V√©rifier URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const clubParam = urlParams.get('club');
            if (clubParam) return clubParam.toLowerCase();

            // 2. V√©rifier localStorage
            const savedClub = localStorage.getItem('currentClub');
            if (savedClub) return savedClub;

            // 3. Par d√©faut : Olympique de Marseille
            return 'olympique-de-marseille';
        }

        // FONCTION POUR OBTENIR LE STABLECOIN DU CLUB ACTIF
        function getClubStablecoin() {
            const club = getCurrentClub();
            return clubStablecoins[club] || clubStablecoins['olympique-de-marseille'];
        }

        // PRODUITS BOUTIQUE
        const produitsBoutique = [
            { id: 1, nom: "Maillot Domicile", prix: 89.99, emoji: "üëï" },
            { id: 2, nom: "√âcharpe OM", prix: 19.99, emoji: "üß£" },
            { id: 3, nom: "Casquette", prix: 24.99, emoji: "üß¢" },
            { id: 4, nom: "Surv√™tement", prix: 129.99, emoji: "üèÉ" },
            { id: 5, nom: "Ballon Officiel", prix: 29.99, emoji: "‚öΩ" },
            { id: 6, nom: "Gourde OM", prix: 14.99, emoji: "üç∂" }
        ];

        // MENU MCDONALD'S
        const menuMcDonalds = [
            { id: 1, nom: "Big Mac Menu", prix: 9.50, emoji: "üçî" },
            { id: 2, nom: "McChicken Menu", prix: 8.90, emoji: "üçó" },
            { id: 3, nom: "Royal Deluxe Menu", prix: 10.50, emoji: "üëë" },
            { id: 4, nom: "Filet-O-Fish Menu", prix: 8.50, emoji: "üêü" },
            { id: 5, nom: "McFlurry", prix: 3.50, emoji: "üç¶" },
            { id: 6, nom: "Happy Meal", prix: 4.50, emoji: "üéÅ" }
        ];
        
        // ========== PRODUITS SCRAP√âS (INLINE) ==========
        // Fallback si le fichier externe n'est pas charg√©
        if (typeof getProduitsClub === 'undefined') {
            window.getProduitsClub = function(clubSlug, limite = 15) {
                const produitsOM = [
                    { id: 'om-1', nom: 'Maillot Domicile 2024/25', prix: 89.99, emoji: 'üëï', categorie: 'Maillots', disponible: true },
                    { id: 'om-2', nom: '√âcharpe OM Classique', prix: 19.99, emoji: 'üß£', categorie: 'Accessoires', disponible: true },
                    { id: 'om-3', nom: 'Surv√™tement Entra√Ænement', prix: 129.99, emoji: 'üèÉ', categorie: 'V√™tements', disponible: true },
                    { id: 'om-4', nom: 'Casquette OM', prix: 24.99, emoji: 'üß¢', categorie: 'Accessoires', disponible: true },
                    { id: 'om-5', nom: 'Ballon Officiel', prix: 29.99, emoji: '‚öΩ', categorie: 'Accessoires', disponible: true },
                    { id: 'om-6', nom: 'Maillot Ext√©rieur 2024/25', prix: 89.99, emoji: 'üëï', categorie: 'Maillots', disponible: true },
                    { id: 'om-7', nom: 'Gourde Isotherme OM', prix: 14.99, emoji: 'üç∂', categorie: 'Accessoires', disponible: true },
                    { id: 'om-8', nom: 'Sweat √† Capuche', prix: 69.99, emoji: 'üß•', categorie: 'V√™tements', disponible: true },
                    { id: 'om-9', nom: 'Short Domicile', prix: 39.99, emoji: 'ü©≥', categorie: 'V√™tements', disponible: true },
                    { id: 'om-10', nom: 'T-Shirt Logo', prix: 34.99, emoji: 'üëï', categorie: 'V√™tements', disponible: true },
                    { id: 'om-11', nom: 'Chaussettes Officielles', prix: 12.99, emoji: 'üß¶', categorie: 'Accessoires', disponible: true },
                    { id: 'om-12', nom: 'Sac √† Dos', prix: 44.99, emoji: 'üéí', categorie: 'Accessoires', disponible: true },
                    { id: 'om-13', nom: 'Drapeau G√©ant', prix: 29.99, emoji: 'üö©', categorie: 'Accessoires', disponible: true },
                    { id: 'om-14', nom: 'Porte-Cl√©s Premium', prix: 9.99, emoji: 'üîë', categorie: 'Accessoires', disponible: true },
                    { id: 'om-15', nom: 'Mug Collector', prix: 16.99, emoji: '‚òï', categorie: 'Accessoires', disponible: true }
                ];
                
                const produitsPSG = [
                    { id: 'psg-1', nom: 'Maillot Domicile 2024/25', prix: 99.99, emoji: 'üëï', categorie: 'Maillots', disponible: true },
                    { id: 'psg-2', nom: '√âcharpe PSG Paris', prix: 22.99, emoji: 'üß£', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-3', nom: 'Surv√™tement Premium', prix: 149.99, emoji: 'üèÉ', categorie: 'V√™tements', disponible: true },
                    { id: 'psg-4', nom: 'Casquette PSG', prix: 27.99, emoji: 'üß¢', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-5', nom: 'Ballon Jordan PSG', prix: 34.99, emoji: '‚öΩ', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-6', nom: 'Maillot Ext√©rieur 2024/25', prix: 99.99, emoji: 'üëï', categorie: 'Maillots', disponible: true },
                    { id: 'psg-7', nom: 'Gourde PSG Premium', prix: 17.99, emoji: 'üç∂', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-8', nom: 'Sweat Jordan x PSG', prix: 89.99, emoji: 'üß•', categorie: 'V√™tements', disponible: true },
                    { id: 'psg-9', nom: 'Short Domicile', prix: 44.99, emoji: 'ü©≥', categorie: 'V√™tements', disponible: true },
                    { id: 'psg-10', nom: 'T-Shirt Paris', prix: 39.99, emoji: 'üëï', categorie: 'V√™tements', disponible: true },
                    { id: 'psg-11', nom: 'Chaussettes Match', prix: 14.99, emoji: 'üß¶', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-12', nom: 'Sac √† Dos Jordan', prix: 59.99, emoji: 'üéí', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-13', nom: 'Drapeau PSG', prix: 32.99, emoji: 'üö©', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-14', nom: 'Porte-Cl√©s Jordan', prix: 12.99, emoji: 'üîë', categorie: 'Accessoires', disponible: true },
                    { id: 'psg-15', nom: 'Mug PSG Collector', prix: 19.99, emoji: '‚òï', categorie: 'Accessoires', disponible: true }
                ];
                
                const produitsOL = [
                    { id: 'ol-1', nom: 'Maillot Domicile 2024/25', prix: 84.99, emoji: 'üëï', categorie: 'Maillots', disponible: true },
                    { id: 'ol-2', nom: '√âcharpe OL', prix: 18.99, emoji: 'üß£', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-3', nom: 'Surv√™tement OL', prix: 119.99, emoji: 'üèÉ', categorie: 'V√™tements', disponible: true },
                    { id: 'ol-4', nom: 'Casquette OL', prix: 23.99, emoji: 'üß¢', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-5', nom: 'Ballon OL', prix: 28.99, emoji: '‚öΩ', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-6', nom: 'Maillot Ext√©rieur 2024/25', prix: 84.99, emoji: 'üëï', categorie: 'Maillots', disponible: true },
                    { id: 'ol-7', nom: 'Gourde OL', prix: 13.99, emoji: 'üç∂', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-8', nom: 'Sweat OL', prix: 64.99, emoji: 'üß•', categorie: 'V√™tements', disponible: true },
                    { id: 'ol-9', nom: 'Short Domicile', prix: 37.99, emoji: 'ü©≥', categorie: 'V√™tements', disponible: true },
                    { id: 'ol-10', nom: 'T-Shirt Logo OL', prix: 32.99, emoji: 'üëï', categorie: 'V√™tements', disponible: true },
                    { id: 'ol-11', nom: 'Chaussettes OL', prix: 11.99, emoji: 'üß¶', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-12', nom: 'Sac √† Dos OL', prix: 42.99, emoji: 'üéí', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-13', nom: 'Drapeau OL', prix: 27.99, emoji: 'üö©', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-14', nom: 'Porte-Cl√©s OL', prix: 8.99, emoji: 'üîë', categorie: 'Accessoires', disponible: true },
                    { id: 'ol-15', nom: 'Mug OL Collector', prix: 15.99, emoji: '‚òï', categorie: 'Accessoires', disponible: true }
                ];
                
                // D√©tecter le club
                const slug = clubSlug.toLowerCase();
                if (slug.includes('marseille') || slug.includes('om')) {
                    return produitsOM.slice(0, limite);
                } else if (slug.includes('paris') || slug.includes('psg')) {
                    return produitsPSG.slice(0, limite);
                } else if (slug.includes('lyon') || slug.includes('ol')) {
                    return produitsOL.slice(0, limite);
                }
                
                return [];
            };
            
            console.log('‚úÖ Produits scrap√©s charg√©s en INLINE (fallback)');
        }

        // INIT
        window.onload = async function() {
            afficherProduitsBoutique();
            updateSoldes();
            displayLegends(); // Charger les l√©gendes du club
            chargerTransactionsLocales(); // Charger l'historique des transactions
            
            // Initialiser le s√©lecteur de langue
            if (typeof genererSelecteurLangue === 'function') {
                const selecteur = document.getElementById('selecteurLangue');
                if (selecteur) {
                    selecteur.innerHTML = genererSelecteurLangue();
                }
            }
            
            // Charger les produits WooCommerce
            if (typeof initWooCommerce === 'function') {
                await initWooCommerce();
            }
            
            // ‚úÖ G√âN√âRER DES TRANSACTIONS DE D√âMONSTRATION
            genererTransactionsDemo();
        };

        function afficherProduitsBoutique() {
            const grid = document.getElementById('boutique-grid');
            const clubSlug = getCurrentClub();
            
            // 1Ô∏è‚É£ AFFICHER LES PRODUITS PHARES EN PREMIER
            let html = '';
            if (window.PRODUITS_PHARES) {
                html += window.PRODUITS_PHARES.renderProduitsPharesHTML(clubSlug);
            }
            
            // 2Ô∏è‚É£ PRODUITS SCRAP√âS DU CLUB (MAX 15)
            if (typeof getProduitsClub === 'function') {
                const produitsScrap√©s = getProduitsClub(clubSlug, 15);
                console.log(`üõçÔ∏è ${produitsScrap√©s.length} produits scrap√©s pour ${clubSlug}`);
                
                if (produitsScrap√©s && produitsScrap√©s.length > 0) {
                    // Badge visuel pour indiquer les produits scrap√©s
                    html += `<div style="grid-column: 1/-1; background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 12px; margin-bottom: 10px; text-align: center;">
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">‚úÖ ${produitsScrap√©s.length} Produits Officiels Scrap√©s</div>
                        <div style="font-size: 13px; opacity: 0.9;">Directement depuis la boutique officielle du club</div>
                    </div>`;
                    
                    html += produitsScrap√©s.map(p => `
                        <div class="product-card" onclick="toggleProduitScrap√©('${p.id}')" id="product-scraped-${p.id}" style="position: relative; cursor: pointer;">
                            <div style="position: absolute; top: 8px; right: 8px; background: #10b981; color: white; padding: 3px 8px; border-radius: 8px; font-size: 9px; font-weight: bold; z-index: 10;">SCRAP√â</div>
                            ${p.image ? `<img src="${p.image}" alt="${p.nom}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 12px 12px 0 0;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div style="display: none; width: 100%; height: 200px; align-items: center; justify-content: center; font-size: 4em; background: linear-gradient(135deg, #f3f4f6, #e5e7eb); border-radius: 12px 12px 0 0;">${p.emoji || 'üõçÔ∏è'}</div>` : `<div class="product-img">${p.emoji || 'üõçÔ∏è'}</div>`}
                            <div class="product-name">${p.nom}</div>
                            <div class="product-price">${p.prix.toFixed(2)} ‚Ç¨</div>
                            <div style="font-size: 11px; opacity: 0.7; margin-top: 5px;">${p.categorie}</div>
                            ${!p.disponible ? '<div style="position: absolute; top: 10px; right: 10px; background: rgba(239, 68, 68, 0.9); color: white; padding: 5px 10px; border-radius: 5px; font-size: 10px; font-weight: bold;">Rupture</div>' : ''}
                        </div>
                    `).join('');
                } else {
                    console.warn('‚ö†Ô∏è Aucun produit scrap√© trouv√© pour', clubSlug);
                }
            } else {
                console.error('‚ùå Fonction getProduitsClub non disponible');
            }
            
            // 3Ô∏è‚É£ PRODUITS CLASSIQUES (FALLBACK)
            html += produitsBoutique.map(p => `
                <div class="product-card" onclick="toggleProduit(${p.id})" id="product-${p.id}">
                    <div class="product-img">${p.emoji}</div>
                    <div class="product-name">${p.nom}</div>
                    <div class="product-price">${p.prix.toFixed(2)} ‚Ç¨</div>
                </div>
            `).join('');
            
            grid.innerHTML = html;
        }
        
        function toggleProduitScrap√©(id) {
            const clubSlug = getCurrentClub();
            const produitsScrap√©s = getProduitsClub(clubSlug, 15);
            const produit = produitsScrap√©s.find(p => p.id === id);
            
            if (!produit) {
                console.error('Produit scrap√© introuvable:', id);
                return;
            }
            
            // Afficher les d√©tails du produit au lieu de l'ajouter directement
            afficherDetailsProduit(produit);
        }
        
        // ========== AFFICHER D√âTAILS PRODUIT ==========
        function afficherDetailsProduit(produit) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            // G√©n√©rer code promo unique
            const userName = localStorage.getItem('userName') || 'FAN';
            const codePromo = `${userName.toUpperCase()}-OM-${Date.now().toString().slice(-4)}`;
            const lienPartage = `https://paiecashfan.com/product/${produit.id}?ref=${codePromo}`;
            
            // Images multiples
            const images = produit.images || [produit.image];
            const imageGallery = images.map((img, index) => `
                <img src="${img}" alt="${produit.nom}" style="width: 100%; max-width: 150px; border-radius: 10px; cursor: pointer; transition: transform 0.3s;" onclick="agrandirImage('${img}')" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
            `).join('');
            
            // Tailles disponibles
            const taillesHTML = produit.tailles ? `
                <div style="margin-bottom: 15px;">
                    <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Taille :</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        ${produit.tailles.map(t => `
                            <button onclick="selectionnerTaille('${t}')" id="taille-${t}" class="btn-taille" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; cursor: pointer; transition: all 0.3s; font-weight: bold;">${t}</button>
                        `).join('')}
                    </div>
                </div>
            ` : '';
            
            // Couleurs disponibles
            const couleursHTML = produit.couleurs ? `
                <div style="margin-bottom: 15px;">
                    <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Couleur :</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        ${produit.couleurs.map(c => `
                            <button onclick="selectionnerCouleur('${c}')" id="couleur-${c}" class="btn-couleur" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; cursor: pointer; transition: all 0.3s; font-weight: bold;">${c}</button>
                        `).join('')}
                    </div>
                </div>
            ` : '';
            
            // Sp√©cifications
            const specsHTML = produit.specifications ? `
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                    <div style="font-size: 15px; font-weight: bold; margin-bottom: 10px;">üìã Sp√©cifications</div>
                    ${Object.entries(produit.specifications).map(([key, value]) => `
                        <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="opacity: 0.7; text-transform: capitalize;">${key.replace('_', ' ')} :</span>
                            <strong>${value}</strong>
                        </div>
                    `).join('')}
                </div>
            ` : '';
            
            title.textContent = produit.nom;
            body.innerHTML = `
                <div>
                    <!-- Image principale -->
                    <div style="text-align: center; margin-bottom: 20px;">
                        <img src="${images[0]}" alt="${produit.nom}" style="width: 100%; max-width: 400px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                    </div>
                    
                    <!-- Galerie d'images -->
                    ${images.length > 1 ? `
                        <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; overflow-x: auto;">
                            ${imageGallery}
                        </div>
                    ` : ''}
                    
                    <!-- Prix et cat√©gorie -->
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 36px; font-weight: bold; color: #4ade80;">${produit.prix.toFixed(2)} ‚Ç¨</div>
                        <div style="font-size: 14px; opacity: 0.7; margin-top: 5px;">${produit.categorie}</div>
                    </div>
                    
                    <!-- Description -->
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                        <p style="opacity: 0.9; line-height: 1.6;">${produit.description}</p>
                    </div>
                    
                    <!-- Tailles -->
                    ${taillesHTML}
                    
                    <!-- Couleurs -->
                    ${couleursHTML}
                    
                    <!-- Sp√©cifications -->
                    ${specsHTML}
                    
                    <!-- Partage avec code promo -->
                    <div style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">üéÅ Partagez et gagnez 5% de cashback !</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-bottom: 10px;">Votre ami ach√®te ‚Üí Vous recevez 5% du montant</div>
                        <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                            <div style="font-size: 11px; opacity: 0.8; margin-bottom: 5px;">Votre code promo :</div>
                            <div style="font-size: 18px; font-weight: bold; letter-spacing: 2px;">${codePromo}</div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <button class="btn" onclick="copierLienPartage('${lienPartage}', '${codePromo}')" style="padding: 10px; font-size: 13px; background: white; color: #f59e0b;">
                                üìã Copier le lien
                            </button>
                            <button class="btn" onclick="partagerWhatsApp('${produit.nom}', '${lienPartage}', '${codePromo}')" style="padding: 10px; font-size: 13px; background: #25D366; color: white;">
                                üì± WhatsApp
                            </button>
                        </div>
                    </div>
                    
                    <!-- Boutons d'action -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn btn-secondary" onclick="closeModal()">
                            Annuler
                        </button>
                        <button class="btn" onclick="ajouterProduitAuPanier('${produit.id}')" style="background: #10b981; font-weight: bold;">
                            üõí Ajouter au panier
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }
        
        // Fonctions auxiliaires pour d√©tails produit
        let tailleSelectionnee = null;
        let couleurSelectionnee = null;
        
        function selectionnerTaille(taille) {
            tailleSelectionnee = taille;
            document.querySelectorAll('.btn-taille').forEach(btn => {
                btn.style.background = 'rgba(255,255,255,0.1)';
                btn.style.borderColor = 'rgba(255,255,255,0.3)';
            });
            const btn = document.getElementById(`taille-${taille}`);
            if (btn) {
                btn.style.background = '#10b981';
                btn.style.borderColor = '#10b981';
            }
        }
        
        function selectionnerCouleur(couleur) {
            couleurSelectionnee = couleur;
            document.querySelectorAll('.btn-couleur').forEach(btn => {
                btn.style.background = 'rgba(255,255,255,0.1)';
                btn.style.borderColor = 'rgba(255,255,255,0.3)';
            });
            const btn = document.getElementById(`couleur-${couleur}`);
            if (btn) {
                btn.style.background = '#10b981';
                btn.style.borderColor = '#10b981';
            }
        }
        
        function ajouterProduitAuPanier(produitId) {
            const clubSlug = getCurrentClub();
            const produitsScrap√©s = getProduitsClub(clubSlug, 15);
            const produit = produitsScrap√©s.find(p => p.id === produitId);
            
            if (!produit) return;
            
            // V√©rifier si taille/couleur requise
            if (produit.tailles && !tailleSelectionnee) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner une taille');
                return;
            }
            
            if (produit.couleurs && !couleurSelectionnee) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner une couleur');
                return;
            }
            
            // Ajouter au panier avec options
            const produitAvecOptions = {
                ...produit,
                taille: tailleSelectionnee,
                couleur: couleurSelectionnee
            };
            
            state.produitsSelectionnes.push(produitAvecOptions);
            
            const card = document.getElementById(`product-scraped-${produitId}`);
            if (card) {
                card.classList.add('selected');
                card.style.border = '2px solid #10b981';
                card.style.transform = 'scale(1.05)';
            }
            
            updatePanier();
            closeModal();
            
            alert(`‚úÖ ${produit.nom} ajout√© au panier !\n${tailleSelectionnee ? 'Taille: ' + tailleSelectionnee : ''}${couleurSelectionnee ? '\nCouleur: ' + couleurSelectionnee : ''}`);
            
            // Reset s√©lections
            tailleSelectionnee = null;
            couleurSelectionnee = null;
        }
        
        function agrandirImage(url) {
            window.open(url, '_blank');
        }
        
        function copierLienPartage(lien, code) {
            navigator.clipboard.writeText(lien).then(() => {
                alert(`‚úÖ Lien copi√© !\n\nCode promo: ${code}\n\nPartagez-le et gagnez 5% de cashback si votre ami ach√®te !`);
            });
        }
        
        function partagerWhatsApp(nomProduit, lien, code) {
            const message = `üéÅ Regarde ce super produit OM !\n\n${nomProduit}\n\nUtilise mon code promo: ${code}\n${lien}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
        }

        function toggleProduit(id) {
            const produit = produitsBoutique.find(p => p.id === id);
            if (!produit) {
                console.error('Produit introuvable:', id);
                return;
            }
            
            const index = state.produitsSelectionnes.findIndex(p => p.id === id);
            const card = document.getElementById(`product-${id}`);
            
            if (index > -1) {
                // D√©s√©lection
                state.produitsSelectionnes.splice(index, 1);
                if (card) {
                    card.classList.remove('selected');
                    card.style.border = '2px solid rgba(255,255,255,0.2)';
                    card.style.transform = 'scale(1)';
                }
                console.log('‚úÖ Produit retir√©:', produit.nom);
            } else {
                // S√©lection
                state.produitsSelectionnes.push(produit);
                if (card) {
                    card.classList.add('selected');
                    card.style.border = '2px solid #10b981';
                    card.style.transform = 'scale(1.05)';
                }
                console.log('‚úÖ Produit ajout√©:', produit.nom);
            }
            
            console.log('üì¶ Panier actuel:', state.produitsSelectionnes.length, 'produits');
            updatePanier();
        }
        
        // Fonction pour g√©rer les produits phares
        function toggleProduitPhare(productId) {
            const clubSlug = getCurrentClub();
            const produitsPhares = window.PRODUITS_PHARES.getProduitsPharesClub(clubSlug);
            const produit = produitsPhares.find(p => p.id === productId);
            
            if (!produit) {
                console.error('Produit phare introuvable:', productId);
                return;
            }
            
            const index = state.produitsSelectionnes.findIndex(p => p.id === productId);
            const card = document.getElementById(`product-${productId}`);
            
            if (index > -1) {
                // D√©s√©lection
                state.produitsSelectionnes.splice(index, 1);
                if (card) {
                    card.style.border = '2px solid ' + produit.couleur1 + '40';
                    card.style.transform = 'scale(1)';
                    card.style.boxShadow = 'none';
                }
                console.log('‚úÖ Produit phare retir√©:', produit.nom);
            } else {
                // S√©lection
                state.produitsSelectionnes.push({
                    id: produit.id,
                    nom: produit.nom,
                    prix: produit.prix,
                    type: produit.type
                });
                if (card) {
                    card.style.border = '3px solid #10b981';
                    card.style.transform = 'scale(1.08)';
                    card.style.boxShadow = '0 10px 30px rgba(16,185,129,0.5)';
                }
                console.log('‚úÖ Produit phare ajout√©:', produit.nom);
            }
            
            console.log('üì¶ Panier actuel:', state.produitsSelectionnes.length, 'produits');
            updatePanier();
        }
        
        // Fonction pour voir les d√©tails d'un produit phare
        function voirDetailsProduitPhare(productId) {
            const clubSlug = getCurrentClub();
            const produitsPhares = window.PRODUITS_PHARES.getProduitsPharesClub(clubSlug);
            const produit = produitsPhares.find(p => p.id === productId);
            
            if (!produit) return;
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            title.textContent = produit.emoji + ' ' + produit.nom;
            body.innerHTML = `
                <div style="max-width: 600px; text-align: left;">
                    <div style="font-size: 16px; margin-bottom: 20px; line-height: 1.6; opacity: 0.9;">
                        ${produit.description}
                    </div>
                    
                    <div style="background: rgba(16,185,129,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                        <h4 style="margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">‚ú® Caract√©ristiques</h4>
                        ${produit.specifications.map(spec => `
                            <div style="margin-bottom: 10px; font-size: 14px; line-height: 1.5;">${spec}</div>
                        `).join('')}
                    </div>
                    
                    <div style="background: rgba(59,130,246,0.1); padding: 20px; border-radius: 15px; margin-bottom: 25px;">
                        <h4 style="margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">üéÅ Avantages</h4>
                        ${produit.avantages.map(avantage => `
                            <div style="margin-bottom: 10px; font-size: 14px; line-height: 1.5;">‚Ä¢ ${avantage}</div>
                        `).join('')}
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <button class="btn" onclick="toggleProduitPhare('${produit.id}'); closeModal()" style="flex: 1; background: linear-gradient(135deg, #10b981, #059669);">
                            ‚úÖ S√âLECTIONNER
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal()" style="flex: 0.5;">
                            Fermer
                        </button>
                    </div>
                </div>
            `;
            modal.classList.add('active');
        }

        function updatePanier() {
            const nb = state.produitsSelectionnes.length;
            const total = state.produitsSelectionnes.reduce((sum, p) => sum + p.prix, 0);
            
            // Mise √† jour du panier classique
            document.getElementById('nbProduits').textContent = nb;
            document.getElementById('totalBoutique').textContent = total.toFixed(2) + ' ‚Ç¨';
            
            // Mise √† jour de la barre sticky
            updateStickyPaymentBar(nb, total);
        }

        function updateStickyPaymentBar(nb, total) {
            const stickyBar = document.getElementById('sticky-payment-bar');
            const stickyNb = document.getElementById('sticky-nb-produits');
            const stickyTotal = document.getElementById('sticky-total');
            
            if (!stickyBar || !stickyNb || !stickyTotal) return;
            
            // Afficher/masquer la barre selon le nombre de produits
            if (nb > 0) {
                stickyBar.style.display = 'block';
                stickyNb.textContent = `${nb} produit${nb > 1 ? 's' : ''}`;
                stickyTotal.textContent = total.toFixed(2) + ' ‚Ç¨';
            } else {
                stickyBar.style.display = 'none';
            }
        }

        function viderPanier() {
            if (confirm('üóëÔ∏è Voulez-vous vraiment vider votre panier ?')) {
                // D√©s√©lectionner tous les produits
                state.produitsSelectionnes.forEach(p => {
                    const card = document.getElementById(`product-${p.id}`) || document.getElementById(`woo-product-${p.id}`);
                    if (card) {
                        card.classList.remove('selected');
                        card.style.border = '2px solid rgba(255,255,255,0.2)';
                        card.style.transform = 'scale(1)';
                    }
                });
                
                // Vider le panier
                state.produitsSelectionnes = [];
                updatePanier();
            }
        }

        function updateSoldes() {
            const total = state.wallet + state.carte + state.cashback;
            
            // Mise √† jour section Paiement
            document.getElementById('soldeTotal').textContent = total.toFixed(2) + ' ‚Ç¨';
            document.getElementById('soldeWallet').textContent = state.wallet.toFixed(2);
            document.getElementById('soldeCarte').textContent = state.carte.toFixed(2);
            document.getElementById('cashback').textContent = state.cashback.toFixed(2);
            
            // Mise √† jour section Accueil (synchronisation)
            const accueilTotal = document.getElementById('soldeTotal-accueil');
            const accueilWallet = document.getElementById('soldeWallet-accueil');
            const accueilCarte = document.getElementById('soldeCarte-accueil');
            const accueilCashback = document.getElementById('cashback-accueil');
            
            if (accueilTotal) accueilTotal.textContent = total.toFixed(2) + ' ‚Ç¨';
            if (accueilWallet) accueilWallet.textContent = state.wallet.toFixed(2);
            if (accueilCarte) accueilCarte.textContent = state.carte.toFixed(2);
            if (accueilCashback) accueilCashback.textContent = state.cashback.toFixed(2);
        }

        // ========== GESTION TRANSACTIONS TEMPS R√âEL ==========
        function ajouterTransactionTempsReel(transaction) {
            // G√©n√©rer ID unique et horodatage
            const id = 'TRX-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
            const date = new Date();
            const dateFormatee = date.toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' });
            const heureFormatee = date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            
            // Transaction compl√®te
            const transactionComplete = {
                id: id,
                nom: transaction.nom || 'Transaction',
                montant: transaction.montant || 0,
                cashback: transaction.cashback || 0,
                type: transaction.type || 'boutique',
                date: dateFormatee,
                heure: heureFormatee,
                timestamp: date.getTime()
            };
            
            // Ajouter au d√©but du tableau (plus r√©cent en premier)
            state.transactions.unshift(transactionComplete);
            
            // Sauvegarder dans localStorage
            localStorage.setItem('transactions', JSON.stringify(state.transactions));
            
            // Rafra√Æchir l'affichage
            afficherTransactions();
            afficherTransactionsRecentes(); // Mettre √† jour l'accueil
            
            // Mettre √† jour les statistiques
            updateStatistiquesTransactions();
            
            // Log pour debug
            console.log('‚úÖ Transaction ajout√©e:', transactionComplete);
        }

        function afficherTransactions() {
            const container = document.getElementById('listeTransactionsComplete');
            if (!container) return;
            
            // Filtrer les transactions selon le filtre actif
            let transactionsFiltrees = state.transactions;
            if (state.filtreTransaction !== 'toutes') {
                transactionsFiltrees = state.transactions.filter(t => t.type === state.filtreTransaction);
            }
            
            // Si aucune transaction
            if (transactionsFiltrees.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; opacity: 0.5;">
                        <div style="font-size: 60px; margin-bottom: 15px;">üìä</div>
                        <p>Aucune transaction ${state.filtreTransaction !== 'toutes' ? 'de type ' + state.filtreTransaction : ''}</p>
                        <p style="font-size: 12px; margin-top: 10px;">Les transactions s'afficheront ici en temps r√©el</p>
                    </div>
                `;
                return;
            }
            
            // Ic√¥nes par type
            const icones = {
                'boutique': 'üõçÔ∏è',
                'wallet': 'üíµ',
                'carte': 'üí≥',
                'crypto': '‚Çø',
                'alipay': 'üá®üá≥',
                'wechat': 'üí¨',
                'nft': 'üé®'
            };
            
            // G√©n√©rer HTML
            container.innerHTML = transactionsFiltrees.map(t => {
                const couleur = t.montant >= 0 ? '#4ade80' : '#ff6b6b';
                const icone = icones[t.type] || 'üí∞';
                
                return `
                    <div class="transaction-item" style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateX(5px)'" onmouseout="this.style.transform='translateX(0)'">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, ${couleur}, rgba(255,255,255,0.1)); display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                    ${icone}
                                </div>
                                <div>
                                    <div style="font-weight: bold; font-size: 16px;">${t.nom}</div>
                                    <div style="font-size: 12px; opacity: 0.7;">${t.date} - ${t.heure}</div>
                                    ${t.cashback > 0 ? `<div style="font-size: 11px; color: #4ade80; margin-top: 3px;">+${t.cashback.toFixed(2)}‚Ç¨ cashback</div>` : ''}
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 20px; font-weight: bold; color: ${couleur};">
                                    ${t.montant >= 0 ? '+' : ''}${t.montant.toFixed(2)} ‚Ç¨
                                </div>
                                <div style="font-size: 11px; opacity: 0.7; margin-top: 3px;">ID: ${t.id.substr(0, 18)}...</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function filtrerTransactions(type) {
            state.filtreTransaction = type;
            afficherTransactions();
        }

        function updateStatistiquesTransactions() {
            // Calculer statistiques
            const totalDepense = state.transactions
                .filter(t => t.montant < 0)
                .reduce((sum, t) => sum + Math.abs(t.montant), 0);
            
            const totalCashback = state.transactions
                .reduce((sum, t) => sum + (t.cashback || 0), 0);
            
            const nombreTransactions = state.transactions.length;
            
            // Mettre √† jour l'affichage
            const elemDepense = document.getElementById('totalDepense');
            const elemCashback = document.getElementById('totalCashback');
            const elemNombre = document.getElementById('nombreTransactions');
            
            if (elemDepense) elemDepense.textContent = totalDepense.toFixed(2) + ' ‚Ç¨';
            if (elemCashback) elemCashback.textContent = totalCashback.toFixed(2) + ' ‚Ç¨';
            if (elemNombre) elemNombre.textContent = nombreTransactions;
        }

        function chargerTransactionsLocales() {
            const saved = localStorage.getItem('transactions');
            if (saved) {
                state.transactions = JSON.parse(saved);
                afficherTransactions();
                updateStatistiquesTransactions();
                afficherTransactionsRecentes(); // Mettre √† jour l'accueil
            }
        }

        function afficherTransactionsRecentes() {
            const container = document.getElementById('transactionsRecentes');
            if (!container) return;
            
            // Prendre les 3 derni√®res transactions
            const dernieres = state.transactions.slice(0, 3);
            
            if (dernieres.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 30px; opacity: 0.5;">
                        <div style="font-size: 50px; margin-bottom: 10px;">üìä</div>
                        <p style="font-size: 14px;">Aucune transaction r√©cente</p>
                        <p style="font-size: 12px; margin-top: 5px; opacity: 0.7;">Vos transactions appara√Ætront ici</p>
                    </div>
                `;
                return;
            }
            
            // Ic√¥nes par type
            const icones = {
                'boutique': 'üõçÔ∏è',
                'wallet': 'üíµ',
                'carte': 'üí≥',
                'crypto': '‚Çø',
                'alipay': 'üá®üá≥',
                'wechat': 'üí¨',
                'nft': 'üé®'
            };
            
            container.innerHTML = dernieres.map(t => {
                const couleur = t.montant >= 0 ? '#4ade80' : '#ff6b6b';
                const icone = icones[t.type] || 'üí∞';
                
                return `
                    <div class="transaction-item">
                        <div class="transaction-icon" style="background: linear-gradient(135deg, ${couleur}, rgba(255,255,255,0.1));">${icone}</div>
                        <div class="transaction-details">
                            <div class="transaction-name">${t.nom}</div>
                            <div class="transaction-date">${t.date} - ${t.heure}</div>
                        </div>
                        <div class="transaction-amount" style="color: ${couleur};">${t.montant >= 0 ? '+' : ''}${t.montant.toFixed(2)} EUR</div>
                    </div>
                `;
            }).join('');
        }

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => {
                s.classList.remove('active');
                s.style.display = 'none'; // Force display none pour toutes les sections
            });
            document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
            
            const section = document.getElementById(id);
            if (section) {
                section.classList.add('active');
                section.style.display = 'block'; // Force display block pour la section active
            }
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Si c'est la section Afrique, l'initialiser
            if (id === 'afrique') {
                console.log('üåç Affichage section Afrique...');
                console.log('‚úÖ Section Afrique maintenant visible');
                setTimeout(() => {
                    if (typeof initSectionAfrique === 'function') {
                        initSectionAfrique();
                    }
                }, 100);
            }
        }

        // GESTION DES ONGLETS BOUTIQUE
        function showBoutiqueTab(tabName) {
            // Cacher tous les contenus
            document.querySelectorAll('.boutique-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // D√©sactiver tous les boutons d'onglets
            document.querySelectorAll('.boutique-tab').forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = 'rgba(255,255,255,0.1)';
            });
            
            // Afficher le contenu s√©lectionn√©
            const selectedContent = document.getElementById(`boutique-${tabName}`);
            if (selectedContent) {
                selectedContent.style.display = 'block';
            }
            
            // Activer le bouton s√©lectionn√©
            const selectedBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (selectedBtn) {
                selectedBtn.classList.add('active');
                selectedBtn.style.background = 'rgba(255,255,255,0.2)';
            }
        }

        // ACHAT DE NFT AVEC LE STABLECOIN DU CLUB ACTIF
        function acheterNFT(nftName, prix) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            // R√©cup√©rer le stablecoin du club actif
            const clubCoin = getClubStablecoin();
            const coinBalance = clubCoin.balance;
            const coinCode = clubCoin.code;
            const coinName = clubCoin.name;
            
            if (coinBalance < prix) {
                title.innerHTML = '‚ùå Solde Insuffisant';
                body.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üòî</div>
                        <p style="margin-bottom: 15px;">Vous n'avez pas assez de <strong>${coinName} (${coinCode})</strong> pour acheter ce NFT.</p>
                        <p style="margin-bottom: 10px;">Prix du NFT: <strong style="color: #fbbf24;">${prix} ${coinCode}</strong></p>
                        <p style="margin-bottom: 20px;">Votre solde: <strong style="color: #ef4444;">${coinBalance.toFixed(2)} ${coinCode}</strong></p>
                        <button class="btn" onclick="closeModal(); showSection('paiement')">üí∞ Recharger ${coinCode}</button>
                        <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 10px;">Fermer</button>
                    </div>
                `;
            } else {
                title.innerHTML = 'üé® Confirmer Achat NFT';
                body.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üé®</div>
                        <h3 style="margin-bottom: 15px;">${nftName}</h3>
                        <p style="margin-bottom: 10px;">Prix: <strong style="color: #fbbf24;">${prix} ${coinCode}</strong></p>
                        <p style="margin-bottom: 20px;">Solde actuel: <strong>${coinBalance.toFixed(2)} ${coinCode}</strong></p>
                        <p style="margin-bottom: 20px; opacity: 0.8;">Nouveau solde apr√®s achat: <strong>${(coinBalance - prix).toFixed(2)} ${coinCode}</strong></p>
                        <button class="btn" onclick="confirmerAchatNFT('${nftName}', ${prix}, '${coinCode}')">‚úÖ Confirmer l'Achat</button>
                        <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 10px;">Annuler</button>
                    </div>
                `;
            }
            
            modal.classList.add('active');
        }

        function confirmerAchatNFT(nftName, prix, coinCode) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            // Mettre √† jour le solde du club
            const clubCoin = getClubStablecoin();
            clubCoin.balance -= prix;
            
            title.innerHTML = '‚úÖ NFT Achet√© !';
            body.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 80px; margin-bottom: 20px;">üéâ</div>
                    <h3 style="margin-bottom: 15px; color: #10b981;">F√©licitations !</h3>
                    <p style="margin-bottom: 10px;">Vous avez achet√© le NFT:</p>
                    <p style="margin-bottom: 15px; font-size: 18px; font-weight: bold; color: #fbbf24;">${nftName}</p>
                    <p style="margin-bottom: 20px;">Prix pay√©: <strong>${prix} ${coinCode}</strong></p>
                    <div style="background: rgba(16, 185, 129, 0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <p style="font-size: 13px; margin-bottom: 10px;">Le NFT a √©t√© ajout√© √† votre collection !</p>
                        <p style="font-size: 11px; opacity: 0.8;">Vous pouvez le retrouver dans votre profil.</p>
                        <p style="font-size: 12px; margin-top: 10px;">Nouveau solde: <strong>${clubCoin.balance.toFixed(2)} ${coinCode}</strong></p>
                    </div>
                    <button class="btn" onclick="closeModal()">üëç Super !</button>
                    <button class="btn btn-secondary" onclick="closeModal(); showSection('legendes')" style="margin-top: 10px;">‚≠ê Voir d'autres L√©gendes</button>
                </div>
            `;
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function seDeconnecter() {
            if (confirm('üö™ Voulez-vous vraiment vous d√©connecter ?')) {
                window.location.href = 'accueil-clubs.html';
            }
        }

        // VOIR TICKET DE TRANSACTION (CLIQUABLE)
        function voirTicket(merchant, date, txId, amount, cashback) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            const amountColor = amount > 0 ? '#90EE90' : '#ff6b6b';
            const amountSign = amount > 0 ? '+' : '';
            
            title.innerHTML = 'üßæ Ticket de Transaction';
            body.innerHTML = `
                <div style="background: white; color: #333; padding: 20px; border-radius: 10px; max-width: 400px; margin: 0 auto; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
                    <div style="text-align: center; border-bottom: 2px dashed #ccc; padding-bottom: 15px; margin-bottom: 15px;">
                        <div style="font-size: 20px; font-weight: bold; color: #667eea; margin-bottom: 5px;">PAIECASH</div>
                        <div id="ticketClubDisplay" style="font-size: 14px; color: #666;">‚öΩ Chargement...</div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: #999; margin-bottom: 3px;">MARCHAND</div>
                        <div style="font-size: 18px; font-weight: bold; color: #333;">${merchant}</div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: #999; margin-bottom: 3px;">DATE & HEURE</div>
                        <div style="font-size: 14px; color: #333;">${date}</div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: #999; margin-bottom: 3px;">ID TRANSACTION</div>
                        <div style="font-size: 14px; color: #333; font-family: monospace;">${txId}</div>
                    </div>
                    
                    <div style="border-top: 2px dashed #ccc; padding-top: 15px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 16px; font-weight: bold; color: #333;">MONTANT</div>
                            <div style="font-size: 24px; font-weight: bold; color: ${amountColor};">${amountSign}${amount.toFixed(2)} EUR</div>
                        </div>
                        ${cashback > 0 ? `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding: 10px; background: #f0f8ff; border-radius: 5px;">
                            <div style="font-size: 14px; color: #667eea;">‚ú® Cashback re√ßu</div>
                            <div style="font-size: 16px; font-weight: bold; color: #667eea;">+${cashback.toFixed(2)} EUR</div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <button class="btn btn-secondary" onclick="alert('üì• Fonctionnalit√© \'T√©l√©charger PDF\' en d√©veloppement')" style="width: 100%; background: #667eea; color: white;">üì• T√©l√©charger PDF</button>
                </div>
            `;
            modal.classList.add('active');
            
            // Mettre √† jour le nom du club dans le ticket apr√®s affichage
            setTimeout(() => {
                const ticketClubDisplayModal = body.querySelector('#ticketClubDisplay');
                if (ticketClubDisplayModal && clubName && clubLogo) {
                    ticketClubDisplayModal.textContent = `${clubLogo} ${clubName}`;
                }
            }, 50);
        }

        // RECHARGER WALLET
        function rechargerWallet() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí∞ Recharger Wallet';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Solde actuel: <strong>${state.wallet.toFixed(2)} ‚Ç¨</strong></p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
                        <button class="btn" onclick="confirmerRecharge(20)">20 ‚Ç¨</button>
                        <button class="btn" onclick="confirmerRecharge(50)">50 ‚Ç¨</button>
                        <button class="btn" onclick="confirmerRecharge(100)">100 ‚Ç¨</button>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function confirmerRecharge(montant) {
            state.wallet += montant;
            updateSoldes();
            alert(`‚úÖ Rechargement de ${montant} ‚Ç¨ effectu√© !\n\nNouveau solde Wallet : ${state.wallet.toFixed(2)} ‚Ç¨`);
            closeModal();
        }

        // RETIRER VERS CARTE
        function retirerVersCarte() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí∏ Retirer vers Carte';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Solde Wallet: <strong>${state.wallet.toFixed(2)} ‚Ç¨</strong></p>
                    <input type="number" id="montantRetrait" placeholder="Montant" max="${state.wallet}" style="width: 100%; padding: 15px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; margin-bottom: 15px;">
                    <button class="btn" onclick="confirmerRetrait()">‚úÖ Retirer</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function confirmerRetrait() {
            const montant = parseFloat(document.getElementById('montantRetrait').value);
            if (montant > 0 && montant <= state.wallet) {
                state.wallet -= montant;
                state.carte += montant;
                updateSoldes();
                alert(`‚úÖ Retrait de ${montant} ‚Ç¨ effectu√© !\n\nNouveau solde Wallet : ${state.wallet.toFixed(2)} ‚Ç¨\nNouveau solde Carte : ${state.carte.toFixed(2)} ‚Ç¨`);
                closeModal();
            } else {
                alert('‚ùå Montant invalide');
            }
        }

        // CONVERTIR CRYPTO
        function convertirCrypto() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üîÑ Convertir Crypto';
            body.innerHTML = `
                <div>
                    <select id="cryptoSource" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;">
                        <option value="usdc-${state.usdc}">USDC (${state.usdc} $)</option>
                        <option value="omcoin-${state.omcoin}">OM Coin (${state.omcoin} OMC)</option>
                    </select>
                    <div style="text-align: center; margin: 10px 0; font-size: 24px;">‚¨áÔ∏è</div>
                    <select id="cryptoCible" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;">
                        <option value="eur">Euro (EUR)</option>
                        <option value="usdc">USDC</option>
                        <option value="omcoin">OM Coin</option>
                    </select>
                    <input type="number" id="montantConversion" placeholder="Montant" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;">
                    <button class="btn" onclick="executerConversion()">‚úÖ Convertir</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function executerConversion() {
            const source = document.getElementById('cryptoSource').value;
            const cible = document.getElementById('cryptoCible').value;
            const montant = parseFloat(document.getElementById('montantConversion').value);
            
            if (montant > 0) {
                // Simulation conversion
                if (cible === 'eur') {
                    state.wallet += montant * 0.95; // Taux de change simul√©
                }
                updateSoldes();
                alert(`‚úÖ Conversion effectu√©e !\n\n${montant} ${source.split('-')[0].toUpperCase()} ‚Üí EUR\n\nNouveau solde Wallet : ${state.wallet.toFixed(2)} ‚Ç¨`);
                closeModal();
            } else {
                alert('‚ùå Montant invalide');
            }
        }

        // AFFICHER QR CODE
        function afficherQRCode() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            const clubCode = (clubName || 'CLUB').replace(/\s+/g, '-').toUpperCase().substring(0, 10);
            const qrId = `PAIECASH-${clubCode}-` + Math.random().toString(36).substr(2, 9).toUpperCase();

            title.textContent = 'üì≤ QR Code de Paiement';
            body.innerHTML = `
                <div style="text-align: center;">
                    <p style="margin-bottom: 20px;">Scannez ce QR Code pour payer</p>
                    <div class="qr-code">
                        <div class="qr-pattern">
                            <div class="qr-logo">PaieCash</div>
                        </div>
                        <div style="font-size: 11px; color: #1e293b; margin-top: 10px; text-align: center;">ID: ${qrId}</div>
                    </div>
                    <p style="margin-top: 20px; font-size: 13px; color: #64748b;">Valide 15 minutes</p>
                    <button class="btn" onclick="closeModal()" style="margin-top: 20px;">Fermer</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // VOIR PIN
        function voirPIN() {
            const pin = '1234';
            alert(`üîê Code PIN de votre carte :\n\n${pin}\n\n‚ö†Ô∏è Ne partagez jamais votre PIN`);
        }

        // G√âRER LIMITES
        function gererLimites() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = '‚öôÔ∏è G√©rer les Limites de Carte';
            body.innerHTML = `
                <div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px;">üí≥ Limite quotidienne de paiement:</label>
                        <input type="number" value="1000" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px;">üí∞ Limite quotidienne de retrait DAB:</label>
                        <input type="number" value="500" style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                    </div>
                    <button class="btn">‚úÖ Enregistrer</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // CHOISIR PRODUIT CRYPTO
        function choisirProduitCrypto(crypto, solde, euroValue) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = `üíé Payer avec ${crypto}`;
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Solde: <strong>${solde} ${crypto}</strong> (‚âà ${euroValue} ‚Ç¨)</p>
                    <p style="margin-bottom: 15px;">Que voulez-vous acheter ?</p>
                    <button class="btn" onclick="showSection('boutique'); closeModal();">üõçÔ∏è Produits Boutique</button>
                    <button class="btn" onclick="showSection('abonnement'); closeModal();">üìÖ Abonnement</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // PAYER BOUTIQUE
        // ========== RECOMMANDATIONS INTELLIGENTES ==========
        function afficherRecommandations(totalActuel) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            // R√©cup√©rer les produits disponibles
            const clubSlug = getCurrentClub();
            const tousLesProduits = getProduitsClub(clubSlug, 15);
            
            // Filtrer les produits non s√©lectionn√©s
            const produitsNonSelectionnes = tousLesProduits.filter(p => 
                !state.produitsSelectionnes.find(ps => ps.id === p.id)
            );
            
            // Recommander 3 produits al√©atoires
            const recommandations = produitsNonSelectionnes
                .sort(() => Math.random() - 0.5)
                .slice(0, 3);
            
            title.textContent = 'üí° Produits Recommand√©s';
            body.innerHTML = `
                <div>
                    <div style="background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 5px;">üéÅ Vous avez s√©lectionn√© 1 produit</div>
                        <div style="font-size: 13px; opacity: 0.9;">Voici des articles qui pourraient vous int√©resser :</div>
                    </div>
                    
                    <div style="display: grid; gap: 15px; margin-bottom: 20px;">
                        ${recommandations.map(p => `
                            <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; display: flex; align-items: center; gap: 15px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'" onclick="ajouterRecommandation('${p.id}')">
                                <div style="font-size: 40px;">${p.emoji || 'üõçÔ∏è'}</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: bold; font-size: 15px;">${p.nom}</div>
                                    <div style="font-size: 13px; opacity: 0.7; margin-top: 3px;">${p.categorie}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 18px; font-weight: bold; color: #4ade80;">${p.prix.toFixed(2)} ‚Ç¨</div>
                                    <div style="font-size: 11px; opacity: 0.7; margin-top: 3px;">Cliquer pour ajouter</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn btn-secondary" onclick="closeModal(); payerBoutique();">
                            Non merci, payer
                        </button>
                        <button class="btn" onclick="closeModal();">
                            Continuer mes achats
                        </button>
                    </div>
                </div>
            `;
            modal.classList.add('active');
        }
        
        function ajouterRecommandation(produitId) {
            const clubSlug = getCurrentClub();
            const tousLesProduits = getProduitsClub(clubSlug, 15);
            const produit = tousLesProduits.find(p => p.id === produitId);
            
            if (produit) {
                toggleProduitScrap√©(produitId);
                closeModal();
                alert(`‚úÖ ${produit.nom} ajout√© au panier !`);
            }
        }
        
        // ========== V√âRIFIER PROMOTIONS PERSONNALIS√âES ==========
        function verifierPromotions(total) {
            const capaciteFinanciere = state.wallet + state.carte;
            const clubStablecoin = getClubStablecoin();
            const stablecoinBalance = clubStablecoin ? clubStablecoin.balance : 0;
            
            // Promotions selon capacit√©
            let promotion = null;
            
            if (total >= 100 && total < 150 && capaciteFinanciere >= 150) {
                promotion = {
                    seuil: 150,
                    remise: 10,
                    message: "D√©pensez 50‚Ç¨ de plus et obtenez 10‚Ç¨ de remise !"
                };
            } else if (total >= 150 && total < 200 && capaciteFinanciere >= 200) {
                promotion = {
                    seuil: 200,
                    remise: 20,
                    message: "D√©pensez 50‚Ç¨ de plus et obtenez 20‚Ç¨ de remise !"
                };
            } else if (total >= 50 && total < 100 && capaciteFinanciere >= 100) {
                promotion = {
                    seuil: 100,
                    remise: 5,
                    message: "Atteignez 100‚Ç¨ et obtenez 5‚Ç¨ de remise !"
                };
            }
            
            if (promotion) {
                afficherPromotion(promotion, total);
            }
        }
        
        function afficherPromotion(promotion, total) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            const manquant = promotion.seuil - total;
            
            title.textContent = 'üéâ Promotion Disponible !';
            body.innerHTML = `
                <div>
                    <div style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 20px; border-radius: 15px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 10px;">üéÅ</div>
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">${promotion.message}</div>
                        <div style="font-size: 14px; opacity: 0.9;">Il vous manque seulement ${manquant.toFixed(2)}‚Ç¨</div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Total actuel :</span>
                            <strong>${total.toFixed(2)} ‚Ç¨</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Seuil promo :</span>
                            <strong style="color: #4ade80;">${promotion.seuil.toFixed(2)} ‚Ç¨</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <span>Remise :</span>
                            <strong style="color: #f59e0b;">-${promotion.remise.toFixed(2)} ‚Ç¨</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 18px;">
                            <span>Total final :</span>
                            <strong style="color: #10b981;">${(promotion.seuil - promotion.remise).toFixed(2)} ‚Ç¨</strong>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn btn-secondary" onclick="closeModal(); payerBoutique();">
                            Non, payer maintenant
                        </button>
                        <button class="btn" onclick="closeModal();">
                            Ajouter des produits
                        </button>
                    </div>
                </div>
            `;
            modal.classList.add('active');
        }
        
        // ========== CALCULER M√âTHODE OPTIMALE ==========
        function calculerMethodeOptimale(total, state) {
            const capaciteWallet = state.wallet;
            const capaciteCarte = state.carte;
            const clubStablecoin = getClubStablecoin();
            const stablecoinBalance = clubStablecoin ? clubStablecoin.balance : 0;
            const stablecoinCode = clubStablecoin ? clubStablecoin.code : 'OMC';
            
            // M√©thode recommand√©e selon capacit√© et cashback
            if (stablecoinBalance >= total) {
                return {
                    html: `
                        <div style="background: linear-gradient(135deg, #10b981, #059669); padding: 20px; border-radius: 15px; margin-bottom: 15px; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #fbbf24; color: #1a1a2e; padding: 5px 12px; border-radius: 10px; font-size: 11px; font-weight: bold;">RECOMMAND√â</div>
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 48px; margin-bottom: 10px;">üíé</div>
                                <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">Payer avec ${stablecoinCode}</div>
                                <div style="font-size: 13px; opacity: 0.9;">Solde : ${stablecoinBalance.toFixed(2)} ${stablecoinCode}</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 10px; margin-bottom: 15px; text-align: center;">
                                <div style="font-size: 14px; font-weight: bold; color: #fbbf24;">üéÅ +${(total * 0.03).toFixed(2)}‚Ç¨ cashback (3%)</div>
                            </div>
                            <button class="btn" onclick="payerAvecStablecoin('${stablecoinCode}', ${total})" style="width: 100%; background: white; color: #10b981; font-weight: bold; font-size: 16px; padding: 15px;">
                                üíé Payer ${total.toFixed(2)}‚Ç¨ avec ${stablecoinCode}
                            </button>
                        </div>
                    `
                };
            } else if (capaciteWallet >= total) {
                return {
                    html: `
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; margin-bottom: 15px; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #fbbf24; color: #1a1a2e; padding: 5px 12px; border-radius: 10px; font-size: 11px; font-weight: bold;">RECOMMAND√â</div>
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 48px; margin-bottom: 10px;">üí∞</div>
                                <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">Payer avec Wallet</div>
                                <div style="font-size: 13px; opacity: 0.9;">Solde : ${capaciteWallet.toFixed(2)} ‚Ç¨</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 10px; margin-bottom: 15px; text-align: center;">
                                <div style="font-size: 14px; font-weight: bold; color: #fbbf24;">üéÅ +${(total * 0.02).toFixed(2)}‚Ç¨ cashback (2%)</div>
                            </div>
                            <button class="btn" onclick="payerAvecWallet(${total})" style="width: 100%; background: white; color: #667eea; font-weight: bold; font-size: 16px; padding: 15px;">
                                üí∞ Payer ${total.toFixed(2)}‚Ç¨ avec Wallet
                            </button>
                        </div>
                    `
                };
            } else if (capaciteCarte >= total) {
                return {
                    html: `
                        <div style="background: linear-gradient(135deg, #1e40af, #3b82f6); padding: 20px; border-radius: 15px; margin-bottom: 15px; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #fbbf24; color: #1a1a2e; padding: 5px 12px; border-radius: 10px; font-size: 11px; font-weight: bold;">RECOMMAND√â</div>
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 48px; margin-bottom: 10px;">üí≥</div>
                                <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">Payer avec Carte</div>
                                <div style="font-size: 13px; opacity: 0.9;">Solde : ${capaciteCarte.toFixed(2)} ‚Ç¨</div>
                            </div>
                            <button class="btn" onclick="payerAvecCarte(${total})" style="width: 100%; background: white; color: #1e40af; font-weight: bold; font-size: 16px; padding: 15px;">
                                üí≥ Payer ${total.toFixed(2)}‚Ç¨ avec Carte
                            </button>
                        </div>
                    `
                };
            } else {
                return {
                    html: `
                        <div style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 20px; border-radius: 15px; margin-bottom: 15px; text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 10px;">‚ö†Ô∏è</div>
                            <div style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">Solde insuffisant</div>
                            <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">Veuillez utiliser une autre m√©thode de paiement</div>
                        </div>
                    `
                };
            }
        }
        
        function payerBoutique() {
            if (state.produitsSelectionnes.length === 0) {
                alert('‚ùå Veuillez s√©lectionner au moins un produit');
                return;
            }

            const total = state.produitsSelectionnes.reduce((sum, p) => sum + p.prix, 0);
            
            // ‚úÖ RECOMMANDATIONS INTELLIGENTES AVANT PAIEMENT
            if (state.produitsSelectionnes.length === 1) {
                afficherRecommandations(total);
                return;
            }
            
            // ‚úÖ V√âRIFIER PROMOTIONS PERSONNALIS√âES
            verifierPromotions(total);
            const clubStablecoinData = getClubStablecoin();
            const clubStablecoin = clubStablecoinData ? clubStablecoinData.code : 'OMC';
            // Convertir code (ex: 'OMC') en cl√© state (ex: 'omcoin')
            const stablecoinKey = clubStablecoin.toLowerCase().replace(/c$/i, '') + 'coin';
            const stablecoinBalance = state[stablecoinKey] !== undefined ? state[stablecoinKey] : (clubStablecoinData ? clubStablecoinData.balance : 0);
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí≥ Paiement Personnalis√©';
            
            // ‚úÖ CALCULER M√âTHODE RECOMMAND√âE
            const methodeRecommandee = calculerMethodeOptimale(total, state);
            
            body.innerHTML = `
                <div>
                    <!-- En-t√™te avec total -->
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">Total √† payer</div>
                        <div style="font-size: 36px; font-weight: bold;">${total.toFixed(2)} ‚Ç¨</div>
                        <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">${state.produitsSelectionnes.length} produit${state.produitsSelectionnes.length > 1 ? 's' : ''}</div>
                    </div>
                    
                    <!-- M√©thode recommand√©e -->
                    ${methodeRecommandee.html}
                    
                    <!-- Autres m√©thodes -->
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 14px; opacity: 0.7; margin-bottom: 15px; text-align: center;">Autres moyens de paiement</div>
                        <div style="display: grid; gap: 10px;">
                            ${state.wallet >= total ? `<button class="btn btn-secondary" onclick="payerAvecWallet(${total})" style="padding: 12px;">üí∞ Wallet (${state.wallet.toFixed(2)} ‚Ç¨)</button>` : ''}
                            ${state.carte >= total ? `<button class="btn btn-secondary" onclick="payerAvecCarte(${total})" style="padding: 12px;">üí≥ Carte (${state.carte.toFixed(2)} ‚Ç¨)</button>` : ''}
                            ${stablecoinBalance >= total ? `<button class="btn btn-secondary" onclick="payerAvecStablecoin('${clubStablecoin}', ${total})" style="padding: 12px;">üíé ${clubStablecoin} (${stablecoinBalance.toFixed(2)})</button>` : ''}
                            <button class="btn btn-secondary" onclick="payerAvecNOWPayments(${total})" style="padding: 12px;">‚Çø Crypto (300+ devises)</button>
                            <button class="btn btn-secondary" onclick="payerModeTouriste(${total})" style="padding: 12px;">üåç Alipay / WeChat Pay</button>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 20px; width: 100%;">
                        Annuler
                    </button>
                </div>
            `;
            modal.classList.add('active');
        }
        
        // Fonction de paiement avec le stablecoin du club
        // ========================================
        // G√âN√âRATION TRANSACTIONS DEMO
        // ========================================
        function genererTransactionsDemo() {
            // V√©rifier si des transactions existent d√©j√†
            const transactionsExistantes = localStorage.getItem('transactions');
            if (transactionsExistantes && JSON.parse(transactionsExistantes).length > 0) {
                console.log('‚úÖ Transactions existantes charg√©es depuis localStorage');
                return; // Ne pas g√©n√©rer si des transactions existent d√©j√†
            }
            
            console.log('üé¨ G√©n√©ration de 15 transactions de d√©monstration...');
            
            // Liste de transactions fictives r√©alistes
            const transactionsDemo = [
                { nom: 'üëï Maillot Domicile 2024-2025', montant: -89.99, cashback: 2.70, type: 'boutique' },
                { nom: 'üß£ √âcharpe Officielle', montant: -29.99, cashback: 0.90, type: 'boutique' },
                { nom: 'üíé Rechargement Wallet OMC', montant: 100.00, cashback: 3.00, type: 'stablecoin' },
                { nom: '‚öΩ Ballon Officiel Ligue 1', montant: -49.99, cashback: 1.50, type: 'boutique' },
                { nom: 'üá®üá≥ Paiement Alipay - Boutique', montant: -35.00, cashback: 1.05, type: 'alipay' },
                { nom: 'üèΩ Short Officiel', montant: -39.99, cashback: 1.20, type: 'boutique' },
                { nom: 'üí¨ WeChat Pay - Produits', montant: -25.50, cashback: 0.77, type: 'wechat' },
                { nom: 'üåê Paiement Crypto BTC', montant: -120.00, cashback: 3.60, type: 'crypto' },
                { nom: 'üß¢ Casquette Officielle', montant: -24.99, cashback: 0.75, type: 'boutique' },
                { nom: 'üí∞ Transfert Fan-to-Fan', montant: 50.00, cashback: 1.50, type: 'wallet' },
                { nom: 'üëï Maillot Ext√©rieur 2024-2025', montant: -89.99, cashback: 2.70, type: 'boutique' },
                { nom: 'üíé Rechargement USDC', montant: 200.00, cashback: 6.00, type: 'stablecoin' },
                { nom: 'üéí Sac √† Dos Officiel', montant: -59.99, cashback: 1.80, type: 'boutique' },
                { nom: 'üá®üá≥ Alipay - Billetterie', montant: -45.00, cashback: 1.35, type: 'alipay' },
                { nom: 'üåê Paiement ETH', montant: -75.00, cashback: 2.25, type: 'crypto' }
            ];
            
            // G√©n√©rer des dates √©chelonn√©es sur les 7 derniers jours
            const now = Date.now();
            const jourEnMs = 24 * 60 * 60 * 1000;
            
            transactionsDemo.forEach((trans, index) => {
                // D√©calage temporel : transaction la plus r√©cente = aujourd'hui, plus ancienne = il y a 7 jours
                const decalageJours = Math.floor((index / transactionsDemo.length) * 7);
                const decalageHeures = Math.floor(Math.random() * 12); // Heure al√©atoire
                const timestamp = now - (decalageJours * jourEnMs) - (decalageHeures * 60 * 60 * 1000);
                
                // Cr√©er la date format√©e
                const date = new Date(timestamp);
                const dateFormatee = date.toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' });
                const heureFormatee = date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
                
                // Ajouter la transaction avec d√©lai progressif pour animation
                setTimeout(() => {
                    ajouterTransactionTempsReel({
                        nom: trans.nom,
                        montant: trans.montant,
                        cashback: trans.cashback,
                        type: trans.type
                    });
                }, index * 100); // D√©lai de 100ms entre chaque transaction
            });
            
            console.log('‚úÖ 15 transactions de d√©monstration g√©n√©r√©es');
        }
        
        // ========================================
        // FONCTION AJOUT TRANSACTION TEMPS R√âEL
        // ========================================
        function ajouterTransactionTempsReel(transaction) {
            const container = document.getElementById('transactionsRecentes');
            if (!container) return;
            
            const now = new Date();
            const dateStr = now.toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' });
            const timeStr = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            const transactionId = 'TRX-' + now.getFullYear() + (now.getMonth()+1).toString().padStart(2,'0') + now.getDate().toString().padStart(2,'0') + '-' + now.getTime();
            
            // D√©terminer l'ic√¥ne et le gradient selon le type
            let icon = 'üí≥';
            let gradient = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            
            if (transaction.type === 'boutique') {
                icon = 'üëï';
                gradient = 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)';
            } else if (transaction.type === 'stablecoin') {
                icon = 'üíé';
                gradient = 'linear-gradient(135deg, #00f2fe 0%, #4facfe 100%)';
            } else if (transaction.type === 'wallet') {
                icon = 'üí∞';
                gradient = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
            } else if (transaction.type === 'crypto') {
                icon = 'üåê';
                gradient = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
            } else if (transaction.type === 'alipay') {
                icon = 'üá®üá≥';
                gradient = 'linear-gradient(135deg, #1677ff 0%, #0958d9 100%)';
            } else if (transaction.type === 'wechat') {
                icon = 'üí¨';
                gradient = 'linear-gradient(135deg, #07c160 0%, #06ae56 100%)';
            }
            
            const montantColor = transaction.montant < 0 ? '#ff6b6b' : '#10b981';
            const montantClass = transaction.montant < 0 ? '' : 'positive';
            
            // Cr√©er l'√©l√©ment transaction
            const transactionHTML = `
                <div class="transaction-item" onclick="voirTicket('${transaction.nom}', '${dateStr}', '${transactionId}', ${transaction.montant}, ${transaction.cashback || 0})" style="animation: slideInRight 0.5s ease-out;">
                    <div class="transaction-icon" style="background: ${gradient};">${icon}</div>
                    <div class="transaction-details">
                        <div class="transaction-name">${transaction.nom}</div>
                        <div class="transaction-date">${dateStr} - ${timeStr}</div>
                    </div>
                    <div class="transaction-amount ${montantClass}" style="color: ${montantColor};">${transaction.montant.toFixed(2)} EUR</div>
                </div>
            `;
            
            // Ins√©rer en PREMIER (plus r√©cent en haut)
            container.insertAdjacentHTML('afterbegin', transactionHTML);
            
            // Limiter √† 10 transactions affich√©es
            const allTransactions = container.querySelectorAll('.transaction-item');
            if (allTransactions.length > 10) {
                allTransactions[allTransactions.length - 1].remove();
            }
            
            // Animation d'apparition
            const newTransaction = container.firstElementChild;
            newTransaction.style.opacity = '0';
            setTimeout(() => {
                newTransaction.style.transition = 'opacity 0.5s ease-out';
                newTransaction.style.opacity = '1';
            }, 10);
        }

        function payerAvecStablecoin(stablecoin, montant) {
            const clubStablecoinData = getClubStablecoin();
            const stablecoinCode = clubStablecoinData ? clubStablecoinData.code : stablecoin;
            // Convertir code (ex: 'OMC') en cl√© state (ex: 'omcoin')
            const stablecoinKey = stablecoinCode.toLowerCase().replace(/c$/i, '') + 'coin';
            const balance = state[stablecoinKey] !== undefined ? state[stablecoinKey] : (clubStablecoinData ? clubStablecoinData.balance : 0);
            
            if (balance >= montant) {
                // R√©duire le solde
                if (state[stablecoinKey]) {
                    state[stablecoinKey] -= montant;
                }
                const cashback = montant * 0.03; // 3% cashback
                state.cashback += cashback;
                updateSoldes();
                
                // ‚úÖ AJOUTER TRANSACTION TEMPS R√âEL
                ajouterTransactionTempsReel({
                    nom: `Boutique - Paiement ${stablecoinCode}`,
                    montant: -montant,
                    cashback: cashback,
                    type: 'stablecoin'
                });
                
                alert(`‚úÖ Paiement de ${montant.toFixed(2)} ${stablecoinCode} r√©ussi !\n\n+${cashback.toFixed(2)} ‚Ç¨ cashback ajout√©`);
                state.produitsSelectionnes = [];
                afficherProduitsBoutique();
                updatePanier();
                closeModal();
            } else {
                alert(`‚ùå Solde ${stablecoinCode} insuffisant\n\nVotre solde : ${balance.toFixed(2)} ${stablecoinCode}\nMontant requis : ${montant.toFixed(2)} ${stablecoinCode}`);
            }
        }
        
        // Fonction de paiement avec NOWPayments
        async function payerAvecNOWPayments(montant) {
            console.log('üí∞ Paiement NOWPayments initi√©:', montant, '‚Ç¨');
            
            if (typeof window.NOWPayments === 'undefined') {
                alert('‚ùå Module NOWPayments non charg√©. Veuillez r√©essayer.');
                return;
            }
            
            try {
                // Afficher le modal de s√©lection de crypto
                window.NOWPayments.showCryptoSelectionModal(montant, async (cryptoSymbol, estimation) => {
                    console.log('Crypto s√©lectionn√©e:', cryptoSymbol, estimation);
                    
                    try {
                        // Cr√©er le paiement NOWPayments
                        const orderId = 'ORDER-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9).toUpperCase();
                        const orderDescription = `Boutique ${clubName || 'PaieCashPlay'} - ${state.produitsSelectionnes.length} produit(s)`;
                        
                        const paymentData = await window.NOWPayments.createPayment({
                            priceAmount: montant,
                            priceCurrency: 'EUR',
                            payCurrency: cryptoSymbol,
                            orderId: orderId,
                            orderDescription: orderDescription,
                            successUrl: window.location.href + '?payment=success',
                            cancelUrl: window.location.href + '?payment=cancel'
                        });
                        
                        console.log('‚úÖ Paiement cr√©√©:', paymentData);
                        
                        // Afficher le modal de paiement
                        if (typeof window.NOWPayments.showCryptoPaymentModal === 'function') {
                            window.NOWPayments.showCryptoPaymentModal(paymentData);
                        } else {
                            // Fallback : afficher les infos de paiement
                            alert(`‚úÖ Paiement cr√©√© !\n\nEnvoyez ${paymentData.pay_amount} ${cryptoSymbol.toUpperCase()}\n√Ä l'adresse : ${paymentData.pay_address}`);
                        }
                    } catch (error) {
                        console.error('Erreur cr√©ation paiement:', error);
                        alert('‚ùå Erreur lors de la cr√©ation du paiement. Veuillez r√©essayer.');
                    }
                });
            } catch (error) {
                console.error('Erreur paiement NOWPayments:', error);
                alert('‚ùå Erreur lors du paiement. Veuillez r√©essayer.');
            }
        }

        function payerAvecWallet(montant) {
            if (state.wallet >= montant) {
                state.wallet -= montant;
                const cashback = montant * 0.02;
                state.cashback += cashback;
                updateSoldes();
                
                // ‚úÖ AJOUTER TRANSACTION TEMPS R√âEL
                ajouterTransactionTempsReel({
                    nom: 'Boutique - Paiement Wallet',
                    montant: -montant,
                    cashback: cashback,
                    type: 'wallet'
                });
                
                alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec Wallet r√©ussi !\n\n+${cashback.toFixed(2)} ‚Ç¨ cashback ajout√©`);
                state.produitsSelectionnes = [];
                afficherProduitsBoutique();
                updatePanier();
                closeModal();
            } else {
                alert('‚ùå Solde insuffisant');
            }
        }

        function payerAvecCarte(montant) {
            if (state.carte >= montant) {
                state.carte -= montant;
                updateSoldes();
                
                // ‚úÖ AJOUTER TRANSACTION TEMPS R√âEL
                ajouterTransactionTempsReel({
                    nom: 'Boutique - Paiement Carte',
                    montant: -montant,
                    cashback: 0,
                    type: 'boutique'
                });
                
                alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec Carte r√©ussi !`);
                state.produitsSelectionnes = [];
                afficherProduitsBoutique();
                updatePanier();
                closeModal();
            } else {
                alert('‚ùå Solde insuffisant');
            }
        }

        function payerAvecCrypto(crypto, montant) {
            // ‚úÖ AJOUTER TRANSACTION TEMPS R√âEL
            ajouterTransactionTempsReel({
                nom: `Boutique - Paiement ${crypto}`,
                montant: -montant,
                cashback: 0,
                type: 'crypto'
            });
            
            alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec ${crypto} effectu√© !\n\nTransaction blockchain confirm√©e.`);
            state.produitsSelectionnes = [];
            afficherProduitsBoutique();
            updatePanier();
            closeModal();
        }

        function payerModeTouriste(montant) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üåç Mode Touriste';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Total: <strong>${montant.toFixed(2)} ‚Ç¨</strong></p>
                    <button class="btn" onclick="payerAvecMethode('Alipay', ${montant})">üá®üá≥ Alipay</button>
                    <button class="btn" onclick="payerAvecMethode('WeChat Pay', ${montant})">üá®üá≥ WeChat Pay</button>
                    <button class="btn" onclick="payerAvecMethode('M-Pesa', ${montant})">üåç M-Pesa</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function payerAvecMethode(methode, montant) {
            // D√©terminer le type de transaction selon la m√©thode
            let type = 'boutique';
            if (methode === 'Alipay') type = 'alipay';
            else if (methode === 'WeChat Pay') type = 'wechat';
            
            // ‚úÖ AJOUTER TRANSACTION TEMPS R√âEL
            ajouterTransactionTempsReel({
                nom: `Boutique - Paiement ${methode}`,
                montant: -montant,
                cashback: 0,
                type: type
            });
            
            alert(`‚úÖ Paiement de ${montant.toFixed(2)} ‚Ç¨ avec ${methode} effectu√© !`);
            state.produitsSelectionnes = [];
            afficherProduitsBoutique();
            updatePanier();
            closeModal();
        }

        // PAYER BOUTIQUE BNPL
        function payerBoutiqueBNPL() {
            if (state.produitsSelectionnes.length === 0) {
                alert('‚ùå Veuillez s√©lectionner au moins un produit');
                return;
            }

            const total = state.produitsSelectionnes.reduce((sum, p) => sum + p.prix, 0);
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = 'üí≥ BNPL - Payer Plus Tard';
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Total: <strong>${total.toFixed(2)} ‚Ç¨</strong></p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                        <div onclick="selectBNPL(${total}, 3, 0)" style="background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold;">3x</div>
                            <div style="font-size: 11px; margin-top: 5px;">SANS FRAIS</div>
                            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">${(total / 3).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                        <div onclick="selectBNPL(${total}, 4, 0.015)" style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 15px; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold;">4x</div>
                            <div style="font-size: 11px; margin-top: 5px;">1.5% frais</div>
                            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">${((total * 1.015) / 4).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                        <div onclick="selectBNPL(${total}, 6, 0.025)" style="background: linear-gradient(135deg, #ef4444, #dc2626); padding: 15px; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold;">6x</div>
                            <div style="font-size: 11px; margin-top: 5px;">2.5% frais</div>
                            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">${((total * 1.025) / 6).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 15px;">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function selectBNPL(montant, fois, tauxFrais) {
            const frais = montant * tauxFrais;
            const total = montant + frais;
            const mensualite = total / fois;
            
            alert(`‚úÖ Paiement en ${fois}x accept√© !\n\nMontant: ${montant.toFixed(2)} ‚Ç¨\nFrais: ${frais.toFixed(2)} ‚Ç¨\nTotal: ${total.toFixed(2)} ‚Ç¨\nMensualit√©: ${mensualite.toFixed(2)} ‚Ç¨ √ó ${fois}`);
            state.produitsSelectionnes = [];
            afficherProduitsBoutique();
            updatePanier();
            closeModal();
        }

        // ACHETER ABONNEMENT
        function acheterAbonnement(nom, prix) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = `üìÖ ${nom}`;
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Prix: <strong>${prix.toFixed(2)} ‚Ç¨</strong></p>
                    <button class="btn" onclick="payerAbonnement('${nom}', ${prix}, 'Wallet')">üí∞ Payer avec Wallet</button>
                    <button class="btn" onclick="payerAbonnement('${nom}', ${prix}, 'Carte')">üí≥ Payer avec Carte</button>
                    <button class="btn" onclick="payerAbonnementBNPL('${nom}', ${prix})">üí≥ Payer en 3x/4x (BNPL)</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function payerAbonnement(nom, prix, moyen) {
            if (moyen === 'Wallet' && state.wallet >= prix) {
                state.wallet -= prix;
                updateSoldes();
                alert(`‚úÖ Abonnement "${nom}" activ√© !\n\nPaiement: ${prix.toFixed(2)} ‚Ç¨ avec Wallet\n\nVotre abonnement est actif imm√©diatement.`);
                closeModal();
            } else if (moyen === 'Carte' && state.carte >= prix) {
                state.carte -= prix;
                updateSoldes();
                alert(`‚úÖ Abonnement "${nom}" activ√© !\n\nPaiement: ${prix.toFixed(2)} ‚Ç¨ avec Carte\n\nVotre abonnement est actif imm√©diatement.`);
                closeModal();
            } else {
                alert('‚ùå Solde insuffisant');
            }
        }

        function payerAbonnementBNPL(nom, prix) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = `üí≥ ${nom} - BNPL`;
            body.innerHTML = `
                <div>
                    <p style="margin-bottom: 20px;">Prix: <strong>${prix.toFixed(2)} ‚Ç¨</strong></p>
                    <div style="display: grid; gap: 10px;">
                        <div onclick="confirmerAbonnementBNPL('${nom}', ${prix}, 3)" style="background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 10px; cursor: pointer;">
                            <div style="font-weight: bold;">3x SANS FRAIS</div>
                            <div style="font-size: 20px; margin-top: 5px;">${(prix / 3).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                        <div onclick="confirmerAbonnementBNPL('${nom}', ${prix}, 4)" style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 15px; border-radius: 10px; cursor: pointer;">
                            <div style="font-weight: bold;">4x avec 1.5% frais</div>
                            <div style="font-size: 20px; margin-top: 5px;">${((prix * 1.015) / 4).toFixed(2)} ‚Ç¨/mois</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 15px;">Annuler</button>
                </div>
            `;
            modal.classList.add('active');
        }

        function confirmerAbonnementBNPL(nom, prix, fois) {
            alert(`‚úÖ Abonnement "${nom}" activ√© avec BNPL ${fois}x !\n\n‚ö†Ô∏è IMPORTANT:\nSi vous ne payez pas, votre abonnement sera bloqu√© et revendu √† un autre fan.\n\nMensualit√©: ${(prix / fois).toFixed(2)} ‚Ç¨`);
            closeModal();
        }

        // MENU PARTENAIRE
        function ouvrirMenuPartenaire(partenaire, cashbackPct) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            const menu = partenaire === "McDonald's" ? menuMcDonalds : [];
            let selection = [];
            let total = 0;

            title.textContent = `üçî Menu ${partenaire} (${cashbackPct}% cashback)`;
            body.innerHTML = `
                <div>
                    <div class="product-grid" id="menu-grid">
                        ${menu.map(item => `
                            <div class="product-card" onclick="toggleMenuItem(${item.id}, ${item.prix}, '${item.nom}')" id="menu-item-${item.id}">
                                <div class="product-img">${item.emoji}</div>
                                <div class="product-name">${item.nom}</div>
                                <div class="product-price">${item.prix.toFixed(2)} ‚Ç¨</div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.2); border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Total:</span>
                            <strong id="totalMenu" style="color: #4ade80; font-size: 20px;">0.00 ‚Ç¨</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>Cashback ${cashbackPct}%:</span>
                            <strong id="cashbackMenu" style="color: #4ade80;">0.00 ‚Ç¨</strong>
                        </div>
                    </div>
                    <button class="btn" onclick="payerMenuPartenaire('${partenaire}', ${cashbackPct})" style="margin-top: 15px;">üí≥ Payer en 1 Clic</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            `;
            
            window.menuSelection = [];
            window.partenaireCashback = cashbackPct;
            
            modal.classList.add('active');
        }

        function toggleMenuItem(id, prix, nom) {
            const element = document.getElementById(`menu-item-${id}`);
            const index = window.menuSelection.findIndex(item => item.id === id);
            
            if (index > -1) {
                window.menuSelection.splice(index, 1);
                element.classList.remove('selected');
            } else {
                window.menuSelection.push({ id, prix, nom });
                element.classList.add('selected');
            }
            
            const total = window.menuSelection.reduce((sum, item) => sum + item.prix, 0);
            const cashback = total * (window.partenaireCashback / 100);
            
            document.getElementById('totalMenu').textContent = total.toFixed(2) + ' ‚Ç¨';
            document.getElementById('cashbackMenu').textContent = cashback.toFixed(2) + ' ‚Ç¨';
        }

        function payerMenuPartenaire(partenaire, cashbackPct) {
            if (window.menuSelection.length === 0) {
                alert('‚ùå Veuillez s√©lectionner au moins un produit');
                return;
            }
            
            const total = window.menuSelection.reduce((sum, item) => sum + item.prix, 0);
            const cashback = total * (cashbackPct / 100);
            
            if (state.wallet >= total) {
                state.wallet -= total;
                state.cashback += cashback;
                updateSoldes();
                
                const produits = window.menuSelection.map(item => item.nom).join(', ');
                alert(`‚úÖ Paiement 1 Clic r√©ussi chez ${partenaire} !\n\nProduits: ${produits}\nTotal: ${total.toFixed(2)} ‚Ç¨\nCashback: +${cashback.toFixed(2)} ‚Ç¨\n\nLe cashback sera cr√©dit√© dans 24-48h`);
                closeModal();
            } else {
                alert('‚ùå Solde Wallet insuffisant');
            }
        }

        // ===== RECHERCHE AUTO EN TEMPS R√âEL =====
        let searchTimeout;
        const searchInput = document.getElementById('searchInput');
        const searchClear = document.getElementById('searchClear');
        const searchResults = document.getElementById('searchResults');

        // √âcouter la frappe clavier (recherche auto)
        if (searchInput) {
            searchInput.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                // Afficher/masquer le bouton X
                if (query.length > 0) {
                    searchClear.style.display = 'flex';
                } else {
                    searchClear.style.display = 'none';
                    searchResults.classList.remove('active');
                    return;
                }
                
                // Recherche auto avec d√©lai (300ms)
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    performSearch(query);
                }, 300);
            });

            // Masquer les r√©sultats si on clique ailleurs
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                    searchResults.classList.remove('active');
                }
            });
        }

        function clearSearch() {
            searchInput.value = '';
            searchClear.style.display = 'none';
            searchResults.classList.remove('active');
            searchInput.focus();
        }

        function performSearch(query) {
            if (!query) {
                searchResults.classList.remove('active');
                return;
            }

            const lowerQuery = query.toLowerCase();
            let results = [];

            // 1. Chercher dans les L√âGENDES
            const currentClubSlug = getCurrentClub();
            let legends = [];
            if (typeof getLegendsForClub === 'function') {
                legends = getLegendsForClub(currentClubSlug);
            }

            legends.forEach(legend => {
                if (legend.name.toLowerCase().includes(lowerQuery) || 
                    legend.role.toLowerCase().includes(lowerQuery) ||
                    legend.achievements.toLowerCase().includes(lowerQuery)) {
                    
                    const clubCoin = getClubStablecoin();
                    results.push({
                        type: 'legend',
                        icon: '‚≠ê',
                        title: legend.name,
                        desc: `${legend.role} ‚Ä¢ ${legend.period}`,
                        price: legend.nft && legend.nft.available ? `${legend.nft.price} ${clubCoin.code}` : null,
                        action: () => {
                            showSection('legendes');
                            searchResults.classList.remove('active');
                            searchInput.value = '';
                            searchClear.style.display = 'none';
                        }
                    });
                }
            });

            // 2. Chercher dans les CARTES JOUEURS AFRICAINS (Hakimi, P√©p√©, Aubameyang)
            const joueursAfricains = [
                { 
                    name: 'Achraf Hakimi', 
                    club: 'Paris Saint-Germain',
                    clubSlug: 'paris-saint-germain',
                    pays: 'Maroc',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Nicolas Pepe', 
                    club: 'Villarreal CF',
                    clubSlug: 'villarreal-cf',
                    pays: 'Cote d\'Ivoire',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Mohamed Salah', 
                    club: 'Liverpool FC',
                    clubSlug: 'liverpool-fc',
                    pays: 'Egypte',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Sadio Mane', 
                    club: 'Al-Nassr FC',
                    clubSlug: 'al-nassr-fc',
                    pays: 'Senegal',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Riyad Mahrez', 
                    club: 'Al-Ahli Saudi FC',
                    clubSlug: 'al-ahli-saudi-fc',
                    pays: 'Algerie',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Victor Osimhen', 
                    club: 'Galatasaray SK',
                    clubSlug: 'galatasaray-sk',
                    pays: 'Nigeria',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Thomas Partey', 
                    club: 'Arsenal FC',
                    clubSlug: 'arsenal-fc',
                    pays: 'Ghana',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Andre Onana', 
                    club: 'Trabzonspor',
                    clubSlug: 'trabzonspor',
                    pays: 'Cameroun',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                },
                { 
                    name: 'Pierre-Emerick Aubameyang', 
                    club: 'Olympique de Marseille',
                    clubSlug: 'olympique-de-marseille',
                    pays: 'Gabon',
                    cartes: ['FAN gratuite', 'VIP 1 970 FCFA / 3 EUR']
                }
            ];

            joueursAfricains.forEach(joueur => {
                const matchName = joueur.name.toLowerCase().includes(lowerQuery);
                const matchClub = joueur.club.toLowerCase().includes(lowerQuery);
                const matchPays = joueur.pays.toLowerCase().includes(lowerQuery);
                
                // Alias de recherche pour les clubs (PSG, OM, etc.)
                const aliases = {
                    'psg': 'paris saint-germain',
                    'paris': 'paris saint-germain',
                    'om': 'olympique de marseille',
                    'marseille': 'olympique de marseille',
                    'lens': 'rc lens'
                };
                
                const matchAlias = aliases[lowerQuery] && joueur.club.toLowerCase().includes(aliases[lowerQuery]);
                
                if (matchName || matchClub || matchPays || matchAlias) {
                    let carteUrl = 'cartes-joueurs-africains.html';
                    if (joueur.clubSlug === 'paris-saint-germain') carteUrl = 'cartes-hakimi.html';
                    if (joueur.clubSlug === 'villarreal-cf') carteUrl = 'cartes-pepe.html';
                    if (joueur.clubSlug === 'trabzonspor') carteUrl = 'cartes-onana.html';
                    
                    results.push({
                        type: 'joueur',
                        icon: 'üí≥',
                        title: joueur.name,
                        desc: `${joueur.pays} ‚Ä¢ ${joueur.club}`,
                        price: '2 cartes bancaires',
                        action: () => {
                            window.open(carteUrl, '_blank');
                            searchResults.classList.remove('active');
                            searchInput.value = '';
                            searchClear.style.display = 'none';
                        }
                    });
                }
            });

            // 4. Chercher dans les PRODUITS BOUTIQUE
            if (Array.isArray(produitsBoutique)) {
                produitsBoutique.forEach(produit => {
                    if (produit.nom.toLowerCase().includes(lowerQuery)) {
                        results.push({
                            type: 'product',
                            icon: produit.emoji || 'üõçÔ∏è',
                            title: produit.nom,
                            desc: 'Boutique Officielle',
                            price: `${produit.prix.toFixed(2)} ‚Ç¨`,
                            action: () => {
                                showSection('boutique');
                                searchResults.classList.remove('active');
                                searchInput.value = '';
                                searchClear.style.display = 'none';
                                // S√©lectionner le produit
                                setTimeout(() => {
                                    const card = document.getElementById(`product-${produit.id}`);
                                    if (card) {
                                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                        card.style.animation = 'pulse 1s ease-in-out';
                                    }
                                }, 300);
                            }
                        });
                    }
                });
            }

            // 5. Chercher dans les PRODUITS WOOCOMMERCE (cache)
            if (Array.isArray(wooProductsCache) && wooProductsCache.length > 0) {
                wooProductsCache.forEach(product => {
                    if (product.name.toLowerCase().includes(lowerQuery)) {
                        results.push({
                            type: 'product',
                            icon: 'üõçÔ∏è',
                            title: product.name,
                            desc: 'Boutique WooCommerce',
                            price: `${parseFloat(product.price).toFixed(2)} ‚Ç¨`,
                            action: () => {
                                showSection('boutique');
                                searchResults.classList.remove('active');
                                searchInput.value = '';
                                searchClear.style.display = 'none';
                            }
                        });
                    }
                });
            }

            // 6. Chercher dans les CLUBS DE BASE (hardcod√©s pour r√©trocompatibilit√©)
            const clubNames = {
                'olympique-de-marseille': { name: 'Olympique de Marseille', alias: ['OM', 'Marseille'], icon: '‚ö™üîµ' },
                'paris-saint-germain': { name: 'Paris Saint-Germain', alias: ['PSG', 'Paris'], icon: 'üî¥üîµ' },
                'olympique-lyonnais': { name: 'Olympique Lyonnais', alias: ['OL', 'Lyon'], icon: 'üî¥üîµ' },
                'as-monaco': { name: 'AS Monaco', alias: ['Monaco', 'ASM'], icon: 'üî¥‚ö™' },
                'losc-lille': { name: 'LOSC Lille', alias: ['Lille', 'LOSC'], icon: 'üî¥‚ö™' },
                'rc-lens': { name: 'RC Lens', alias: ['Lens', 'Racing'], icon: 'üü°üî¥' },
                'sco-angers': { name: 'SCO Angers', alias: ['Angers', 'SCO'], icon: '‚ö™‚ö´' },
                'stade-rennais': { name: 'Stade Rennais', alias: ['Rennes', 'Stade'], icon: 'üî¥‚ö´' },
                'ogc-nice': { name: 'OGC Nice', alias: ['Nice', 'OGC'], icon: 'üî¥‚ö´' },
                'arsenal': { name: 'Arsenal FC', alias: ['Arsenal', 'Gunners'], icon: 'üî¥‚ö™' },
                'liverpool': { name: 'Liverpool FC', alias: ['Liverpool', 'Reds', 'LFC'], icon: 'üî¥' },
                'manchester-city': { name: 'Manchester City', alias: ['Man City', 'City', 'Citizens'], icon: 'üíô' },
                'bayern-munich': { name: 'Bayern Munich', alias: ['Bayern', 'Munich'], icon: 'üî¥‚ö™' },
                'real-madrid': { name: 'Real Madrid', alias: ['Real', 'Madrid', 'Merengues'], icon: '‚ö™' },
                'galatasaray': { name: 'Galatasaray SK', alias: ['Galatasaray', 'Gala', 'Cimbom'], icon: 'üü°üî¥' },
                'fenerbahce': { name: 'Fenerbah√ße SK', alias: ['Fenerbah√ße', 'Fener', 'Fenerbahce'], icon: 'üü°üîµ' },
                'besiktas': { name: 'Be≈üikta≈ü JK', alias: ['Be≈üikta≈ü', 'Besiktas', 'BJK'], icon: '‚ö´‚ö™' }
            };

            Object.entries(clubNames).forEach(([slug, data]) => {
                // Chercher dans le nom ET dans les alias
                const matchName = data.name.toLowerCase().includes(lowerQuery);
                const matchAlias = data.alias && data.alias.some(alias => alias.toLowerCase().includes(lowerQuery));
                
                if (matchName || matchAlias) {
                    results.push({
                        type: 'club',
                        icon: data.icon,
                        title: data.name,
                        desc: 'Changer de club',
                        price: null,
                        action: () => {
                            window.location.href = `app-universal-simple.html?club=${slug}`;
                        }
                    });
                }
            });

            // 7. Chercher dans TOUTES LES F√âD√âRATIONS FIFA (211 f√©d√©rations)
            if (typeof toutesLesFederationsFIFA !== 'undefined' && Array.isArray(toutesLesFederationsFIFA)) {
                toutesLesFederationsFIFA.forEach(fed => {
                    if (fed.name && fed.name.toLowerCase().includes(lowerQuery)) {
                        results.push({
                            type: 'federation',
                            icon: fed.logo || 'üåç',
                            title: fed.name,
                            desc: `FIFA - ${fed.code || ''}`,
                            price: null,
                            action: () => {
                                window.location.href = fed.path;
                            }
                        });
                    }
                });
            }

            // 8. Chercher dans COUPE DU MONDE 2026 (48 √©quipes)
            if (typeof coupeDuMonde2026 !== 'undefined' && Array.isArray(coupeDuMonde2026)) {
                coupeDuMonde2026.forEach(team => {
                    if (team.name && team.name.toLowerCase().includes(lowerQuery)) {
                        results.push({
                            type: 'competition',
                            icon: team.flag || '‚öΩ',
                            title: team.name,
                            desc: `üèÜ Coupe du Monde 2026${team.host ? ' üè†' : ''}`,
                            price: null,
                            action: () => {
                                window.location.href = team.path;
                            }
                        });
                    }
                });
            }

            // 9. Chercher dans CAN 2025 (24 √©quipes)
            if (typeof can2025 !== 'undefined' && Array.isArray(can2025)) {
                can2025.forEach(team => {
                    if (team.name && team.name.toLowerCase().includes(lowerQuery)) {
                        results.push({
                            type: 'competition',
                            icon: team.flag || 'üèÜ',
                            title: team.name,
                            desc: `üåç CAN 2025${team.host ? ' üè†' : ''}`,
                            price: null,
                            action: () => {
                                window.location.href = team.path;
                            }
                        });
                    }
                });
            }

            // 10. Chercher dans JOJ 2026 DAKAR (18 √©quipes U18)
            if (typeof joj2026Dakar !== 'undefined' && Array.isArray(joj2026Dakar)) {
                joj2026Dakar.forEach(team => {
                    if (team.name && team.name.toLowerCase().includes(lowerQuery)) {
                        results.push({
                            type: 'competition',
                            icon: team.flag || 'ü•á',
                            title: team.name,
                            desc: `üèÖ JOJ 2026 Dakar${team.host ? ' üè†' : ''}`,
                            price: null,
                            action: () => {
                                window.location.href = team.path;
                            }
                        });
                    }
                });
            }

            // 9. Chercher dans CLUBS PROFESSIONNELS (Ligue 1, Ligue 2, National)
            const allProfessionalClubs = [];
            if (typeof ligue1Clubs !== 'undefined') allProfessionalClubs.push(...ligue1Clubs);
            if (typeof ligue2Clubs !== 'undefined') allProfessionalClubs.push(...ligue2Clubs);
            if (typeof nationalClubs !== 'undefined') allProfessionalClubs.push(...nationalClubs);
            if (typeof national2GroupeA !== 'undefined') allProfessionalClubs.push(...national2GroupeA);
            if (typeof national2GroupeB !== 'undefined') allProfessionalClubs.push(...national2GroupeB);
            if (typeof national2GroupeC !== 'undefined') allProfessionalClubs.push(...national2GroupeC);
            if (typeof national2GroupeD !== 'undefined') allProfessionalClubs.push(...national2GroupeD);

            allProfessionalClubs.forEach(club => {
                if (club.name && club.name.toLowerCase().includes(lowerQuery)) {
                    results.push({
                        type: 'club_pro',
                        icon: club.logo || '‚öΩ',
                        title: club.name,
                        desc: club.league || 'Club Professionnel',
                        price: null,
                        action: () => {
                            window.location.href = club.path;
                        }
                    });
                }
            });

            // 10. Chercher dans BASKETBALL (Clubs + F√©d√©rations)
            const allBasketballClubs = [];
            if (typeof betclicEliteHommes !== 'undefined') allBasketballClubs.push(...betclicEliteHommes);
            if (typeof lfbFemmes !== 'undefined') allBasketballClubs.push(...lfbFemmes);
            if (typeof basketFederations !== 'undefined') allBasketballClubs.push(...basketFederations);

            allBasketballClubs.forEach(club => {
                if (club.name && club.name.toLowerCase().includes(lowerQuery)) {
                    results.push({
                        type: 'basketball',
                        icon: 'üèÄ',
                        title: club.name,
                        desc: `Basketball ${club.gender ? '- ' + club.gender : ''}`,
                        price: null,
                        action: () => {
                            window.location.href = club.path;
                        }
                    });
                }
            });

            // 11. Chercher dans HANDBALL (Clubs + F√©d√©rations)
            const allHandballClubs = [];
            if (typeof starligueMasculine !== 'undefined') allHandballClubs.push(...starligueMasculine);
            if (typeof d1fFeminine !== 'undefined') allHandballClubs.push(...d1fFeminine);
            if (typeof handballFederations !== 'undefined') allHandballClubs.push(...handballFederations);

            allHandballClubs.forEach(club => {
                if (club.name && club.name.toLowerCase().includes(lowerQuery)) {
                    results.push({
                        type: 'handball',
                        icon: 'ü§æ',
                        title: club.name,
                        desc: `Handball ${club.gender ? '- ' + club.gender : ''}`,
                        price: null,
                        action: () => {
                            window.location.href = club.path;
                        }
                    });
                }
            });

            // 12. Chercher dans RUGBY (Clubs + F√©d√©rations)
            const allRugbyClubs = [];
            if (typeof top14Rugby !== 'undefined') allRugbyClubs.push(...top14Rugby);
            if (typeof elite1RugbyFeminin !== 'undefined') allRugbyClubs.push(...elite1RugbyFeminin);
            if (typeof rugbyFederations !== 'undefined') allRugbyClubs.push(...rugbyFederations);

            allRugbyClubs.forEach(club => {
                if (club.name && club.name.toLowerCase().includes(lowerQuery)) {
                    results.push({
                        type: 'rugby',
                        icon: 'üèâ',
                        title: club.name,
                        desc: `Rugby ${club.gender ? '- ' + club.gender : ''}`,
                        price: null,
                        action: () => {
                            window.location.href = club.path;
                        }
                    });
                }
            });

            // 13. Chercher dans √âQUIPES NATIONALES (equipes-nationales-internationales.js)
            const allNationalTeams = [];
            if (typeof coupeMondeUEFA !== 'undefined') allNationalTeams.push(...coupeMondeUEFA);
            if (typeof coupeMondeConmebol !== 'undefined') allNationalTeams.push(...coupeMondeConmebol);
            if (typeof coupeMondeAFC !== 'undefined') allNationalTeams.push(...coupeMondeAFC);
            if (typeof coupeMondeCAF !== 'undefined') allNationalTeams.push(...coupeMondeCAF);
            if (typeof coupeMondeConcacaf !== 'undefined') allNationalTeams.push(...coupeMondeConcacaf);
            if (typeof coupeMondeOFC !== 'undefined') allNationalTeams.push(...coupeMondeOFC);

            allNationalTeams.forEach(team => {
                if (team.name && team.name.toLowerCase().includes(lowerQuery)) {
                    results.push({
                        type: 'equipe_nationale',
                        icon: team.logo || '‚öΩ',
                        title: team.name,
                        desc: team.league || '√âquipe Nationale',
                        price: null,
                        action: () => {
                            window.location.href = team.path;
                        }
                    });
                }
            });

            // 14. Chercher dans VOLLEYBALL (Clubs + F√©d√©rations)
            const allVolleyballClubs = [];
            if (typeof ligueAVolleyHommes !== 'undefined') allVolleyballClubs.push(...ligueAVolleyHommes);
            if (typeof ligueAVolleyFemmes !== 'undefined') allVolleyballClubs.push(...ligueAVolleyFemmes);
            if (typeof volleyballFederations !== 'undefined') allVolleyballClubs.push(...volleyballFederations);

            allVolleyballClubs.forEach(club => {
                if (club.name && club.name.toLowerCase().includes(lowerQuery)) {
                    results.push({
                        type: 'volleyball',
                        icon: 'üèê',
                        title: club.name,
                        desc: `Volleyball ${club.gender ? '- ' + club.gender : ''}`,
                        price: null,
                        action: () => {
                            window.location.href = club.path;
                        }
                    });
                }
            });

            // Afficher les r√©sultats
            displaySearchResults(results, query);
        }

        function displaySearchResults(results, query) {
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div class="search-no-results">
                        <div style="font-size: 50px; margin-bottom: 10px;">üîç</div>
                        <div style="font-size: 15px; font-weight: bold; margin-bottom: 5px;">Aucun r√©sultat</div>
                        <div style="font-size: 13px;">Essayez "Drogba", "Maillot", "Monaco", etc.</div>
                    </div>
                `;
                searchResults.classList.add('active');
                return;
            }

            // Limiter √† 8 r√©sultats
            const limitedResults = results.slice(0, 8);
            
            searchResults.innerHTML = `
                <div style="padding: 10px 20px; background: rgba(96, 165, 250, 0.1); border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 12px; font-weight: bold; color: #60a5fa;">
                    ${results.length} r√©sultat${results.length > 1 ? 's' : ''} pour "${query}"
                </div>
                ${limitedResults.map((result, index) => `
                    <div class="search-result-item" data-result-index="${index}">
                        <div class="search-result-icon">${result.icon}</div>
                        <div class="search-result-info">
                            <div class="search-result-title">${result.title}</div>
                            <div class="search-result-desc">${result.desc}</div>
                        </div>
                        ${result.price ? `<div class="search-result-price">${result.price}</div>` : ''}
                    </div>
                `).join('')}
                ${results.length > 8 ? `
                    <div style="padding: 15px 20px; text-align: center; font-size: 12px; opacity: 0.7; border-top: 1px solid rgba(255,255,255,0.1);">
                        ... et ${results.length - 8} autre${results.length - 8 > 1 ? 's' : ''} r√©sultat${results.length - 8 > 1 ? 's' : ''}
                    </div>
                ` : ''}
            `;
            
            searchResults.classList.add('active');
            
            // Ajouter les event listeners apr√®s cr√©ation du HTML
            setTimeout(() => {
                limitedResults.forEach((result, index) => {
                    const element = searchResults.querySelector(`[data-result-index="${index}"]`);
                    if (element) {
                        element.addEventListener('click', result.action);
                    }
                });
            }, 0);
        }

        // ===== CHARGEMENT DYNAMIQUE DU CLUB =====
        // Variables globales pour le club
        let clubName, clubLogo, clubSport;
        
        (function() {
            // R√©cup√©rer les param√®tres URL
            const urlParams = new URLSearchParams(window.location.search);
            clubName = urlParams.get('club') || localStorage.getItem('selectedClub') || 'Mon Club';
            clubLogo = urlParams.get('logo') || localStorage.getItem('clubLogo') || '‚öΩ';
            clubSport = urlParams.get('sport') || localStorage.getItem('clubSport') || 'Football';
            
            // Mettre √† jour le header
            document.getElementById('clubNameHeader').textContent = clubName;
            document.getElementById('clubLogoHeaderContainer').textContent = clubLogo;
            document.getElementById('welcomeMessage').textContent = `üëã Bienvenue chez ${clubName} !`;
            
            // Mettre √† jour le titre de la page
            document.title = `PaieCashFan - ${clubName}`;
            
            // Mettre √† jour le wallet et ticket avec le club dynamique
            const walletClubDisplay = document.getElementById('walletClubDisplay');
            const ticketClubDisplay = document.getElementById('ticketClubDisplay');
            
            // Cr√©er un affichage court pour le club (ex: "PSG", "OM", "OL")
            let clubShortName = clubName;
            if (clubName.toLowerCase().includes('paris-saint-germain') || clubName.toLowerCase().includes('psg')) {
                clubShortName = 'PSG';
            } else if (clubName.toLowerCase().includes('olympique') && clubName.toLowerCase().includes('marseille')) {
                clubShortName = 'OM';
            } else if (clubName.toLowerCase().includes('olympique') && clubName.toLowerCase().includes('lyon')) {
                clubShortName = 'OL';
            } else if (clubName.toLowerCase().includes('monaco')) {
                clubShortName = 'ASM';
            } else if (clubName.toLowerCase().includes('lille')) {
                clubShortName = 'LOSC';
            } else if (clubName.toLowerCase().includes('lens')) {
                clubShortName = 'RC Lens';
            } else if (clubName.toLowerCase().includes('rennes')) {
                clubShortName = 'Stade Rennais';
            } else if (clubName.toLowerCase().includes('nice')) {
                clubShortName = 'OGC Nice';
            } else {
                // Prendre les 3 premi√®res lettres en majuscules si pas de correspondance
                clubShortName = clubName.replace(/[^a-zA-Z]/g, '').substring(0, 3).toUpperCase() || 'CLUB';
            }
            
            if (walletClubDisplay) {
                walletClubDisplay.textContent = `${clubLogo} ${clubShortName}`;
            }
            if (ticketClubDisplay) {
                ticketClubDisplay.textContent = `${clubLogo} ${clubName}`;
            }
            
            // Sauvegarder dans localStorage
            localStorage.setItem('selectedClub', clubName);
            localStorage.setItem('clubLogo', clubLogo);
            localStorage.setItem('clubSport', clubSport);
            
            console.log('‚úÖ Club charg√©:', clubName, '|', clubSport, clubLogo);
            
            // ========== AFFICHER BOUTON AFRIQUE UNIQUEMENT POUR OM ==========
            const currentClub = getCurrentClub();
            const urlParamsOM = new URLSearchParams(window.location.search);
            const clubParam = urlParamsOM.get('club') || '';
            const btnAfrique = document.getElementById('btn-afrique');
            
            // V√©rifier si c'est l'OM via plusieurs m√©thodes
            const isOM = (
                currentClub && (
                    currentClub.toLowerCase().includes('olympique-de-marseille') ||
                    currentClub.toLowerCase().includes('marseille') ||
                    currentClub.toLowerCase() === 'om'
                )
            ) || (
                clubName && clubName.toLowerCase().includes('marseille')
            ) || (
                clubParam && (
                    clubParam.toLowerCase().includes('marseille') ||
                    clubParam.toLowerCase() === 'om'
                )
            );
            
            console.log('üîç D√©tection OM:', {
                currentClub,
                clubParam,
                clubName,
                isOM
            });
            
            if (isOM && btnAfrique) {
                btnAfrique.style.display = 'block';
                console.log('üåç Bouton Afrique activ√© pour l\'OM');
                // Initialiser la section Afrique
                setTimeout(() => {
                    initSectionAfrique();
                }, 500);
            }
        })();
        
        // ========== INITIALISATION SECTION AFRIQUE OM ==========
        function initSectionAfrique() {
            if (typeof OM_AFRIQUE === 'undefined') {
                console.warn('‚ö†Ô∏è Fichier om-afrique-franchise.js non charg√©');
                return;
            }
            
            console.log('üåç Initialisation Section Afrique OM...');
            console.log('üìä V√©rification des fonctions:', {
                getTousProduitsAfrique: typeof getTousProduitsAfrique,
                getPacksAfrique: typeof getPacksAfrique,
                getCartesAfrique: typeof getCartesAfrique
            });
            
            // Cartes co-brand√©es R√âALISTES - V13.5 logos recentr√©s + VIP or pur
            const cartesContainer = document.getElementById('cartes-afrique-container');
            console.log('üì¶ Cartes container trouv√©:', cartesContainer ? 'OUI' : 'NON');
            if (cartesContainer && typeof getCartesAfrique === 'function') {
                const cartes = getCartesAfrique();
                
                // Images des cartes g√©n√©r√©es par IA - V13.7 CLEAN (OM + PaieCash + Mastercard + infos uniquement)
                const carteImages = {
                    'carte-om-fan': 'https://www.genspark.ai/api/files/s/jfv1ZDJv',
                    'carte-om-vip': 'https://www.genspark.ai/api/files/s/NXrbT24r'
                };
                
                cartesContainer.innerHTML = cartes.map((carte) => {
                    const imageUrl = carteImages[carte.id] || 'https://www.genspark.ai/api/files/s/jfv1ZDJv';
                    
                    return `
                    <div style="width: 600px; height: 375px; cursor: pointer; flex-shrink: 0;" onclick="commanderCarteAfrique('${carte.id}')">
                        <img src="${imageUrl}" 
                             alt="${carte.nom}" 
                             style="width: 100%; height: 100%; display: block; border-radius: 12px; object-fit: cover;">
                    </div>
                    `;
                }).join('');
            }
            
            // Packs Fan OM CI
            const packsContainer = document.getElementById('packs-afrique-container');
            if (packsContainer && typeof getPacksAfrique === 'function') {
                const packs = getPacksAfrique();
                packsContainer.innerHTML = packs.map(pack => `
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; position: relative;" onclick="acheterPackAfrique('${pack.id}')">
                        ${pack.edition_limitee ? '<div style="position: absolute; top: 10px; right: 10px; background: #ef4444; padding: 5px 10px; border-radius: 20px; font-size: 10px; font-weight: bold;">√âDITION LIMIT√âE</div>' : ''}
                        <div style="font-size: 36px; margin-bottom: 10px;">${pack.image}</div>
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">${pack.nom}</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-bottom: 15px;">${pack.description}</div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                            <div style="font-size: 12px; font-weight: bold; margin-bottom: 8px;">Contenu du pack :</div>
                            ${pack.contenu.map(item => `<div style="font-size: 11px; margin: 5px 0;">${item}</div>`).join('')}
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 24px; font-weight: bold; color: #4ade80;">${pack.prix_fcfa.toLocaleString()} FCFA</div>
                                <div style="font-size: 11px; opacity: 0.8;">${pack.prix_eur} EUR</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 11px; font-weight: bold;">
                                √âconomie: ${pack.economie_eur}‚Ç¨
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Textile
            const textileContainer = document.getElementById('textile-afrique-container');
            if (textileContainer && typeof getTousProduitsAfrique === 'function') {
                const produits = getTousProduitsAfrique();
                const textile = produits.filter(p => p.category === 'textile');
                textileContainer.innerHTML = textile.map(prod => `
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;" onclick="acheterProduitAfrique('${prod.id}')">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">${prod.image}</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">${prod.nom}</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">${prod.description}</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">${prod.prix_fcfa.toLocaleString()} FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">${prod.prix_eur} EUR</div>
                        ${prod.exclusive ? '<div style="margin-top: 8px; background: #ef4444; padding: 3px 8px; border-radius: 10px; font-size: 10px; display: inline-block;">EXCLUSIF AFRIQUE</div>' : ''}
                    </div>
                `).join('');
            }
            
            // Accessoires
            const accessoiresContainer = document.getElementById('accessoires-afrique-container');
            if (accessoiresContainer && typeof getTousProduitsAfrique === 'function') {
                const produits = getTousProduitsAfrique();
                const accessoires = produits.filter(p => p.category === 'accessoires');
                accessoiresContainer.innerHTML = accessoires.map(prod => `
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; cursor: pointer;" onclick="acheterProduitAfrique('${prod.id}')">
                        <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">${prod.image}</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">${prod.nom}</div>
                        <div style="font-size: 11px; opacity: 0.8; margin-bottom: 10px;">${prod.description}</div>
                        <div style="font-size: 16px; font-weight: bold; color: #4ade80;">${prod.prix_fcfa.toLocaleString()} FCFA</div>
                        <div style="font-size: 11px; opacity: 0.7;">${prod.prix_eur} EUR</div>
                    </div>
                `).join('');
            }
            
            // Collection Exclusive
            const exclusiveContainer = document.getElementById('exclusive-afrique-container');
            if (exclusiveContainer && typeof getTousProduitsAfrique === 'function') {
                const produits = getTousProduitsAfrique();
                const exclusive = produits.filter(p => p.category === 'exclusive');
                exclusiveContainer.innerHTML = exclusive.map(prod => `
                    <div style="background: linear-gradient(135deg, #f97316, #ea580c); padding: 20px; border-radius: 15px; cursor: pointer;" onclick="acheterProduitAfrique('${prod.id}')">
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.3); padding: 5px 12px; border-radius: 20px; font-size: 10px; font-weight: bold;">‚≠ê EXCLUSIF</div>
                        <div style="font-size: 56px; text-align: center; margin-bottom: 10px;">${prod.image}</div>
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 8px; text-align: center;">${prod.nom}</div>
                        <div style="font-size: 12px; opacity: 0.9; margin-bottom: 15px; text-align: center;">${prod.description}</div>
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #fef3c7;">${prod.prix_fcfa.toLocaleString()} FCFA</div>
                            <div style="font-size: 12px; opacity: 0.8;">${prod.prix_eur} EUR</div>
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 10px; font-size: 11px; text-align: center;">
                            üéÅ Cashback +7% sur ce produit
                        </div>
                    </div>
                `).join('');
            }
            
            console.log('‚úÖ Section Afrique OM initialis√©e');
        }
        
        // ========== FONCTIONS ACHAT AFRIQUE ==========
        function commanderCarteAfrique(carteId) {
            alert(`üåç Commande Carte OM Africa : ${carteId}\n\nFonctionnalit√© en cours de d√©veloppement.\nVous serez contact√© par notre √©quipe Afrique.`);
        }
        
        function acheterPackAfrique(packId) {
            if (typeof OM_AFRIQUE === 'undefined' || typeof getPacksAfrique !== 'function') {
                alert('‚ö†Ô∏è Donn√©es Afrique non charg√©es');
                return;
            }
            
            const packs = getPacksAfrique();
            const pack = packs.find(p => p.id === packId);
            
            if (!pack) {
                alert('‚ö†Ô∏è Pack non trouv√©');
                return;
            }
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            title.textContent = `üéÅ ${pack.nom}`;
            body.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 64px; margin-bottom: 20px;">${pack.image}</div>
                    <div style="font-size: 20px; font-weight: bold; margin-bottom: 15px;">${pack.description}</div>
                    
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Prix du pack</div>
                        <div style="font-size: 36px; font-weight: bold;">${pack.prix_fcfa.toLocaleString()} FCFA</div>
                        <div style="font-size: 14px; opacity: 0.8;">(${pack.prix_eur} EUR)</div>
                        <div style="margin-top: 10px; background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 13px; display: inline-block;">
                            üí∞ √âconomie: ${pack.economie_eur}‚Ç¨
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; text-align: left; margin-bottom: 20px;">
                        <div style="font-size: 15px; font-weight: bold; margin-bottom: 15px; text-align: center;">üì¶ Contenu du pack :</div>
                        ${pack.contenu.map(item => `<div style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 13px;">${item}</div>`).join('')}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn" onclick="addToCartFromModal('${pack.id}', 'pack')" style="font-size: 16px; padding: 15px; background: linear-gradient(135deg, #f97316, #ea580c);">
                            üõí Ajouter au panier
                        </button>
                        <button class="btn" onclick="buyNowAfrique('${pack.id}', 'pack')" style="font-size: 16px; padding: 15px;">
                            üí≥ Acheter maintenant
                        </button>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()" style="width: 100%; margin-top: 10px;">
                        Continuer mes achats
                    </button>
                </div>
            `;
            modal.classList.add('active');
        }
        
        function acheterProduitAfrique(produitId) {
            if (typeof OM_AFRIQUE === 'undefined' || typeof getTousProduitsAfrique !== 'function') {
                alert('‚ö†Ô∏è Donn√©es Afrique non charg√©es');
                return;
            }
            
            const produits = getTousProduitsAfrique();
            const produit = produits.find(p => p.id === produitId);
            
            if (!produit) {
                alert('‚ö†Ô∏è Produit non trouv√©');
                return;
            }
            
            // Calculer cashback
            const cashback = typeof calculerCashbackAfrique === 'function' 
                ? calculerCashbackAfrique(produit.prix_eur, 'standard', produit.exclusive) 
                : (produit.prix_eur * 0.03);
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            title.textContent = produit.nom;
            body.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 96px; margin-bottom: 20px;">${produit.image}</div>
                    <div style="font-size: 16px; opacity: 0.9; margin-bottom: 20px;">${produit.description}</div>
                    
                    ${produit.exclusive ? '<div style="background: #ef4444; padding: 10px 20px; border-radius: 20px; font-size: 13px; font-weight: bold; display: inline-block; margin-bottom: 20px;">‚≠ê EXCLUSIF AFRIQUE</div>' : ''}
                    
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                        <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;">${produit.prix_fcfa.toLocaleString()} FCFA</div>
                        <div style="font-size: 14px; opacity: 0.8;">(${produit.prix_eur} EUR)</div>
                        <div style="margin-top: 10px; background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 12px; display: inline-block;">
                            üéÅ Cashback: +${cashback.toFixed(2)}‚Ç¨
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn" onclick="addToCartFromModal('${produit.id}', 'produit')" style="font-size: 16px; padding: 15px; background: linear-gradient(135deg, #f97316, #ea580c);">
                            üõí Ajouter au panier
                        </button>
                        <button class="btn" onclick="buyNowAfrique('${produit.id}', 'produit')" style="font-size: 16px; padding: 15px;">
                            üí≥ Acheter maintenant
                        </button>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()" style="width: 100%; margin-top: 10px;">
                        Continuer mes achats
                    </button>
                </div>
            `;
            modal.classList.add('active');
        }
        
        function confirmerAchatPackAfrique(packId) {
            const packs = getPacksAfrique();
            const pack = packs.find(p => p.id === packId);
            
            if (!pack) {
                alert('‚ö†Ô∏è Pack non trouv√©');
                return;
            }
            
            // Simuler paiement
            alert(`‚úÖ Commande confirm√©e !\n\nPack: ${pack.nom}\nMontant: ${pack.prix_fcfa.toLocaleString()} FCFA\n\nNotre √©quipe Afrique vous contactera sous 24h pour la livraison.\n\nüéÅ Bonus: ${pack.economie_eur}‚Ç¨ d'√©conomie !`);
            closeModal();
        }
        
        function confirmerAchatProduitAfrique(produitId) {
            const produits = getTousProduitsAfrique();
            const produit = produits.find(p => p.id === produitId);
            
            if (!produit) {
                alert('‚ö†Ô∏è Produit non trouv√©');
                return;
            }
            
            const cashback = calculerCashbackAfrique(produit.prix_eur, 'standard', produit.exclusive);
            
            // Simuler paiement
            alert(`‚úÖ Achat confirm√© !\n\nProduit: ${produit.nom}\nMontant: ${produit.prix_fcfa.toLocaleString()} FCFA\nCashback: +${cashback.toFixed(2)}‚Ç¨\n\nLivraison sous 3-5 jours ouvr√©s en C√¥te d'Ivoire.`);
            closeModal();
        }
        
        // ========================================
        // üí∞ GESTION MOYENS DE PAIEMENT INTERACTIFS
        // ========================================
        
        let selectedPaymentMethod = null;
        
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Reset tous les styles
            document.querySelectorAll('[id^="payment-"]').forEach(el => {
                el.style.border = '2px solid rgba(255,255,255,0.3)';
                el.style.transform = 'scale(1)';
            });
            
            // Highlight le s√©lectionn√©
            const selectedEl = document.getElementById(`payment-${method}`);
            if (selectedEl) {
                selectedEl.style.border = '3px solid #10b981';
                selectedEl.style.transform = 'scale(1.02)';
            }
            
            // Reset stablecoin style if not selected
            if (method !== 'stablecoin') {
                const stablecoinEl = document.getElementById('payment-stablecoin');
                if (stablecoinEl) {
                    stablecoinEl.style.border = '3px solid transparent';
                }
            }
            
            console.log('‚úÖ Moyen de paiement s√©lectionn√©:', method);
        }
        
        function processPayment() {
            const resultDiv = document.getElementById('payment-result');
            
            if (!selectedPaymentMethod) {
                resultDiv.style.display = 'block';
                resultDiv.style.background = 'rgba(239, 68, 68, 0.2)';
                resultDiv.style.border = '2px solid #ef4444';
                resultDiv.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 32px; margin-bottom: 10px;">‚ö†Ô∏è</div>
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">Aucun moyen de paiement s√©lectionn√©</div>
                        <div style="font-size: 12px; opacity: 0.9;">Veuillez choisir votre moyen de paiement pr√©f√©r√© ci-dessus.</div>
                    </div>
                `;
                return;
            }
            
            // R√©cup√©rer infos paiement
            const stablecoin = getClubStablecoin();
            const currentClub = getCurrentClub();
            const clubName = currentClub.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
            
            const methodsInfo = {
                'stablecoin': {
                    name: `${stablecoin.name} (${stablecoin.code})`,
                    icon: stablecoin.emoji,
                    cashback: '+10%',
                    frais: '0.5%',
                    message: `Transaction instantan√©e en stablecoin ${clubName}`
                },
                'orange': {
                    name: 'Orange Money',
                    icon: 'üü†',
                    cashback: '+3%',
                    frais: '1%',
                    message: 'Composez #144# sur votre t√©l√©phone'
                },
                'wave': {
                    name: 'Wave',
                    icon: 'üíô',
                    cashback: '+3%',
                    frais: '0%',
                    message: 'Transfert gratuit et instantan√©'
                },
                'card': {
                    name: 'Carte Bancaire',
                    icon: 'üí≥',
                    cashback: '+3%',
                    frais: '2.9%',
                    message: 'Paiement s√©curis√© 3D Secure'
                }
            };
            
            const info = methodsInfo[selectedPaymentMethod];
            const montant = 16400; // FCFA
            const montantEUR = 25;
            
            // Calculer cashback
            let cashbackPercent = selectedPaymentMethod === 'omc' ? 10 : 3;
            let cashbackAmount = (montantEUR * cashbackPercent / 100).toFixed(2);
            
            // Afficher confirmation
            resultDiv.style.display = 'block';
            resultDiv.style.background = 'linear-gradient(135deg, #10b981, #059669)';
            resultDiv.style.border = '2px solid #10b981';
            resultDiv.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 15px;">${info.icon}</div>
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">‚úÖ Paiement confirm√© !</div>
                    <div style="font-size: 14px; opacity: 0.95; margin-bottom: 15px;">${info.name}</div>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">Montant pay√©</div>
                        <div style="font-size: 24px; font-weight: bold;">${montant.toLocaleString()} FCFA</div>
                        <div style="font-size: 12px; opacity: 0.8;">(${montantEUR} EUR)</div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="font-size: 13px; font-weight: bold; margin-bottom: 5px;">üéÅ Cashback gagn√© : ${cashbackAmount}‚Ç¨</div>
                        <div style="font-size: 11px; opacity: 0.9;">Soit ${info.cashback} de votre achat</div>
                    </div>
                    
                    <div style="font-size: 12px; opacity: 0.9; line-height: 1.6;">
                        ${info.message}<br>
                        <br>
                        üì¶ Pack Fan OM CI - Starter<br>
                        üöö Livraison sous 3-5 jours<br>
                        üìß Email de confirmation envoy√©
                    </div>
                </div>
            `;
            
            // Scroll vers le r√©sultat
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // ========================================
        // üõí SYST√àME DE PANIER & CHECKOUT
        // ========================================
        
        let cart = [];
        
        function addToCart(item) {
            // V√©rifier si l'item existe d√©j√†
            const existingItem = cart.find(i => i.id === item.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({...item, quantity: 1});
            }
            
            updateCartUI();
            showCartNotification(item);
        }
        
        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            updateCartUI();
            if (cart.length === 0) {
                closeCart();
            }
        }
        
        function updateCartQuantity(itemId, change) {
            const item = cart.find(i => i.id === itemId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(itemId);
                } else {
                    updateCartUI();
                }
            }
        }
        
        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartFloating = document.getElementById('cart-floating');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (cartCount) {
                cartCount.textContent = totalItems;
            }
            
            if (cartFloating) {
                cartFloating.style.display = totalItems > 0 ? 'flex' : 'none';
            }
            
            // Si le modal panier est ouvert, le mettre √† jour
            const cartModal = document.getElementById('cart-modal');
            if (cartModal && cartModal.classList.contains('active')) {
                renderCart();
            }
        }
        
        function showCartNotification(item) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 24px;">‚úÖ</span>
                    <div>
                        <div style="font-weight: bold; margin-bottom: 3px;">Ajout√© au panier !</div>
                        <div style="font-size: 12px; opacity: 0.9;">${item.nom}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        function openCart() {
            renderCart();
            const cartModal = document.getElementById('cart-modal');
            if (cartModal) {
                cartModal.classList.add('active');
                cartModal.style.display = 'flex';
            }
        }
        
        function closeCart() {
            const cartModal = document.getElementById('cart-modal');
            if (cartModal) {
                cartModal.classList.remove('active');
                cartModal.style.display = 'none';
            }
        }
        
        function renderCart() {
            const modalBody = document.getElementById('cart-modal-body');
            
            if (cart.length === 0) {
                modalBody.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px;">
                        <div style="font-size: 80px; opacity: 0.3; margin-bottom: 20px;">üõí</div>
                        <div style="font-size: 20px; font-weight: bold; margin-bottom: 10px;">Votre panier est vide</div>
                        <div style="font-size: 14px; opacity: 0.7;">Ajoutez des produits OM pour commencer !</div>
                    </div>
                `;
                return;
            }
            
            const totalFCFA = cart.reduce((sum, item) => sum + (item.prix_fcfa * item.quantity), 0);
            const totalEUR = cart.reduce((sum, item) => sum + (item.prix_eur * item.quantity), 0);
            
            modalBody.innerHTML = `
                <div style="display: grid; gap: 20px;">
                    <!-- Liste des produits -->
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${cart.map(item => `
                            <div style="display: flex; gap: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-size: 48px;">${item.image || 'üì¶'}</div>
                                <div style="flex: 1;">
                                    <div style="font-size: 16px; font-weight: bold; margin-bottom: 5px;">${item.nom}</div>
                                    <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">${item.description || ''}</div>
                                    <div style="display: flex; align-items: center; gap: 15px;">
                                        <div style="font-size: 15px; font-weight: bold; color: #4ade80;">
                                            ${item.prix_fcfa.toLocaleString()} FCFA
                                            <span style="font-size: 11px; opacity: 0.7; margin-left: 5px;">(${item.prix_eur}‚Ç¨)</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 8px;">
                                            <button onclick="updateCartQuantity('${item.id}', -1)" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; padding: 0 5px;">‚àí</button>
                                            <span style="font-weight: bold; min-width: 20px; text-align: center;">${item.quantity}</span>
                                            <button onclick="updateCartQuantity('${item.id}', 1)" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; padding: 0 5px;">+</button>
                                        </div>
                                    </div>
                                </div>
                                <button onclick="removeFromCart('${item.id}')" style="background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #ef4444; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px; height: fit-content;">
                                    üóëÔ∏è Retirer
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    
                    <!-- Total -->
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="font-size: 14px; opacity: 0.9;">Sous-total (${cart.reduce((sum, item) => sum + item.quantity, 0)} articles)</span>
                            <span style="font-size: 14px; opacity: 0.9;">${totalFCFA.toLocaleString()} FCFA</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.3);">
                            <span style="font-size: 20px; font-weight: bold;">Total</span>
                            <div style="text-align: right;">
                                <div style="font-size: 24px; font-weight: bold; color: #fef3c7;">${totalFCFA.toLocaleString()} FCFA</div>
                                <div style="font-size: 14px; opacity: 0.8;">(${totalEUR.toFixed(2)} EUR)</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bouton Commander -->
                    <button onclick="proceedToCheckout()" class="btn" style="width: 100%; font-size: 18px; padding: 18px; background: linear-gradient(135deg, #10b981, #059669);">
                        üí≥ Proc√©der au paiement
                    </button>
                </div>
            `;
        }
        
        function proceedToCheckout() {
            const totalFCFA = cart.reduce((sum, item) => sum + (item.prix_fcfa * item.quantity), 0);
            const totalEUR = cart.reduce((sum, item) => sum + (item.prix_eur * item.quantity), 0);
            
            const modalBody = document.getElementById('cart-modal-body');
            const modalTitle = document.getElementById('cart-modal-title');
            
            // R√©cup√©rer le stablecoin du club actif
            const stablecoin = getClubStablecoin();
            
            modalTitle.textContent = 'üí≥ Choisissez votre mode de paiement';
            
            modalBody.innerHTML = `
                <div style="display: grid; gap: 25px;">
                    <!-- R√©capitulatif commande -->
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 15px;">üì¶ R√©capitulatif de la commande</div>
                        <div style="display: grid; gap: 8px; margin-bottom: 15px;">
                            ${cart.map(item => `
                                <div style="display: flex; justify-content: space-between; font-size: 13px;">
                                    <span>${item.quantity}x ${item.nom}</span>
                                    <span style="font-weight: bold;">${(item.prix_fcfa * item.quantity).toLocaleString()} FCFA</span>
                                </div>
                            `).join('')}
                        </div>
                        <div style="border-top: 2px solid rgba(255,255,255,0.3); padding-top: 15px; margin-top: 15px;">
                            <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: bold;">
                                <span>Total √† payer :</span>
                                <div style="text-align: right;">
                                    <div style="color: #4ade80;">${totalFCFA.toLocaleString()} FCFA</div>
                                    <div style="font-size: 14px; opacity: 0.7;">(${totalEUR.toFixed(2)} EUR)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- S√©lection du moyen de paiement -->
                    <div>
                        <div style="font-size: 16px; font-weight: bold; margin-bottom: 15px;">Choisissez votre moyen de paiement :</div>
                        <div style="display: grid; gap: 12px;">
                            <!-- STABLECOIN DYNAMIQUE -->
                            <div onclick="selectCheckoutPayment('stablecoin')" id="checkout-payment-stablecoin" class="checkout-payment-option" style="background: linear-gradient(135deg, ${stablecoin.colors[0]}, ${stablecoin.colors[1]}); padding: 18px; border-radius: 12px; cursor: pointer; border: 3px solid transparent; transition: all 0.3s;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center; gap: 15px;">
                                        <div style="font-size: 40px;">${stablecoin.emoji}</div>
                                        <div>
                                            <div style="font-size: 17px; font-weight: bold;">${stablecoin.name} (${stablecoin.code})</div>
                                            <div style="font-size: 12px; opacity: 0.9;">+10% cashback | Instantan√© | Frais 0.5%</div>
                                        </div>
                                    </div>
                                    <div style="font-size: 24px;">‚≠ê</div>
                                </div>
                            </div>
                            
                            <!-- Orange Money -->
                            <div onclick="selectCheckoutPayment('orange')" id="checkout-payment-orange" class="checkout-payment-option" style="background: rgba(255, 140, 0, 0.2); border: 2px solid #ff8c00; padding: 18px; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="font-size: 40px;">üü†</div>
                                    <div>
                                        <div style="font-size: 17px; font-weight: bold;">Orange Money</div>
                                        <div style="font-size: 12px; opacity: 0.9;">Frais 1% | üá®üáÆ üá∏üá≥ üá≤üá± üáßüá´ üá®üá≤ üá¨üá≥</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Wave -->
                            <div onclick="selectCheckoutPayment('wave')" id="checkout-payment-wave" class="checkout-payment-option" style="background: rgba(0, 120, 255, 0.2); border: 2px solid #0078ff; padding: 18px; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="font-size: 40px;">üíô</div>
                                    <div>
                                        <div style="font-size: 17px; font-weight: bold;">Wave</div>
                                        <div style="font-size: 12px; opacity: 0.9; color: #4ade80;">GRATUIT (0%) | üá®üáÆ üá∏üá≥ üá≤üá± üáßüá´ üáßüáØ</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- MTN Mobile Money -->
                            <div onclick="selectCheckoutPayment('mtn')" id="checkout-payment-mtn" class="checkout-payment-option" style="background: rgba(255, 204, 0, 0.2); border: 2px solid #ffcc00; padding: 18px; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="font-size: 40px;">üü°</div>
                                    <div>
                                        <div style="font-size: 17px; font-weight: bold;">MTN Mobile Money</div>
                                        <div style="font-size: 12px; opacity: 0.9;">Frais 1.5% | üá®üáÆ üá®üá≤ üá¨üá≠ üá≥üá¨ üá∫üá¨</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Moov Money -->
                            <div onclick="selectCheckoutPayment('moov')" id="checkout-payment-moov" class="checkout-payment-option" style="background: rgba(0, 80, 200, 0.2); border: 2px solid #0050c8; padding: 18px; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="font-size: 40px;">üîµ</div>
                                    <div>
                                        <div style="font-size: 17px; font-weight: bold;">Moov Money</div>
                                        <div style="font-size: 12px; opacity: 0.9;">Frais 1.2% | üá®üáÆ üáßüáØ üáπüá¨ üáßüá´ üá≥üá™</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Carte Bancaire -->
                            <div onclick="selectCheckoutPayment('card')" id="checkout-payment-card" class="checkout-payment-option" style="background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); padding: 18px; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="font-size: 40px;">üí≥</div>
                                    <div>
                                        <div style="font-size: 17px; font-weight: bold;">Carte Bancaire</div>
                                        <div style="font-size: 12px; opacity: 0.9;">Visa, Mastercard | Europe & Afrique</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Boutons -->
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 10px;">
                        <button onclick="renderCart()" class="btn btn-secondary" style="padding: 15px;">
                            ‚Üê Retour au panier
                        </button>
                        <button onclick="finalizePayment()" id="finalize-payment-btn" class="btn" style="padding: 15px; background: linear-gradient(135deg, #10b981, #059669); opacity: 0.5; cursor: not-allowed;" disabled>
                            üí∞ Confirmer le paiement
                        </button>
                    </div>
                </div>
            `;
        }
        
        let selectedCheckoutPaymentMethod = null;
        
        function selectCheckoutPayment(method) {
            selectedCheckoutPaymentMethod = method;
            
            // Reset tous les styles
            document.querySelectorAll('.checkout-payment-option').forEach(el => {
                el.style.border = el.id === 'checkout-payment-stablecoin' ? '3px solid transparent' : '2px solid rgba(255,255,255,0.3)';
                el.style.transform = 'scale(1)';
                el.style.boxShadow = 'none';
            });
            
            // Highlight le s√©lectionn√©
            const selectedEl = document.getElementById(`checkout-payment-${method}`);
            if (selectedEl) {
                selectedEl.style.border = '3px solid #10b981';
                selectedEl.style.transform = 'scale(1.02)';
                selectedEl.style.boxShadow = '0 5px 20px rgba(16, 185, 129, 0.3)';
            }
            
            // Activer le bouton de paiement
            const finalizeBtn = document.getElementById('finalize-payment-btn');
            if (finalizeBtn) {
                finalizeBtn.style.opacity = '1';
                finalizeBtn.style.cursor = 'pointer';
                finalizeBtn.disabled = false;
            }
        }
        
        function finalizePayment() {
            if (!selectedCheckoutPaymentMethod) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner un moyen de paiement');
                return;
            }
            
            const totalFCFA = cart.reduce((sum, item) => sum + (item.prix_fcfa * item.quantity), 0);
            const totalEUR = cart.reduce((sum, item) => sum + (item.prix_eur * item.quantity), 0);
            
            const stablecoin = getClubStablecoin();
            
            const methodsInfo = {
                'stablecoin': { name: `${stablecoin.name} (${stablecoin.code})`, icon: stablecoin.emoji, cashback: 10, frais: 0.5 },
                'orange': { name: 'Orange Money', icon: 'üü†', cashback: 3, frais: 1 },
                'wave': { name: 'Wave', icon: 'üíô', cashback: 3, frais: 0 },
                'mtn': { name: 'MTN Mobile Money', icon: 'üü°', cashback: 3, frais: 1.5 },
                'moov': { name: 'Moov Money', icon: 'üîµ', cashback: 3, frais: 1.2 },
                'card': { name: 'Carte Bancaire', icon: 'üí≥', cashback: 3, frais: 2.9 }
            };
            
            const info = methodsInfo[selectedCheckoutPaymentMethod];
            const cashbackAmount = (totalEUR * info.cashback / 100).toFixed(2);
            const fraisAmount = (totalFCFA * info.frais / 100).toFixed(0);
            
            const modalBody = document.getElementById('cart-modal-body');
            const modalTitle = document.getElementById('cart-modal-title');
            
            modalTitle.textContent = '‚úÖ Paiement Confirm√© !';
            
            modalBody.innerHTML = `
                <div style="text-align: center; padding: 30px 20px;">
                    <div style="font-size: 80px; margin-bottom: 20px;">${info.icon}</div>
                    <div style="font-size: 28px; font-weight: bold; margin-bottom: 15px; color: #10b981;">Paiement r√©ussi !</div>
                    <div style="font-size: 18px; opacity: 0.9; margin-bottom: 30px;">${info.name}</div>
                    
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 10px;">Montant pay√©</div>
                        <div style="font-size: 32px; font-weight: bold; color: #fef3c7; margin-bottom: 5px;">${totalFCFA.toLocaleString()} FCFA</div>
                        <div style="font-size: 16px; opacity: 0.8;">(${totalEUR.toFixed(2)} EUR)</div>
                        ${info.frais > 0 ? `<div style="margin-top: 10px; font-size: 12px; opacity: 0.7;">+ ${fraisAmount} FCFA de frais (${info.frais}%)</div>` : ''}
                    </div>
                    
                    <div style="background: rgba(16, 185, 129, 0.2); border: 2px solid #10b981; padding: 20px; border-radius: 15px; margin-bottom: 25px;">
                        <div style="font-size: 20px; font-weight: bold; margin-bottom: 10px;">üéÅ Cashback gagn√©</div>
                        <div style="font-size: 28px; font-weight: bold; color: #10b981;">+${cashbackAmount}‚Ç¨</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-top: 5px;">Soit ${info.cashback}% de votre commande</div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; text-align: left; margin-bottom: 25px;">
                        <div style="font-size: 15px; font-weight: bold; margin-bottom: 15px; text-align: center;">üì¶ D√©tails de la commande</div>
                        ${cart.map(item => `
                            <div style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 13px; display: flex; justify-content: space-between;">
                                <span>${item.quantity}x ${item.nom}</span>
                                <span style="font-weight: bold;">${(item.prix_fcfa * item.quantity).toLocaleString()} FCFA</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="font-size: 14px; opacity: 0.9; line-height: 1.8; margin-bottom: 30px;">
                        üìß <strong>Email de confirmation envoy√©</strong><br>
                        üìç <strong>Livraison :</strong> ${cart.some(i => i.category === 'pack') ? 'Point de retrait C√¥te d\'Ivoire' : '3-5 jours ouvr√©s'}<br>
                        üì± <strong>Suivi :</strong> Consultez votre espace client
                    </div>
                    
                    <button onclick="closeCartAndClear()" class="btn" style="width: 100%; padding: 18px; font-size: 16px; background: linear-gradient(135deg, #10b981, #059669);">
                        ‚úÖ Terminer
                    </button>
                </div>
            `;
            
            // Vider le panier apr√®s paiement
            setTimeout(() => {
                // Le panier sera vid√© quand l'utilisateur clique sur "Terminer"
            }, 500);
        }
        
        function closeCartAndClear() {
            cart = [];
            updateCartUI();
            closeCart();
        }
        
        function addToCartFromModal(itemId, type) {
            let item;
            
            if (type === 'produit') {
                if (typeof getTousProduitsAfrique === 'function') {
                    const produits = getTousProduitsAfrique();
                    item = produits.find(p => p.id === itemId);
                }
            } else if (type === 'pack') {
                if (typeof getPacksAfrique === 'function') {
                    const packs = getPacksAfrique();
                    item = packs.find(p => p.id === itemId);
                }
            }
            
            if (item) {
                addToCart(item);
                closeModal();
            } else {
                alert('‚ö†Ô∏è Article non trouv√©');
            }
        }
        
        function buyNowAfrique(itemId, type) {
            let item;
            
            if (type === 'produit') {
                if (typeof getTousProduitsAfrique === 'function') {
                    const produits = getTousProduitsAfrique();
                    item = produits.find(p => p.id === itemId);
                }
            } else if (type === 'pack') {
                if (typeof getPacksAfrique === 'function') {
                    const packs = getPacksAfrique();
                    item = packs.find(p => p.id === itemId);
                }
            }
            
            if (item) {
                // Vider le panier et ajouter seulement cet item
                cart = [];
                addToCart(item);
                closeModal();
                
                // Ouvrir directement le checkout
                setTimeout(() => {
                    openCart();
                    setTimeout(() => {
                        proceedToCheckout();
                    }, 300);
                }, 300);
            } else {
                alert('‚ö†Ô∏è Article non trouv√©');
            }
        }

        // ========== FONCTION AFFICHAGE L√âGENDES DYNAMIQUES ==========
        function displayLegends() {
            const container = document.getElementById('legendes-container');
            if (!container) return;
            
            // R√©cup√©rer le slug du club depuis l'URL ou localStorage
            const urlParams = new URLSearchParams(window.location.search);
            let clubSlug = urlParams.get('club') || localStorage.getItem('clubSlug') || 'olympique-marseille';
            
            // Normaliser le slug
            clubSlug = clubSlug.toLowerCase().replace(/\+/g, '-').replace(/\s+/g, '-');
            
            // R√©cup√©rer le stablecoin du club actif
            const clubCoin = getClubStablecoin();
            const coinCode = clubCoin.code;
            
            // R√©cup√©rer les l√©gendes pour ce club
            let legends = [];
            if (typeof getLegendsForClub === 'function') {
                legends = getLegendsForClub(clubSlug);
            }
            
            // Si aucune l√©gende trouv√©e, afficher un message
            if (!legends || legends.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; opacity: 0.7;">
                        <div style="font-size: 60px; margin-bottom: 15px;">‚≠ê</div>
                        <p style="font-size: 18px;">Aucune l√©gende document√©e pour ce club pour le moment.</p>
                        <p style="font-size: 14px; margin-top: 10px; opacity: 0.8;">Les l√©gendes seront ajout√©es prochainement.</p>
                    </div>
                `;
                return;
            }
            
            // Afficher chaque l√©gende avec son NFT
            container.innerHTML = legends.map(legend => {
                const rarityColors = {
                    'LEGENDARY': 'gold',
                    'EPIC': '#a855f7',
                    'RARE': '#3b82f6',
                    'COMMON': '#6b7280'
                };
                const rarityColor = rarityColors[legend.nft?.rarity] || '#6b7280';
                
                return `
                    <div style="background: rgba(255,255,255,0.05); border-radius: 20px; padding: 25px; border: 3px solid ${rarityColor}; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                        <div style="display: grid; grid-template-columns: 120px 1fr; gap: 20px; align-items: start;">
                            <!-- Photo L√©gende -->
                            <div style="position: relative;">
                                <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, ${rarityColor}, rgba(255,255,255,0.1)); display: flex; align-items: center; justify-content: center; font-size: 60px; border: 4px solid ${rarityColor};">
                                    ${legend.photo ? `<img src="${legend.photo}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" />` : ''}
                                    <span style="${legend.photo ? 'display:none;' : ''}">‚≠ê</span>
                                </div>
                                ${legend.nft && legend.nft.available ? `
                                    <div style="position: absolute; top: -10px; right: -10px; background: ${rarityColor}; color: ${legend.nft.rarity === 'LEGENDARY' ? '#1a1a2e' : 'white'}; padding: 5px 10px; border-radius: 15px; font-size: 10px; font-weight: bold; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                        ${legend.nft.rarity}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <!-- Infos L√©gende -->
                            <div>
                                <h3 style="font-size: 24px; margin-bottom: 8px; color: ${rarityColor};">${legend.name}</h3>
                                <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">
                                    <strong>${legend.role}</strong> ‚Ä¢ ${legend.period}
                                </div>
                                <div style="font-size: 13px; opacity: 0.85; line-height: 1.5; margin-bottom: 12px;">
                                    ${legend.achievements}
                                </div>
                                
                                <!-- Premi√®re √©quipe -->
                                <div style="font-size: 12px; opacity: 0.8; margin-bottom: 12px; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                    <strong>üèÅ Premi√®re √©quipe professionnelle :</strong> ${legend.firstClub} (${legend.firstClubPeriod})
                                    ${legend.note ? `<br><em style="opacity: 0.7;">${legend.note}</em>` : ''}
                                </div>
                                
                                ${legend.association || legend.activite ? `
                                    <!-- Association/Activit√© -->
                                    <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1)); padding: 12px; border-radius: 10px; border-left: 4px solid #10b981; margin-bottom: 12px;">
                                        <div style="font-size: 13px; font-weight: bold; margin-bottom: 5px; color: #10b981;">
                                            üíö ${legend.association ? 'Association' : 'Activit√©'}
                                        </div>
                                        <div style="font-size: 12px; opacity: 0.9;">
                                            ${legend.association || legend.activite}
                                        </div>
                                        <div style="font-size: 11px; margin-top: 8px; opacity: 0.8; font-style: italic;">
                                            üí° En achetant le NFT de ${legend.name.split(' ')[0]}, vous soutenez cette cause !
                                        </div>
                                    </div>
                                ` : ''}
                                
                                <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                                    <div style="font-size: 12px; opacity: 0.7;">
                                        üë• ${legend.followers.toLocaleString('fr-FR')} followers
                                    </div>
                                    
                                    ${legend.nft && legend.nft.available ? `
                                        <div style="display: flex; align-items: center; gap: 15px;">
                                            <div style="text-align: right;">
                                                <div style="font-size: 24px; font-weight: bold; color: ${rarityColor};">${legend.nft.price} ${coinCode}</div>
                                                <div style="font-size: 11px; opacity: 0.7;">√âdition ${legend.nft.edition}</div>
                                            </div>
                                            <button class="btn" style="padding: 10px 20px; font-size: 14px; margin: 0;" onclick="acheterNFT('${legend.name}', ${legend.nft.price})">
                                                üé® Acheter NFT
                                            </button>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            console.log(`‚úÖ ${legends.length} l√©gende(s) charg√©e(s) pour ${clubSlug}`);
        }
    </script>
</body>
</html>
